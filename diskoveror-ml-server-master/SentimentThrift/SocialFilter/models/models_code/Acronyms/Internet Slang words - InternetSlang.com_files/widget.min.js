var templates_string='<script id="socialBoxTemplate" type="text/x-jquery-tmpl"><ul class="social-box-com inner-list forum-list"><li class="socials-icons-container"><span class="login_with_social">${_("login_with_social")}</span><div class="clear"></div><div class="wrap-soc-icons"><a data-href="${frontend_base_url}${frontend_path}/embed/login/?pg=${encodeURIComponent(alowed_pg.toString())}" class="icon-so" style="outline: medium none;" hidefocus="true" target="_blank">S</a>{{if alowed_sn.indexOf("facebook") >= 0}}<a data-href="${frontend_base_url}${frontend_path}/embed/social_login/?type=fb" class="icon-facebook" style="outline: medium none;" hidefocus="true" target="_blank">F</a>{{/if}}{{if alowed_sn.indexOf("twitter") >= 0}}<a data-href="${frontend_base_url}${frontend_path}/embed/social_login/?type=tw" class="icon-twitter" style="outline: medium none;" hidefocus="true" target="_blank">T</a>{{/if}}{{if alowed_sn.indexOf("vkontakte") >= 0}}<a data-href="${frontend_base_url}${frontend_path}/embed/social_login/?type=vk" class="icon-vk" style="outline: medium none;" hidefocus="true" target="_blank">V</a>{{/if}}{{if alowed_sn.indexOf("google") >= 0}}<a data-href="${frontend_base_url}${frontend_path}/embed/social_login/?type=google" class="icon-google" style="outline: medium none;" hidefocus="true" target="_blank">G</a>{{/if}}{{if alowed_sn.indexOf("yahoo") >= 0}}<a data-href="${frontend_base_url}${frontend_path}/embed/social_login/?type=yahoo" class="icon-yahoo" style="outline: medium none;" hidefocus="true" target="_blank">Y</a>{{/if}}</div></li><li class="email-pass-soc"><span class="quick_signup_text">${_("quick_signup_text")}</span><div class="clear"></div><input class="f_email pholder main-color" type="text" name="email" placeholder="${_("quick_signup_field_email")}" maxlength="250"><input class="f_name pholde main-color" type="text" name="name" placeholder="${_("quick_signup_field_name")}" maxlength="30"><button class="go_frontend_login btn primary-button" type="submit"><span class="icon-arrow-btn">&#8594;</span></button><div class="terms-block"><input class="i-agree" type="checkbox" /><span>${_("popup_signup_agree_text")}</span><a href="${site_base_url}terms" target="_blank" class="link-color">${_("popup_signup_agree_text2")}</a></div></li></ul><\/script><script id="bodyTemplate" type="text/x-jquery-tmpl">{{if show_buttom && iOS}}<div class="mobile-button-container"><input id="openInIos" class="btn secondary-button" type="button" value="${_("open_in_app")}" hidefocus="true" style="outline: none;"></div>{{/if}}{{if show_buttom && android}}<div class="mobile-button-container"><a href="${getAndroidLink()}" class="btn secondary-button" style="outline: none;">${_("open_in_app")}</a></div>{{/if}}<div id="top_left_box"></div><div id="top_right_box"></div><div class="clear"></div><div class="comments-header" style="border:0;display:none;"><h3><span class="main-color" id="comments_quantity"></span></h3><div>{{tmpl "#headerTemplate"}}</div></div><div class="sort-header" style="display:none;"><ul><li class="sort-menu"><a><span class="sort-menu-title"></span><span class="caret"></span></a><ul><li><a data-value="date_only">${_("sort_date_only")}</a></li><li><a data-value="points_only">${_("sort_points_only")}</a></li><li><a data-value="date">${_("sort_date")}</a></li><li><a data-value="points">${_("sort_points")}</a></li><li><a data-value="date_oldest">${_("sort_date_oldest")}</a></li></ul></li></ul></div><div id="message_box"></div><div id="contact_us_popap" class="popover" style="display:none;"><p>{{html _("error_user_is_not_allowed")}}</p><textarea placeholder="" id="contact_body" hidefocus="true" style="outline: none;"></textarea><div class="button-wrapper"><input type="button" value="${_("popup_complain_confirm_button")}" hidefocus="true" class="btn btn-primary send_contact primary-button"><input type="button" value="${_("cancel_button")}" hidefocus="true" class="btn cancel_contact secondary-button"></div></div><div id="comments_block" style="display:none"><div class="comment-content wrap-comments-content">{{if String(checkIsForum()) === "true"}}{{tmpl "#formThreadsTemplate"}}{{else}}{{tmpl "#formContainerTemplate"}}{{/if}}</div><div class="clear"></div><div class="nav-div demo-forum-nav">{{if String(checkIsForum()) === "true"}}{{tmpl "#navForumTemplate"}}{{else}}{{tmpl "#navTemplate"}}{{/if}}</div><div class="clear"></div><div class="wrap-page" id="page_wraper"><div id="loading" style="position: absolute; left: 50%;"><div class="preloader" style="position: relative;"></div></div><div id="general-comments">{{if String(checkIsForum()) === "true"}}<div id="navigation" style="display: none;"></div>{{/if}}<ul id="comments" class="comments_demo" style="position:relative;"></ul><div class="bs-docs-example nav-bottom"><div class="pagination pagination-centered"><ul style="display:none"><li><input class="btn secondary-button" type="button" value="${_("button_show_more")}" hidefocus="true" id="show_more"></li></ul></div></div><div class="clear"></div></div></div></div><div id="bottom_left_box"></div><div id="bottom_right_box"></div><div class="clear"></div><div class="footer-comments" style="display:none"><a class="link-color" id="get_for_my_site">${_("get_for_my_site")}</a><div class="so-logo" alt="${_("logo")}"></div><a href="${String(getUrlForMobileApp())}" class="mobile-check">*</a></div><\/script><script id="goBackTemplate" type="text/x-jquery-tmpl"><div class="go-back-vraper"><div class="space2"></div><div class="clear"></div><div class="wrap-gobtn action_back" style="display:none;"><div class="popover right goBack">${_("go_back")}k<div class="arrow"></div></div></div><div class="clear"></div></div><\/script><script id="templateActionMenu" type="text/x-jquery-tmpl"><ul class="box-icon-action-menu box-icon-message" style="display:none;">{{each mess}}{{if class_name == "separator"}}<li class="${class_name}"></li>{{else}}<li data-title="${effect_name}" data-price="${price}" class="${class_name}"><a class="system-color">${ctoc(class_name)}</a></li>{{/if}}{{/each}}</ul><ul class="box-icon-action-menu box-icon-author" style="display:none;">{{each user}}{{if class_name == "separator"}}<li class="${class_name}"></li>{{else}}<li data-title="${effect_name}" data-price="${price}" class="${class_name}"><a class="system-color">${ctoc(class_name)}</a></li>{{/if}}{{/each}}</ul><\/script><script id="templateAdminActionMenu" type="text/x-jquery-tmpl"><ul class="nav nav-pills navsalut pull-right"><li class="dropdown"><a class="dropdown-toggle system-color" data-toggle="dropdown"><i class="icon-dropdown-inner" style="{{if String(!is_mob()) === "true"}} display: none; {{/if}}">0</i></a><ul class="dropdown-menu">{{each data}}<li class="${class_name}"><a>${effect_name}</a></li>{{/each}}</ul></li></ul><\/script><script id="templateAdminActionInlineMenu" type="text/x-jquery-tmpl"><div>{{each data}}<li class="${class_name}"><a class="link-color{{if class_name == "moderator_menu_approve"}} bold{{/if}}{{if class_name == "moderator_menu_spam"}} link-moderator{{/if}}">${effect_name}</a></li>{{/each}}</div><\/script><script id="templateCommunityTu" type="text/x-jquery-tmpl"><h2 class="h2-thread-new main-color">${title}</h2><div class="clear"></div><div class="space5"></div>{{each topusers}}<article class="user-section space14"><div class="space5"></div><div style="position:absolute;"><div class="user-avatar"><div class="border-s"><img alt="Avatar" src="${avatar}"></div></div></div><div class="name-desc" style="padding-left:52px;"><span>{{tmpl($value) "#nameTemplate" }}{{if String(typeof($value.rank)) !="undefined" && $value.rank}}<span class="pull-left" style="color:#${$value.rank.color};">{{if $value.rank.icon}}<i style="margin-right:0;" class="icon-rank-item rank-item${$value.rank.icon}"></i>{{else}}&nbsp;{{/if}} ${$value.rank.name} </span>{{/if}}</span><div class="clear"></div><div class="wrap-popover-list-com new-rewards"><div class="pull-left system-color"><b class="pointsval {{if stats.points < 0}}dis{{/if}}like-color">${addCommas(stats.points )}</b> ${nouns("points", stats.points)}</div>{{if stats.total_messages != 0}}<div class="pull-left system-color"><b class="like-color">${addCommas(stats.total_messages)}</b> ${nouns("posts", stats.total_messages)}</div>{{/if}}{{if stats.total_votes_up != 0}}<div class="pull-left system-color"><b class="like-color">${addCommas(stats.total_votes_up)}</b> ${nouns("votes_up", stats.total_votes_up)}</div>{{/if}}{{if stats.total_votes_down != 0}}<div class="pull-left system-color"><b class="dislike-color">${addCommas(stats.total_votes_down)}</b> ${nouns("votes_down", stats.total_votes_down)}</div>{{/if}}{{if stats.total_likes != 0}}<div class="pull-left last system-color"><b class="like-color">${addCommas(stats.total_likes)}</b> ${nouns("likes", stats.total_likes)}</div>{{/if}}{{if stats.total_dislikes != 0}}<div class="pull-left last system-color"><b class="dislike-color">${addCommas(stats.total_dislikes)}</b> ${nouns("dislikes", stats.total_dislikes)}</div>{{/if}}</div></div><div class="clear"></div></article>{{/each}}<\/script><script id="templateCommunityTt" type="text/x-jquery-tmpl"><h2 class="h2-thread-new main-color">${title}</h2><div class="clear"></div><div class="space5"></div>{{each topthreads}}<article class="user-section"><div class="name-desc"><span><a class="link-color" href="${url}" target="_blank">${title}</a></span><div class="clear"></div><div class="wrap-popover-list discussion-list-bot"><div class="popover-list-inner-com last system-color"> ${addCommas(total_posts)} ${nouns("posts", total_posts)}</div></div>{{if false && body != ""}}{{if is_body_short==1}}<div class="discussion-desc short_comment main-color">{{html body_short}} <a class="site_more link-color">${_("link_show_more")}</a></div><div class="discussion-desc full_comment main-color" style="display: none;">{{html body}} <a class="site_less link-color">${_("link_show_less")}</a></div>{{else}}<div class="discussion-desc main-color">{{html body}}</div>{{/if}}<div class="wrap-popover-list discussion-list-bot"><div class="popover-list-inner-com last system-color"> ${last_message_date} {{if false}}, ${_("user_by")} <a class="userinfo_${user_code}">${user_name}</a>{{/if}}</div></div>{{/if}}</div><div class="clear"></div></article>{{/each}}<\/script><script id="templateCommunity" type="text/x-jquery-tmpl"><ul id="community" style="position:relative;">{{tmpl "#goBackTemplate"}}<li class="comment"><div class="tab-container tab-top"><div class="tab-left"></div><div class="tab-right"></div></div><div class="clear:both;"></div><div class="tab-container tab-bottom"><div class="tab-left"></div><div class="tab-right"></div></div></li>{{tmpl "#goBackTemplate"}}</ul><\/script><script id="templateRewards" type="text/x-jquery-tmpl"><ul id="rewardspage" style="position:relative;">{{each rewds}}<li class="comment"><div id="message_reward_${$index}" class="border-level"></div><div class="postbox-rewards rewards-av"><div class="avatar">{{if i_url && i_url!=""}}<div class="avatar-rewards"><div class="border-s"><img src="${i_url}" alt=""></div></div>{{/if}}<div class="clear"></div></div><div class="comment-content wrap-comments-content"><h2 class="main-color">${title}</h2><p class="main-color">${description}</p></div><div class="claim-for link-color"><a class="">${_("claim_button")} ${addCommas(points)} ${nouns("fo_points", points)}</a></div><div class="buy-cancel system-color"><p>${_("check_buy")} &#34;${title}&#34;?</p><a class="buy-reward link-color" data-rewid="${$index}" data-price="${points}"><b>${_("popup_buy_buy")}</b></a><a class="cancel-reward link-color">${_("cancel_button")}</a></div></li>{{/each}}</ul><\/script><script id="templateActivityMessage" type="text/x-jquery-tmpl">{{if curr_act_group != date}}${curr_act_group = date,""}<li class="grouper main-color"><b>${date}</b></li>{{/if}}<li class="comment"><div class="postbox-activity border-level"><div class="avatar">{{if icon_url && icon_url!=""}}<div class="avatar"><div class="border-s"><img src="${icon_url}" alt=""></div></div>{{/if}}<div class="clear"></div></div><div class="comment-content wrap-comments-content"><p class="main-color">{{html message}}</p><p class="system-color">{{if points!=0}}<span class="{{if points >= 0}}like-color{{else}}dislike-color{{/if}}">{{if points>0}}+{{/if}}<b>${addCommas(points)}</b> <span>{{/if}}<span class="system-color">${_("on")} ${site_domain}</span></p></div></li><\/script><script id="templateActivity" type="text/x-jquery-tmpl"><ul style="position:relative;" id="currentuseractivitypage">{{if activity.replies || activity.actions}}<li><div class="activity-col clearfix"><div class="activity-col-left"><ul> ${curr_act_group = ""} {{each activity.replies}}{{tmpl($value) "#templateActivityMessage" }}{{/each}}</ul></div><div class="activity-col-right"><ul> ${curr_act_group = ""} {{each activity.actions}}{{tmpl($value) "#templateActivityMessage" }}{{/each}}</ul></div></div>{{if show_more}}<div class="show_activity"><input type="button" id="show_more_aactivity" data-count="${show_more_count}" hidefocus="true" value="${_("button_show_more")}" class="btn secondary-button" style="outline: medium none;"></div>{{/if}}</li>{{else}}<li class="comment no_comment" style="text-align:center;"><div class="no-comments">${_("no_activity_yet")}</div></li>{{/if}}</ul><\/script> <script id="templateGameRules" type="text/x-jquery-tmpl"><ul id="currentusergamerulespage" style="position:relative;">{{tmpl "#goBackTemplate"}}{{each rules}}{{if $index == "help_bonuses" || $index == "help_power_moves" || $index == "help_opp_for_expression"}}{{if $index != "help_bonuses" }}<br>{{/if}}<li class="rule_title"><p class="main-color">${_($index)}</p></li>{{else}}{{if $value != "-"}}{{if $value != "br"}}{{if typeof $value == "object"}}<li class="rule_name"><span class="main-color">{{html _($index)}}</span></li>{{each $value}}<li class="rule_name">&nbsp;&nbsp;&nbsp;<span class="main-color">{{html _($index)}}</span> {{if $value == 0}}<span class="like-color">${_("free")}</span> {{else}} {{if (($value == "") || ($value == " ") || ($value == "&nbsp"))}}{{else}}<span class="{{if $value < 0}}dis{{/if}}like-color">{{if $value > 0}}+{{/if}}${addCommas($value)}</span>{{/if}}{{/if}}</li>{{/each}}{{else}}<li class="rule_name"><span class="main-color">{{html _($index)}}</span> {{if $value == 0}}<span class="like-color">${_("free")}</span> {{else}} {{if (($value == "") || ($value == " ") || ($value == "&nbsp"))}}{{else}}<span class="{{if $value < 0}}dis{{/if}}like-color">{{if $value > 0}}+{{/if}}${addCommas($value)}</span>{{/if}}{{/if}}</li>{{/if}}<li class="rule_description"><span class="system-color">${_($index+"_c")}</span></li>{{else}}<li><p></p></li>{{/if}}{{/if}}{{/if}}{{/each}}</ul><\/script><script id="templateGameRanks" type="text/x-jquery-tmpl"><li><p></p></li><li><p style="font-weight:bold;" class="main-color">{{html _("help_ranks")}}</p></li><li>{{each ranks}} <div class="rank-show"><p><span style="color:#${$value[3]};"><i class="icon-rank-item rank-item${$value[4]}" style=" float:left;"></i>${$value[0]}</span><span class="main-color">{{if $value[1]!==0}}&nbsp;(${_("rshow1")}{{if $value[1]<0}}${_("rshow1m")}{{/if}}${addCommas($value[1])} ${nouns("points", $value[1])}${_("rshow2")}) {{else}} (${_("all_members")}){{/if}}</span></p>{{if $value[6] != "" || (($value[6] == "") && ($value[2] || $value[5])) }}<p class="free-effect-desc system-color">${_("rshow3")}{{if $value[2]}} ${_("rshow4")}{{if $value[5] }},{{else}}${_("rshow8")}{{/if}}{{/if}} {{if $value[5]}} ${_("rshow7")}{{/if}}{{if $value[5] && ($value[6] != "")}} ${_("rshow8")} {{/if}}{{if $value[6] != ""}}${_("rshow5")} ${getFreeEffectName($value[6])}{{/if}}${_("rshow6")}</p>{{/if}}</div>{{/each}} <div class="rank-show"><p class="system-color">${_("rank_note")}</p></li><\/script><script id="showProfile" type="text/x-jquery-tmpl"><ul id="{{if own}}currentuserpage{{else}}userpage{{/if}}" style="position:relative;"><li class="comment user-info-display">{{tmpl "#goBackTemplate"}}<div class="user-photo user-photo-myprofile"><div><div class="border-m"><img class="public-profile-${code} active-user-photo" alt="User Photo" src="${avatar_url}"></div>{{if own}}<div class="active-user-photo-button profile-button-file"><span class="btn-file upload-user-image-btn link-color profile-btn">${_("user_profile_link_change_avatar")}<input type="file" name="avatar" id="avatar" data-sequential-uploads="true" accept="jpg|gif|png" ></span></div>{{/if}}</div>{{if false && own && String(typeof(effects)) !="undefined" && String(typeof(effects.avatar)) != "undefined" }}<p><i class="icon-pencil">i</i><i class="by" style="margin:0 3px;">${_("changed_by")}</i><a class="userinfo_${effects.avatar.author.code}">${effects.avatar.author.name}</a></p>{{/if}}</div><div class="discussion-box-user"><div class="user-info user-info-myprofile"><div class="wrap-popover-list">{{if own}}<div class="editableonclick"><span class="editabletext link-color" data-field-name="name" data-field-len="30">${name}</span></div>{{else}}<a id="v_profile_user_name" class="public-profile-${code} pull-left link-color">${name}</a>{{/if}}<div id="e_profile_user_name" style="display:none;">${name}</div>{{if String(typeof(rank)) !="undefined"}}<p class="rank-myprofile" style="display:inline; color:#${rank.color}">{{if rank.icon}}<i class="icon-rank-item rank-item${rank.icon}"></i>{{else}}&nbsp;{{/if}}${rank.name}{{if rank.points_to_next }}&emsp;&emsp;<span class="system-color points-to-next"> <b>${addCommas(rank.points_to_next)}</b>&nbsp;${nouns("points", rank.points_to_next)} ${_("message_point_to_next")}</span>{{/if}}</p>{{/if}}{{if own && String(typeof(effects)) !="undefined" && String(typeof(effects.block)) != "undefined" }}<div class="popover-list-inner last main-color"> ${_("message_prevented_posting")} <a class="userinfo_${effects.block.author.code}">${effects.block.author.name}</a> ${Number((effects.block.time_to_end/60).toFixed())} ${nouns("minutes", (effects.block.time_to_end/60).toFixed())} ${nouns("left_minutes", Number((effects.block.time_to_end/60).toFixed()))}&nbsp;</div>{{/if}}</div>{{if typeof is_removed == "undefined" || String(is_removed) != "1"}}{{if own}}<div class="editableonclick add-location {{if location==""}}notext{{/if}}"><p class="editabletext system-color" data-field-name="location" >{{if location==""}}<a class="link-color">${_("ph_location")}</a>{{/if}}${location}</p></div>{{else}}{{if typeof location=="string" && location != ""}}<p class="system-color" style="padding-left: 10px;"> ${location}</p>{{/if}}{{/if}}<p class="member-since member-since-new system-color"> ${_("user_member_since")} ${signup_date}</p>{{if own}}<div class="editableonclick add-location {{if about==""}}notext{{/if}}" ><p class="editabletext system-color" data-field-name="about" data-field-len="2000">{{if about==""}}<a class="link-color">${_("ph_about")}</a>{{/if}}${about}</p></div>{{else}}<p style="padding-left: 10px;"><span id="#current_user_about" class="system-color">${about}</span></p>{{/if}}{{if false}}<ul><li><a class="icon-facebook" hidefocus="true" style="outline: medium none;"></a><a class="icon-twitter" hidefocus="true" style="outline: medium none;"></a><a class="icon-vk" hidefocus="true" style="outline: medium none;"></a><a class="icon-google" hidefocus="true" style="outline: medium none;"></a></li></ul>{{/if}}<div class="wrap-popover-list bottom-myprofile">{{if !own}}<div class="system-color"><b class="{{if stats.points >= 0}}like-color{{else}}dislike-color{{/if}}">${addCommas(stats.points)}</b> ${nouns("points", stats.points)}</div>{{if (stats.total_messages > 0) || (stats.total_approved > 0) || (stats.total_votes_up > 0) || (stats.total_votes_down > 0) || (stats.total_likes > 0) || (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_messages > 0}}<div class="system-color"><b class="like-color">${addCommas(stats.total_messages)}</b> ${nouns("posts", stats.total_messages)}</div>{{if (stats.total_approved > 0) || (stats.total_votes_up > 0) || (stats.total_votes_down > 0) || (stats.total_likes > 0) || (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_approved > 0}}<div class="system-color"><b class="like-color">${_n(Number(stats.total_approved/stats.total_messages * 100).toFixed())}%</b> ${_("user_approved")}</div>{{if (stats.total_votes_up > 0) || (stats.total_votes_down > 0) || (stats.total_likes > 0) || (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_votes_up > 0}}<div class="system-color"><b class="like-color">${addCommas(stats.total_votes_up)}</b> ${nouns("votes_up", stats.total_votes_up)}</div>{{if (stats.total_votes_down > 0) || (stats.total_likes > 0) || (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_votes_down > 0}}<div class="system-color"><b class="dislike-color">${addCommas(stats.total_votes_down)}</b> ${nouns("votes_down", stats.total_votes_down)}</div>{{if (stats.total_likes > 0) || (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_likes > 0}}<div class="system-color"><b class="like-color">${addCommas(stats.total_likes)}</b> ${nouns("likes", stats.total_likes)}</div>{{if (stats.total_dislikes > 0) || (stats.total_spam > 0)}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_dislikes > 0}}<div class="system-color"><b class="dislike-color">${addCommas(stats.total_dislikes)}</b> ${nouns("dislikes", stats.total_dislikes)}</div>{{if stats.total_spam > 0}}<div class="profile-separator system-color">|</div>{{/if}}{{/if}}{{if stats.total_spam > 0}}<div class="last system-color"><b class="dislike-color">${addCommas(stats.total_spam)}</b> ${nouns("spams", stats.total_spam)}</div>{{/if}}</div>{{if own}}<div class="main-color pull-left system-color m-right15 m-bottom10"> ${_("user_profile_you_have")} <b class="pointsval {{if stats.points >= 0}}like-color{{else}}dislike-color{{/if}}">${addCommas(stats.points)}</b> ${nouns("points", stats.points)} </div><div class="pull-left wrapprofilepoints">{{if can_buy_points}}<div class="popover-list-inner main-color"><a class="buy_points link-color">${_("user_buy_more")}</a></div>{{/if}}<div class="popover-list-inner main-color"><a class="user-mypublicprofile link-color">${_("user_public_profile_link")}</a></div><div class="popover-list-inner main-color"><a class="user-myprofile link-color">${_("user_change_settings_link")}</a></div><div class="popover-list-inner main-color"><a class="user-changepass last link-color">${_("change_password_lnk")}</a></div></div></div>{{/if}}<div class="clear"></div><div class="comm-on-site"><div class="comm-on-site-title"><span class="main-color url-title">{{if own}} ${_("your_comments")} <b>${current_site.url}</b>{{else}}<b>${name}</b> ${_("not_your_comments")} <b>${current_site.url}</b>{{/if}}</span></div><ul id="my_comments_on_site"></ul><div class="show_on_site"><input type="button" data-next="${next}" style="outline: medium none;" class="btn secondary-button" value="${_("button_show_more")}" hidefocus="true" id="show_more_on_site"></div></div>{{else}}<p class="system-color" style="padding-left: 10px;">${_("profile_was_removed")}</p>{{if show_restore}}<a href="${base_url}profile" target="_blank" class="link-color">${_("restore_my_profile")}</a>{{/if}}{{/if}}</div></div><div class="clear"></div></li><li><div class="loading-ava-container"></div></li><li class="comment upload-user-avatar" style="padding-top:10px; display:none;"><div class="user-photo user-photo-myprofile"><div><div id="prew_small_avatar" style="margin-top:5px;"></div></div></div><div style="margin-bottom: 7px;" class="discussion-box-user"><div class="user-info user-info-myprofile ava_upload_butset" style="padding-top:56px;padding-bottom:0;"><span class="btn btn-file secondary-button">${_("message_avatar_choose_another_img")}<input type="file" name="avatar" id="avatar2" ></span><input class="btn primary-button save-new-author-avatar" type="button" style="outline: medium none;" hidefocus="true" value="${_("effect_apply_button")}"><input class="btn secondary-button cancel-new-author-avatar" type="button" style="outline: medium none;" hidefocus="true" value="${_("cancel_button")}"></div></div><div class="clear"></div><div id="avatar_prew" class="pull-left" style="padding:10px 15px 15px 15px;"></div></li></ul><\/script><script id="templateMyCommentsOnSite" type="text/x-jquery-tmpl">{{each mess}}<li><div class="comm-on-site-top"><span class="mod-desc main-color"><span class="comment-text">{{html filterTextForView(body)}}</span><span class="system-color time-date">${creation_date}</span></span><a href="${url}" target="_blank" class="link-color">${_("go_to_discussion")}</a></div><div class="comm-on-site-bot"><span class="like-block system-color"><b>${replies_count}</b> ${nouns("replies", replies_count)}</span><div class="profile-separator system-color">|</div><span class="like-block system-color"><b class="like-color">${votes_up}</b> ${nouns("votes_up", votes_up)}</span><div class="profile-separator system-color">|</div><span class="like-block system-color"><b class="dislike-color">${votes_down}</b> ${nouns("votes_down", votes_down)}</span><div class="profile-separator system-color">|</div><span class="like-block system-color"><b class="like-color">${likes}</b> ${nouns("likes", likes)}</span><div class="profile-separator system-color">|</div><span class="system-color"><b class="dislike-color">${dislikes}</b> ${nouns("dislikes", dislikes)}</span></div></li>{{/each}}<\/script><script id="templateLoading" type="text/x-jquery-tmpl"><div class="csslogo"><img class="static" src="${image_so_animation}"><img class="animated" src="${image_so_animation2}"> </div><\/script><script id="templatePreloader" type="text/x-jquery-tmpl"><span class="more-animation" style="height: 30px;">{{tmpl "#templateLoading"}}</span><\/script><script id="templateUserInfoPoints" type="text/x-jquery-tmpl"><li class="comment" id="site_${name}"><div class="clear"></div><div class="postbox-comments-desc border-level postbox-comments-com"><a href="${base_url}site/${name}" target="_blank" class="avatar avatar-comment">${addCommas(points)}<br>${_("cpoints")}</a><div class="comment-content wrap-comments-content"><div class="comments-content-header"><a href="${base_url}site/${name}" target="_blank" class="link-title-desc" hidefocus="true" style="outline: none;">${url}</a><span style="display:none;"><div class="post-text">${_("in_rep_to")}</div><a class="link-title-comments2" hidefocus="true" style="outline: none;"></a><div class="post-text short_text"><i class="icon-quotes">f</i><a class="more" style="display: none; outline: none;" hidefocus="true">${_("more")}</a></div></span></div><div class="clear"></div><div class="wrap-popover-list-desc"><div class="popover-list-desc last">${total_user_messages} ${_("posts")}</div></div><div class="clear"></div><ul class="bottom-nav-comments minutes-ago-desc"><li class="last"><span> ${_(last_commenton)} ${last_message_date}</span></li></ul></div><div class="clear"></div><div class="child-container" style="position:relative;"></div></div></li><\/script><script id="templateUser" type="text/x-jquery-tmpl"><ul id="userpage" style="position:relative;"><li class="comment">{{tmpl "#goBackTemplate"}}<div class="discussion-box-user"></div><div class="clear"></div></li>{{tmpl "#goBackTemplate"}}</ul><\/script><script id="signupInfoPopoverTemplate" type="text/x-jquery-tmpl"><div class="popover popover-comments right"><span>Some text goes here!!</span></div><\/script><script id="userInfoPopoverTemplate" type="text/x-jquery-tmpl"><div class="popover popover-comments right" style="position:fixed; left:${left}px;top:${top}px; display:block; z-index:9999999;"><div class="arrow"></div><div class="comments-popover-inner"><div class="ava-popover"><div class="border-p"><img style="cursor:auto;" src="${avatar_m}" alt="Avatar"></div></div><div class="popover-content main-color">{{if usr.is_removed != "1"}}<p class="popap_user_location">${usr.location}</p><p><span class="system-color">${_("user_member_since")} ${usr.signup_date}</span></p>{{else}}<p><span class="system-color">${_("profile_was_removed")}</span></p>{{/if}}{{if usr.is_removed != "1"}}<div class="wrap-popover-list"><div class="popover-list-inner main-color"><span class="{{if usr.stats.points >= 0}}like-color{{else}}dislike-color{{/if}}"><b class="pointsval">${addCommas(usr.stats.points)}</b></span> ${nouns("points", usr.stats.points)}</div>{{if usr.stats.total_messages > 0}}<div class="popover-list-inner main-color"><span class="like-color"><b>${addCommas(usr.stats.total_messages)}</b></span> ${nouns("posts", usr.stats.total_messages)}</div>{{/if}}{{if usr.stats.total_approved > 0}}<div class="popover-list-inner main-color"><span class="like-color"><b>{{if usr.stats.total_approved }}${Number(usr.stats.total_approved / usr.stats.total_messages * 100).toFixed()}{{else}}0{{/if}}</b>%</span> ${_("user_approved")}</div>{{/if}}{{if usr.stats.total_votes_up > 0}}<div class="popover-list-inner main-color"><span class="like-color"><b>${addCommas(usr.stats.total_votes_up)}</b></span> ${nouns("votes", usr.stats.total_votes_up)}</div>{{/if}}{{if usr.stats.total_likes > 0}}<div class="popover-list-inner last main-color"><span class="like-color"><b>${addCommas(usr.stats.total_likes)}</b></span> ${nouns("likes", usr.stats.total_likes)}</div>{{/if}}</div>{{/if}}<div class="wrap-popover-list"><div class="popover-list-inner last main-color"><a></a></div></div></div><div class="clear"></div></div></div><\/script><script id="smilesCommentTemplate" type="text/x-jquery-tmpl">{{if String(isEmptyObj(emotion_parced)) == "false"}}<div class="smiles-conteiner"><ul class="add-smiles-user" style="display:block">{{each emotion_parced}}<li class="suid_${$index}"><div class="smiles-icons {{if has_large}}has_large{{/if}}">{{each emotions}}<div class="${$value}"></div>{{/each}}<p class="post-text">${_("user_by")} {{tmpl(author) "#nameTemplate" }}</p></div></li>{{/each}}</ul></div>{{/if}}<\/script><script id="vimageCommentTemplate" type="text/x-jquery-tmpl">{{each vimaage_parced}}<li><div class="video-icons" style="position:relative;" data-vimage-type="${type}" data-image-url="${img_src}" data-vid="${vid}" data-vkey="${vkey}" data-author_name="${author.name}" data-author_code="${author.code}" data-author_points="${author.stats.points}" data-author_rank_name="{{if author.rank}}, ${author.rank.name}{{/if}}" data-date_added="${date_added}" >{{if type == "video"}}<img class="play_icon" style="position:absolute;" src="${play_icon}"/>{{/if}}<img src="${imgs_src}"></div>{{if false}}<div class="post-text">${_("user_by")}</div>{{tmpl(author) "#nameTemplate" }}{{/if}}</li>{{/each}}<\/script><script id="nameTemplate" type="text/x-jquery-tmpl"><a class="userinfo_${code}" hidefocus="true" style="outline: none;" data-placement="top" data-toggle="tooltip" data-original-title="{{if stats}}${addCommas(stats.points)} ${nouns("points", stats.points)}{{/if}}{{if rank}}, ${rank.name}{{/if}}">${name}</a><\/script><script id="modalVimagePrewTemplate" type="text/x-jquery-tmpl"><div class="modal fade-in modal-prew" style="top:${top}px"><button type="button" class="close" onclick="$(".modal-prew").remove();" data-dismiss="modal" aria-hidden="true">&times;</button>{{html html_data}}</div><\/script><script id="commentTemplate" type="text/x-jquery-tmpl">{{if level == 1}}<li class="comment {{if show_rating}}rating-widget{{/if}}">{{/if}}<div class="clear"></div><div class="child-border"><div id="message_box_${code}" class="wrap-error-new"></div><div class="postbox-comments padd-top-box" id="comm_${code}" level="${level}"><input type="hidden" value="${code}" class="message_code"><input type="hidden" value="${parent_code}" class="parent_message_code"><div class="comment-avatar avatar"><div class="border-s"><img src="${avatar_small}" class="userinfo_${author.code} user_avatar" alt="Avatar" /></div>{{if author.effects && author.effects.avatar}}<i class="icon-pencil" data-title="${_("changed_by")} ${author.effects.avatar.author.name}, ${Number((author.effects.avatar.time_to_end/60).toFixed())} ${nouns("minutes", Number((author.effects.avatar.time_to_end/60).toFixed()))} ${nouns("left_minutes", Number((author.effects.avatar.time_to_end/60).toFixed()))} ">i</i>{{/if}}</div><i class="icon-hiding-comment comment-plus system-color">+</i><i class="icon-hiding-comment comment-minus system-color">‒</i>{{if is_pinned}}<i class="icon-pined icon-pined-comment system-color"></i>{{/if}}{{if voted_up}}<i data-title="${_("popup_voted_up")}" class="icon-voted-up icon-clone-comment system-color" data-positionx="left" data-positiony="middle-bottom" ></i>{{/if}}{{if voted_down}}<i data-title="${_("popup_voted_down")}" class="icon-voted-down icon-clone-comment system-color" data-positionx="left" data-positiony="middle-bottom" ></i>{{/if}}<div class="comment-content wrap-comments-content {{if body.is_spam}}spam_comment{{/if}}"><div class="comments-content-header"><div class="comment-left-box">{{if author.effects && author.effects.name}}<a class="userinfo_${author.code} link-title-comments">${author.effects.name.value}</a><span class="pencil-box pull-left" ><i class="icon-pencil" data-title="${_("changed_by")} ${author.effects.name.author.name}, ${Number((author.effects.name.time_to_end/60).toFixed())} ${nouns("minutes", Number((author.effects.name.time_to_end/60).toFixed()))} ${nouns("left_minutes", Number((author.effects.name.time_to_end/60).toFixed()))} ">i</i></span>{{if String(typeof(author.rank)) !="undefined"}}<span class="pull-left" style="color:#${author.rank.color};">{{if author.rank.icon}}<i class="icon-rank-item rank-item${author.rank.icon}"></i>{{else}}&nbsp;{{/if}} ${author.rank.name} </span>{{/if}}{{else}}<a class="userinfo_${author.code} link-title-comments">${author.name}</a>{{if String(typeof(author.rank)) !="undefined"}}<span class="pull-left" style="color:#${author.rank.color};">{{if author.rank.icon}}<i class="icon-rank-item rank-item${author.rank.icon}"></i>{{else}}&nbsp;{{/if}}${author.rank.name} </span>{{/if}}{{/if}}{{if parent_code != ""}}<span><div class="post-text">${_("in_reply_to")}</div>{{tmpl(parent.author) "#nameTemplate" }}{{if !full_reply}}<div class="post-text short_text"><i class="icon-quotes">f</i>${short_parent_message_body}{{if parent_hidden}}...{{/if}}<a class="more" style="display: ${display_more}; margin-left: 4px;">${_("link_show_more")}</a></div>{{/if}}</span>{{/if}}</div><span class="comment-dot-deleter middle-dot"></span><span class="system-color time-date"><a href="${String(getMessageGlobalUrl(code))}" onclick="return false;" class="system-color message-url">${creation_date}</a></span>{{if show_rating}}<div class="comment-right-box"><span class="post-rating rating-display inline-block pull-right rank-menu rating${author.rating}" data-authorcode="${author.code}"><span>z</span><span>z</span><span>z</span><span>z</span><span>z</span></span></div>{{/if}}</div>{{if parent_code != ""}}<div class="clear"></div><div class="post-text-full {{if full_reply}}re-full{{/if}}" style="display:{{if full_reply}}block; padding-left:10px;{{else}}none;{{/if}}"><span class="main-color">{{html parent_message_body}}</span> <div class="clear"></div>{{if !full_reply}}<a class="less">${_("link_show_less")}</a>{{/if}}</div>{{/if}}<div class="clear clear-reply-margin" style="margin-bottom:{{if parent_code != "" && full_reply}}17{{else}}11{{/if}}px;"></div>{{if body.is_spam}}<span class="system-color" id="${code}">${_("spam_message_body")}</span>{{else}}<span class="mod-desc main-color" id="${code}">{{if String(typeof(hidden)) !="undefined"}}<span class="main-color">{{html body.text}}.. <a class="open_comment_for_me link-color">${_("open_for")} ${Math.abs(points_to_open)} ${nouns("fo_points",points_to_open)}</a> <span class="open_accept" style="display:none;font-weight: bold;">${_("are_u_shure")}&nbsp;&nbsp;<a class="yes_open_comment_for_me link-color">${_("Yes")}</a>&nbsp;&nbsp;<a class="not_open_comment_for_me link-color" style="font-weight: normal;">${_("No")}</a></span></span>{{else}}<span class="comment-text">{{if body.remarked_text }}{{html body.remarked_text}}{{else}}{{html body.text}}{{/if}}</span>{{/if}}</span>{{/if}}{{tmpl "#smilesCommentTemplate"}}<div class="clear" style="margin-bottom:10px;"></div><div class="vimage-prew-container"></div><div class="clear"></div><div class="vimage-conteiner"><ul class="add-vimage-user" style="display:block">{{tmpl "#vimageCommentTemplate"}}</ul></div><div class="clear"></div><ul class="bottom-nav-comments">{{if is_reply_turned_off == 0}}{{if status != 0}}<li><a alt="${_("reply_link")}" title="${_("reply_link")}" class="reply system-color">${_("reply_link")}</a></li>{{/if}}{{else}}{{if ownership=="own"}}<li class="system-color">${_("effect_turned_off_reply")}</li>{{/if}}{{/if}}{{if status == 0}}<li><span class="dislike-color on-moderation">${_("tip_waiting_moder")}</span></li>{{if ownership=="own" && !has_child}}<li><a class="message_text_edit link-color">${_("effect_message_text_edit_text")}</a></li><li><a class="message_remove link-color">${_("effect_message_remove_text")}</a></li>{{/if}}{{html admin_action_menu}}{{else}}{{if ownership != "own"}}<li class="like vtype1"><a alt="${_("vote_up_link")}" title="${_("vote_up_link")}" class="msg_vote_up"><span class="like-color">${stats.votes_up}</span> <i class="icon-arrow-like system-color">&#9650;</i></a></li><li class="dislike vtype1"><a alt="${_("vote_down_link")}" title="${_("vote_down_link")}" class="msg_vote_down"><span class="dislike-color">${stats.votes_down}</span> <i class="icon-arrow-dislike system-color">&#9660;</i></a></li><li class="like vtype2"><a alt="${_("like_link")}" title="${_("like_link")}" class="msg_like"><span class="like-color">${stats.likes}</span> <i class="icon-arrow-like2 system-color">l</i></a></li><li class="dislike vtype2"><a alt="${_("dislike_link")}" title="${_("dislike_link")}" class="msg_dislike"><span class="dislike-color">${stats.dislikes}</span> <i class="icon-arrow-dislike2 system-color">d</i></a></li>{{else}}<li class="vtype1 no-pointer"><a class="no-pointer"><span class="like-color">${stats.votes_up}</span> <i class="icon-not-in-focus system-color ">&#9650;</i></a></li><li class="vtype1 no-pointer"><a class="no-pointer"><span class="dislike-color">${stats.votes_down}</span> <i class="icon-not-in-focus system-color">&#9660;</i></a></li><li class="vtype2 no-pointer"><a class="no-pointer"><span class="like-color">${stats.likes}</span> <i class="icon-not-in-focus system-color">l</i></a></li><li class="vtype2 no-pointer" ><a class="no-pointer"><span class="dislike-color">${stats.dislikes}</span> <i class="icon-not-in-focus system-color">d</i></a></li>{{/if}}{{if action_menu.user.length > 0}}<li><a alt="${_("author_link")}" title="${_("author_link")}" class="authormenubut arrow-author system-color"><span>${_("effect_menu_link_author")}<b class="caret"></b></span></a></li>{{/if}}{{if action_menu.mess.length > 0}}<li><a alt="${_("effect_menu_link_comment")}" title="${_("effect_menu_link_comment")}" class="messagemenubut arrow-author system-color"><span>${_("effect_menu_link_comment")}<b class="caret"></b></span></a></li>{{/if}}{{if status == 3}}<li class="share-button ${sys_lang} share-button-${sys_lang}"><span class="share-button-wraper"><a alt="${_("share_link")}" title="${_("share_link")}" class="system-color arrow-author messagemenushare"><span>${_("share_link")}<b class="shareret caret90"></b></span></a><ul class="share-comment-menu"><li class="sm_face"><a class="soicon">F</a></li><li class="sm_twit"><a class="soicon">T</a></li><li class="sm_vkon"><a class="soicon">V</a></li><li class="sm_solid"><a class="soicon">s</a></li></ul></span></li>{{/if}}{{/if}}</ul><div class="share-link-container"></div><div class="action-menu-container">{{tmpl(action_menu) "#templateActionMenu"}}</div><div class="action-container main-color"></div></div><div class="clear"></div><div class="child-container" style="position:relative;"></div></div></div>{{if level == 1}}</li>{{/if}}<\/script><script id="replyCommentTemplate" type="text/x-jquery-tmpl"><div class="reply-container postbox-comments border-level" id="reply_${messagecode}" style="padding: 0; display:none;"><input type="hidden" value="${messagecode}" class="message_code"><form class="message-add-form"><div id="action_message"></div><div class="textarea-wrapper-v2 txt-wrapp" data-role="textarea"><div class="avatar {{if false }}border{{/if}}"><span class="user"><div class="border-s"><img src="${avatar_reply_src}" alt="Avatar"></div></span></div><div role="textbox" tabindex="0" contenteditable="true" aria-multiline="true" id="reply_for_${messagecode}" class="comment-div main-color input-border-color" onpaste="sfHandlePaste(this, event)"><span>${_("main_comment_field_reply")}</span></div></div><div class="go-reply-button"><div class="site-rating-container"><span id="reply_rating_${messagecode}" class="inline-block post-rating rating"><span>z</span><span>z</span><span>z</span><span>z</span><span>z</span></span></div><input class="btn primary-button select-btn" type="button" value="${_("select_btn")}" hidefocus="true" style="float: left; margin: 4px 10px -10px 0px; display:none;"><input type="button" value="${_("comment_button")}" hidefocus="true" style="display:${display_button};" class="btn reply_button button-comments primary-button comment-btn" /><input type="button" value="${_("cancel_button")}" hidefocus="true" style="display:${display_button};" class="btn button-comments secondary-button comment-btn comment-cancel" /><a href="${String(getExpertModeHelpUrl())}" target="_blank" class="expert-icon system-color" data-title="${_("expert_mode_on")}" style="display:none;">&#61459;</a>{{if !show_rating}}<div class="system-color comment_price_container" style="display:none;"><a class="non_free_comment button-color" style="display:none">${_("need_points_to_read")}</a><span class="non_free_comment2" style="display:none">${_("select_comment_part")}</span><span class="comment_price_input_container" style="display:none"><span class="non-free-dscription">${_("non_free_description")}</span><input type="text" style="margin-top: 3px;" class="comment_price just_digit span1 main-color" value="${defoult_comment_price}" maxlength="7"></span></div>{{/if}}<div class="wrap-comments-content reply_comment_signup" style="display: ${display_comment_box};"><div class="comment-content social-box-inner">{{tmpl "#socialBoxTemplate"}}</div></div></div></form></div><\/script><script id="noCommentTemplate" type="text/x-jquery-tmpl"><li class="comment no_comment" style="text-align:center;"><div class="no-comments">{{if error}} ${_("topic_is_undefined")}{{else}}{{html _("no_comments_in_thread")}}{{/if}}</div></li><\/script><!--ACTIONS--><script id="noThreadsTemplate" type="text/x-jquery-tmpl"><li class="comment no_comment" style="text-align:center;"><div class="no-comments">{{if error}}${_("forum_is_undefined")}{{else}}${_("no_threads_in_forum")}{{/if}}</div></li><\/script><!--ACTIONS--><script id="noForumsTemplate" type="text/x-jquery-tmpl"><li class="comment no_comment" style="text-align:center;"><div class="no-comments">${_("no_forums")}</div></li><\/script><!--ACTIONS--><script id="templateSimpleAction" type="text/x-jquery-tmpl"><div id="${name}" class="modalComments simple-action ${name}"><span id="points_price" style="display:none;">${points_price}</span><div class="modal-body"><div id="action_message"></div>{{if String(typeof(title)) !="undefined" && title!=""}}<p class="action-desk">{{html title}}</p>{{/if}}{{each inputs}}{{if String(typeof(label)) !="undefined" && label != ""}}<label class="control-label" {{if String(typeof(attr.id)) !="undefined"}} for="${attr.id}" {{/if}}>{{html label}}</label>{{/if}}<input {{each attr}}${$index}="${$value}" {{/each}}/>{{if String(typeof(end_text)) !="undefined" && end_text != ""}}<span{{if String(typeof(end_id)) !="undefined"}} id="${end_id}"{{/if}} data-text="${end_text}" class="ainput-end">${end_text}</span>{{/if}}{{/each}}</div><div class="modal-footer"><button class="save_${name} btn primary-button" data-dismiss="modal" aria-hidden="true"><span>{{if String(typeof(custom_apply_title)) !="undefined"}}${_(custom_apply_title)}{{else}}${_("effect_apply_button")}{{/if}}</span><span id="total_points"></span></button><button class="btn action_cancel_effect secondary-button">${_("cancel_button")}</button></div></div><\/script><script id="templateActionAddImage" type="text/x-jquery-tmpl"><div id="add_image" class="modalComments simple-action add_image"><span id="points_price" style="display:none;">${points_price}</span><div class="modal-body"><div id="action_message"></div><div class="insert-img-url"><input type="text" id="insert_image_url" placeholder="${_("insert_img_url")}"/><span class="sep-upload">${_("or")}</span><span class="btn btn-file upload-mess-image-btn primary-button">${_("effect_choose_image_button")}<input type="file" name="image" id="post_image" data-sequential-uploads="true" accept="jpg|gif|png"/ data-form-data="{"script": "true"}"/></span></div><div class="insert-img-url-bot"><input id="post_image_url" type="button" value="${_("effect_choose_image_atach")} {{if points_price > 0}}${_("effect_choose_image_upload_and_atach_for")} ${addCommas(points_price)} ${nouns("fo_points",points_price)}{{/if}}" class="btn primary-button" /><button class="btn action_cancel_effect secondary-button" style="margin-left:6px;">${_("cancel_button")}</button></div></div></div><\/script><script id="templateActionChangeAvatar" type="text/x-jquery-tmpl"><div class="modalComments simple-action" id="action_change_avatar"><span id="points_price" style="display:none;">${points_price}</span><div class="modal-body"><div id="action_message"></div><input type="hidden" id="x" name="x"><input type="hidden" id="y" name="y"><input type="hidden" id="s" name="s"><div class="upload-animation">{{tmpl "#templateLoading"}}</div><p class="action-desk upload-a-phase1">${_("effect_choose_image")}</p><span class="btn btn-file upload-a-phase1 primary-button"><span class="upload-mess-image-btn">${_("effect_choose_image_button")}</span><input type="file" name="avatar" id="fake_avatar" multiple data-sequential-uploads="true" data-form-data="{"script": "true"}"/></span><button style="margin-left:6px;" class="btn action_cancel_effect upload-a-phase1 secondary-button">${_("cancel_button")}</button><div class="upload-a-phase2"><div id="avatar_result"></div><div id="prew_small_avatar"></div><div class="buttom-control-container"><span class="change_avata_hours_span">${_("effect_change_author_avatar_text_p1")} <b>"${selected_message.author.name}"</b> ${_("effect_change_author_avatar_text_p2")} <input type="text" data-input-info="#ainput-end" id="avatar_hours" class="span1 calc_points main-color" value="1" maxlength="7"> <span id="ainput-end" data-text="hours" class="ainput-end">${_("hours")}</span><button class="save_avatar btn primary-button" data-dismiss="modal" aria-hidden="true">${_("effect_apply_button")} <span id="total_points"></span></button></div></div></div><\/script><script id="templateActionEmotion" type="text/x-jquery-tmpl"><div class="modalComments simple-action"><span id="points_price" style="display:none;">${points_price}</span><div class="modal-body"><div id="action_message"></div><div class="form-horizontal"><p class="action-desk">${_("effect_add_emotion_text1")}</p><div id="smile_add" class="text-message-edit smiles-icons">{{for(i=0;i<=icon_set_count;i++)}}<div class="smile${i + icon_set_multiplier}"></div>{{/for}}</div><p class="action-desk">${_("effect_add_emotion_text2")}</p><div id="smile_prew" class="text-message-edit smiles-icons has_large"></div></div></div><div class="modal-footer"><button class="save_emotion btn primary-button" data-dismiss="modal" aria-hidden="true"><span>${_("effect_apply_button")}</span> <span id="total_points"></span></button><button class="btn action_cancel_effect secondary-button">${_("cancel_button")}</button></div></div><\/script><script id="templateActionEditMessageComment" type="text/x-jquery-tmpl"><div class="modalComments simple-action"><span id="points_price" style="display:none; ">${points_price}</span><div class="modal-body" style="overflow: visible;"><div id="action_message"></div>{{if formating}}<div class="edit_comment_alert_message">${_("edit_comment_alert_message")}</div>{{/if}}<p class="action-desk">${_("effect_message_text_edit_tooltip")}</p><div class="form-horizontal txt-wrapp"><div contenteditable="true" aria-multiline="true" class="comment-div main-color input-border-color" onpaste="sfHandlePaste(this, event)" id="text_edit_comment">{{html message_body}}</div></div></div><div class="modal-footer"><button class="save_edit_message_comment btn primary-button" data-dismiss="modal" aria-hidden="true"><span>${_("effect_apply_button")}</span> <span id="total_points"></span></button><button class="btn action_cancel_effect secondary-button">${_("cancel_button")}</button></div></div><\/script><script id="templateActionEditComment" type="text/x-jquery-tmpl"><div class="modalComments simple-action"><span id="points_price" style="display:none; ">${points_price}</span><div class="modal-body" style="overflow: visible;"><div id="action_message"></div><p class="action-desk">${_("effect_add_remark_text1")} </p><div class="form-horizontal"><div class="text-message border-level input-border" id="text_message">{{html message_body}}</div><div id="pop_alert" class="popover top popover-top-text input-border-color popap-color" contenteditable="false" style="display: none; width: 200px;">{{if false}}<div class="arrow"></div>{{/if}}<button class="close" type="button" hidefocus="true" style="outline: medium none;" onclick="hide_popapalert()">&times;</button><p id="pop_alert_text" style="margin:2px 0 10px"></p></div><div id="pop_text_input" class="popover fade top in popover-top-text input-border-color widget-background" contenteditable="false" style="display: none;">{{if false}}<div class="arrow"></div>{{/if}}<input type="text" id="text_input" class="main-color"><button class="save_text_input btn primary-button">${_("add_remark_button")}</button><button class="reset_text_input btn secondary-button">${_("cancel_button")}</button></div><div class="space2"></div><div class="control-group edit-comments-box"><label class="control-label control-label3" for="inputApply3">${_("effect_add_remark_text2")}</label><div class="controls controls-edit-comment"><input type="text" data-input-info="#time_edit_comment_hours_text" id="time_edit_comment" class="span1 calc_points main-color" value="1" maxlength="7"></div><span class="hours" data-text="hours" id="time_edit_comment_hours_text">${_("hours")}</span></div></div></div><div class="modal-footer"><button class="save_edit_comment btn primary-button" data-dismiss="modal" aria-hidden="true"><span>${_("effect_apply_button")}</span> <span id="total_points"></span></button><button class="btn action_cancel_effect secondary-button">${_("cancel_button")}</button></div></div><\/script><script id="templateActionEditCommentBui" type="text/x-jquery-tmpl"><div class="modalComments simple-action"><span id="points_price" style="display:none; ">${points_price}</span><div class="modal-body" style="overflow: visible;"><div id="action_message"></div><p class="action-desk"><button class="set_edit btn primary-button" data-type="bold"><span class="B">B</span></button><button class="set_edit btn primary-button" data-type="underline"><span class="U">U</span></button><button class="set_edit btn primary-button" data-type="italic"><span class="I">I</span></button></p><div class="form-horizontal"><div class="text-message input-border input-border" id="text_message_edit">{{html message_body}}</div><div id="edit_text_popap" class="popover top input-border-color" contenteditable="false" style="display: none; width: 200px;"><div class="arrow"></div><button class="close" type="button" hidefocus="true" style="outline: medium none;" onclick="hide_popapalert()">&times;</button><p id="pop_alert_text" style="margin:2px 0 10px"></p></div><div id="edit_text_popap_menu" class="popover fade in top widget-background popover-bottom-arrow" style="display: none;"><div class="arrow"></div><button class="set_edit btn primary-button" data-type="bold"><span class="B">B</span></button><button class="set_edit btn primary-button" data-type="underline"><span class="U">U</span></button><button class="set_edit btn primary-button" data-type="italic"><span class="I">I</span></button><button class="set_edit btn primary-button" data-type="clear">clear</button></div><div class="space2"></div></div></div><div class="modal-footer"><button class="save_add_format btn primary-button" data-dismiss="modal" aria-hidden="true"><span>${_("effect_apply_button")} </span><span id="total_points"></span></button><button class="btn action_cancel_effect secondary-button">${_("cancel_button")}</button></div></div><\/script><script id="formContainerTemplate" type="text/x-jquery-tmpl"><form id="form_container" class="message-add-form"><div class="comment-content" id="comments-content"><div class="postbox"><div class="avatar {{if false}}border{{/if}}"><span class="user"><div class="border-s"><img id="main_avatar" src="${default_avatar}" alt="${_("avatar")}"></div></span></div><div id="top_comment_textarea_wrapper" class="textarea-wrapper-v3 txt-wrapp" data-role="textarea"><div contenteditable="true" aria-multiline="true" id="comment_data" class="comment-div main-color input-border-color" onpaste="sfHandlePaste(this, event)"><span>${_("main_comment_field")}</span></div></div><div class="bottom-under-text-wrapper"><div class="site-rating-container"><div class="hide-rating" style="display: none;"><span id="post_rating" class="inline-block post-rating rating" style="display:none;"><span>z</span><span>z</span><span>z</span><span>z</span><span>z</span></span></div></div><div class="go-comment-button pull-left" style="display:none;"><input class="btn primary-button select-btn" type="button" value="${_("select_btn")}" hidefocus="true" style="float: left; margin: 4px 10px -10px 0px; display:none;"><input class="btn primary-button comment-btn" type="button" value="${_("comment_button")}" hidefocus="true" id="post_message" style="float: left; margin: 4px 10px -10px 0px; display:none;"><input class="btn secondary-button comment-btn comment-cancel" type="button" value="${_("cancel_button")}" hidefocus="true" style="display:none;"><a href="${String(getExpertModeHelpUrl())}" target="_blank" class="expert-icon system-color" data-title="${_("expert_mode_on")}" style="display:none;">&#61459;</a><div class="system-color comment_price_container" style="display:none;"><a class="non_free_comment button-color" style="display:none">${_("need_points_to_read")}</a><span class="non_free_comment2" style="display:none">${_("select_comment_part")}</span><span class="comment_price_input_container" style="display:none"><span class="non-free-dscription">${_("non_free_description")}</span><input type="text" style="margin-top: 3px;" class="comment_price just_digit span1 main-color" value="${defoult_comment_price}" maxlength="7"></span></div><div class="clear"></div><div id="signup_login_box"><input type="hidden" name="social" id="social"><input type="hidden" name="key1" id="key1"><input type="hidden" name="key2" id="key2">{{tmpl "#socialBoxTemplate"}}</div></div></div><a class="pull-right update-my-rating link-color" style="display:none;">${_("update_rating")}</a><div class="clear"></div></div></div></form><\/script><script id="formThreadsTemplate" type="text/x-jquery-tmpl"><div class="form-threads"><form id="form_threads"><div class="comment-content" id="comments-content">{{if status}}<div class="postbox"><div class="avatar {{if false}}border{{/if}}"><span class="user"><div class="border-s"><img id="main_avatar" src="${default_avatar}" alt="${_("avatar")}"></div></span></div><div id="top_comment_textarea_wrapper" class="textarea-wrapper-v3" data-role="textarea"><div contenteditable="true" aria-multiline="true" id="topic_data" onkeypress="return (this.innerHTML.length <= 512)" class="comment-div main-color input-border-color" onpaste="sfHandlePaste(this, event)"><span>${_("topic_title")}</span></div></div><div class="title-input-forum" style="display: none;"><input class="btn primary-button comment-btn" type="button" value="${_("create_topic_button")}" hidefocus="true" id="create_topic" style="float: left; margin: 4px 10px -10px 60px;"><input class="btn secondary-button comment-btn" type="button" value="${_("cancel_button")}" hidefocus="true" id="cancel_topic" style="float: left;margin-top:4px;"><div class="site-rating-container"><span class="system-color your_rating">${_("your_rating")}</span><span id="post_rating" class="inline-block post-rating rating"><span>z</span><span>z</span><span>z</span><span>z</span><span>z</span><span class="norating">.</span></span></div></div></div>{{/if}}<div class="clear"></div><div id="signup_login_box"><input type="hidden" name="social" id="social"><input type="hidden" name="key1" id="key1"><input type="hidden" name="key2" id="key2">{{tmpl "#socialBoxTemplate"}}</div><div class="clear"></div></div></form></div><\/script><script id="navTemplate" type="text/x-jquery-tmpl"><ul class="nav-pills comments-disc-nav main-color" id="comments-disc-nav"><li class="dropdown discussion-list act"><a class="discussion1" id="discussion">${_("tab_link_discussion")}</a></li><li class="middle-dot" {{if !show_community}} style="display:none"{{/if}}></li><li class="dropdown discussion-list " {{if !show_community}} style="display:none"{{/if}}><a class="discussion" id="commu_tab">${_("tab_link_community")}</a></li><li class="middle-dot myrewards" style="display:none;"></li><li class="dropdown discussion-list myrewards" style="display:none;"><a class="discussion" id="my_rewards_tab">${_("tab_link_rewards")}<span class="rewards_count"></span></a></li><li class="middle-dot myprofiledisplay" style="display:none;"></li><li class="dropdown discussion-list myprofiledisplay" style="display:none;"><a class="discussion" id="my_profile_tab">${_("tab_link_profile")}</a></li><li class="middle-dot myactivitydisplay" style="display:none;"></li><li class="dropdown discussion-list myactivitydisplay" style="display:none;"><a class="discussion" id="my_activity_tab">${_("tab_link_activity")} <span class="activity_count"></span></a></li>{{if help_tab_show}}<li class="middle-dot mygamerulesdisplay" style="display:none;"></li><li class="dropdown discussion-list mygamerulesdisplay" style="display:none;"><a class="discussion" id="my_gamerules_tab">${_("tab_link_help")}</a></li>{{/if}}<li class="middle-dot mythreadsdisplay" style="display:none;"></li><li class="dropdown discussion-list mythreadsdisplay" style="display:none;"><a class="discussion" id="my_threads_tab">${_("tab_link_threads")}</a></li></ul><\/script><script id="navForumTemplate" type="text/x-jquery-tmpl"><ul class="nav-pills comments-disc-nav" id="comments-disc-nav"><li class="dropdown discussion-list act"><a class="discussion1" id="my_threads_tab">${_("tab_link_forum")}</a></li><li class="middle-dot" {{if !show_community}} style="display:none"{{/if}}></li><li class="dropdown discussion-list " {{if !show_community}} style="display:none"{{/if}}><a class="discussion" id="commu_tab">${_("tab_link_community")}</a></li><li class="middle-dot myrewards" style="display:none;"></li><li class="dropdown discussion-list myrewards" style="display:none;"><a class="discussion" id="my_rewards_tab">${_("tab_link_rewards")}<span class="rewards_count"></span></a></li><li class="middle-dot myprofiledisplay" style="display:none;"></li><li class="dropdown discussion-list myprofiledisplay" style="display:none;"><a class="discussion" id="my_profile_tab">${_("tab_link_profile")}</a></li><li class="middle-dot myactivitydisplay" style="display:none;"></li><li class="dropdown discussion-list myactivitydisplay" style="display:none;"><a class="discussion" id="my_activity_tab">${_("tab_link_activity")}</a></li></li>{{if help_tab_show}}<li class="middle-dot mygamerulesdisplay" style="display:none;"></li><li class="dropdown discussion-list mygamerulesdisplay" style="display:none;"><a class="discussion" id="my_gamerules_tab">${_("tab_link_help")}</a></li>{{/if}}</ul><\/script><script id="threadTemplate" type="text/x-jquery-tmpl"><div id="all_threads">{{each data}}<li class="comment topicThem" thread_code="${thread_code}" thread_url="${thread_url}"><div class="position-forum"><div class="left-box-demo"><div class="topic-avatar avatar" thread_code="${thread_code}"><div class="border-s"><img src="${avatar_small}" class="userinfo_${author.code} user_avatar" alt="Avatar" /></div></div><div class="pull-left input-border-bottom" style="padding-right:0;"><div class="forum-description"><a class="topicinfo_" thread_code="${thread_code}" thread_url="${thread_url}" onclick="return false;">${thread_title}</a><div class="clear"></div><div class="comments-date {{if is_owner}}active-dropdown{{/if}}"><span><b>${addCommas(thread_total_comments)}</b> ${nouns("top_total_comment", thread_total_comments)}</span>{{if thread_total_comments > 0}}<span class="smaller">${last_comment_date}</span>{{/if}}</div><div class="bottom-border"></div></div>{{tmpl "#forumAdminActionTemplate"}}</div></div></div></li>{{/each}}</div><\/script><script id="forumsTemplate" type="text/x-jquery-tmpl"><div class="categories">{{each forums_list}}<div id="category" class="comments_demo">{{if $value.category == "main_category" || !$value.category}}<div class="forum-without-category">{{each forums}}<li class="comment topicThem" forum_code="${$value[0]}"><div class="position-forum"><div class="left-box-demo"><div class="pull-left"><b><a class="foruminfo_${$value[0]}" onclick="return false;" forum-id="id">${$value[1]}</a></b></div><span class="smaller description pull-left main-color" style="max-width:auto !important;">{{if $value[2] != ""}}${$value[2]}{{/if}}</span></div><div style="clear:both;"></div><div class="right-box-demo media-right-box wrap-active-dropdown"><ul class="forum-demo-table"><li><div class="pull-left {{if is_owner}}active-dropdown{{/if}}"><ul class="marker"><li><span><b>${addCommas($value[6])}</b> ${nouns("total_topic", $value[6])}</span></li>&emsp;<li><span><b>${addCommas($value[7])}</b> ${nouns("top_total_comment", $value[7])}</span></li></ul></div></li><li>{{tmpl "#forumAdminActionTemplate"}}</li></ul></div></div></li>{{/each}}</div>{{else}}<li class="comment cat-width"><span class="categorytitle_ main-color" categorytitle="${$value.category}" onclick="return false;"><b>${$value.category}</b></span></li><div class="forum-with-category" category="${$value.category}">{{each forums}}<li class="comment topicThem" forum_code="${$value[0]}"><div class="position-forum"><div class="left-box-demo"><div class="pull-left"><a class="foruminfo_${$value[0]}" onclick="return false;" forum-id="id">${$value[1]}</a></div><span class="smaller description pull-left main-color" style="max-width:auto !important;">{{if $value[2] != 0}}${$value[2]}{{/if}}</span></div><div class="right-box-demo wrap-active-dropdown"><ul class="forum-demo-table"><li class="first-cat"><div class="pull-left {{if is_owner}}active-dropdown{{/if}}"><ul class="marker"><li><span><b>${addCommas($value[6])}</b> ${nouns("total_topic", $value[6])}</span></li>&emsp;<li><span><b>${addCommas($value[7])}</b> ${nouns("top_total_comment", $value[7])}</span></li></ul></div></li><li>{{tmpl "#forumAdminActionTemplate"}}</li></ul></div></div></li>{{/each}}</div>{{/if}}</div>{{/each}}</div><\/script><script id="formForumsTemplate" type="text/x-jquery-tmpl"><div class="form-forums"><form id="form_forums"><div class="comment-content" id="comments-content">{{if user.status == "owner" || user.status == "admin"}}<div class="postbox"><div class="avatar {{if false}}border{{/if}}"><span class="user"><div class="border-s"><img id="main_avatar" src="${default_avatar}" alt="${_("avatar")}"></div></span></div><div class="textarea-wrapper-v3" data-role="textarea"><div class="comment-div comment-div-margin main-color input-border-color" id="forum_title" onkeypress="return (this.innerHTML.length <= 512)" contenteditable="true" onpaste="sfHandlePaste(this, event)" aria-multiline="true"><span>${_("forum_title")}</span></div></div><div class="title-input-forum" style="display: none;"><div id="top_comment_textarea_wrapper" class="textarea-wrapper-v4" data-role="textarea"><ul class="cat-box-wrap"><li><div contenteditable="true" aria-multiline="true" id="forum_description" class="comment-div main-color input-border-color" onpaste="sfHandlePaste(this, event)" ><span>${_("forum_description")}</span></div></li><li><div class="input-append select-cat"><input id="appendedDropdownButton" maxlength="50" placeholder="${_("forum_category")}" type="text" class="pholder main-color"><div class="btn-group"><button class="btn dropdown-toggle" data-toggle="dropdown" style="display: none;"><span class="caret"></span></button><ul class="dropdown-menu"></ul></div></div></li></ul></div><input class="btn primary-button comment-btn" type="button" value="${_("add_forum_button")}" hidefocus="true" id="create_forum" style="float: left; margin: 1px 10px -10px 60px;"><input class="btn secondary-button comment-btn" type="button" value="${_("cancel_button")}" hidefocus="true" id="cancel_forum" style="float: left; margin-top: 1px;"></div></div>{{/if}}<div class="clear"></div><div id="signup_login_box"><input type="hidden" name="social" id="social"><input type="hidden" name="key1" id="key1"><input type="hidden" name="key2" id="key2">{{tmpl "#socialBoxTemplate"}}</div><div class="clear"></div></div></form></div><\/script><script id="forumAdminActionTemplate" type="text/x-jquery-tmpl">{{if admin_action_menu}}<div class="pull-right admin-action" style="width:34px;height:20px;"><div class="admin-hide pull-right" style="{{if String(!is_mob()) === "true"}}display: none;{{/if}}"><ul class="nav nav-pills" style="margin-bottom: 0;"><li class="dropdown"><a class="dropdown-toggle system-color" data-toggle="dropdown" style="padding-right:0;"><i class="icon-dropdown-inner">0</i></a><ul class="dropdown-menu" style="margin-top: 0;">{{each admin_action_menu}}<li class="${class_name}"><a>${effect_name}</a></li>{{/each}}</ul></li></ul></div></div>{{/if}}<\/script><script id="headerTemplate" type="text/x-jquery-tmpl"><span class="site-rating rating-display pull-left" style="overflow: hidden;"><span>z</span><span>z</span><span>z</span><span>z</span><span>z</span></span><span class="rating-voters system-color pull-left"></span><ul class="nav nav-pills pull-right" id="comments-menu"><li class="dropdown"><a id="top_menu_list" class="dropdown-toggle" ><span id="display_name">${_("login")}</span><b class="caret"></b></a></li></ul><div class="clear"></div><\/script><script id="selectCategoryTemplate" type="text/x-jquery-tmpl">{{each catTmplData}}<li class="site-element"><a id="forum" class="category-item" category="${$value}" style="overflow: hidden;" onclick="return false;"><span class="pull-left">${$value}</span></a></li>{{/each}}<\/script><script id="newThreadTemplate" type="text/x-jquery-tmpl"><li class="comment topicThem" thread_code="${thread_code}" thread_url="${thread_url}"><div class="position-forum"><div class="left-box-demo" style="min-height:39px;"><div class="topic-avatar avatar" thread_code="${thread_code}"><div class="border-s"><img src="${avatar_small}" class="userinfo_${author.code} user_avatar" alt="Avatar" /></div></div><div class="pull-left border-level-bottom" style="padding-right:0;"><div class="forum-description"><a class="topicinfo_" thread_code="${thread_code}" thread_url="${thread_url}" onclick="return false;">${thread_title}</a><div class="clear"></div><div class="comments-date {{if is_owner}}active-dropdown{{/if}}"><span><b>0</b> ${nouns("top_total_comment", 0)}</span></div><div class="bottom-border"></div></div>{{tmpl "#forumAdminActionTemplate"}}</div></div></div></li><\/script><script id="newForumTemplate" type="text/x-jquery-tmpl">{{if new_category}}<div id="category" class="comments_demo">{{if with_category}}<li class="comment cat-width"><span class="categorytitle_${forum_category_title} main-color" onclick="return false;"><b>${forum_category_title}</b></span></li><div class="forum-with-category" category="${forum_category_title}">{{else}}<div class="forum-without-category">{{/if}}{{/if}}<li class="comment topicThem" forum_code="${forum_code}"><div class="position-forum"><div class="left-box-demo"><div class="pull-left"><b><a class="foruminfo_${forum_code}" onclick="return false;" forum-id="id">${forum_title}</a></b></div><span class="smaller description pull-left" style="max-width:auto !important;">{{if forum_description != 0}}${forum_description}{{/if}}</span></div><div class="right-box-demo media-right-box wrap-active-dropdown"><ul class="forum-demo-table"><li><div class="pull-left {{if is_owner}}active-dropdown{{/if}}"><ul class="marker"><li><span><b>${addCommas(0)}</b> ${nouns("total_topic", 0)}</span></li><li><span><b>${addCommas(0)}</b> ${nouns("top_total_comment", 0)}</span></li></div></li><li>{{tmpl "#forumAdminActionTemplate"}}</li></ul></div></div></li>{{if new_category}}</div></div>{{/if}}<\/script>';
if(typeof sys_lang=="undefined"){sys_lang="en";}var frontend_messages_data={"default":{"cancel_all_effects":["Отмена действия эффектов: Изменить имя, Изменить фото, Запретить комментировать, Формат, Ремарка","Cancels effects: Changed-name, Changed-avatar, Prevent author from posting, Format, Remark","Відміна дії ефектів: Змінити ім'я, Змінити фото, Заборонити коментувати, Формат, Ремарка"],"click_to_visit":["Перейти","Click to visit","Перейти"],"make_immune":["Иммунитет комментария от любых эффектов ","Make comment immune to all effects (price per comment)","Імунітет коментаря від будь-яких ефектів"],"make_immune_c":["Защита ценной информации.",'Creates a "power shield" around the comment, making it resistant to all effects.',"Захист цінної інформації."],"pin_to_top":["Отображать комментарий в начале обсуждения (цена в час)","Pin comment to the top of discussion (price per hour)","Відображати коментар на початку обговорення (ціна за годину)"],"pin_to_top_c":["Важное - вначале.","Makes the comment appear at the top of the comments section for as long as this effect is on.","Важливе - спочатку."],"cancel_all_effects_c":["","",""],"non_free_description":["Пользователи прочитают комментарий за монеты","User needs points to read this comment","Користувачi прочитають коментар за монети"],"message_signature_ttl":["К сожалению, этот комментарий не может быть опубликован, так как сработал фильтр спама.","Sorry this comment can't be published due to the spam policy.","На жаль, цей коментар не може бути опублікований, оскільки спрацював фільтр спаму."],"select_btn":["Выделить","Select","Виділити"],"select_comment_part":["Пожалуйста, выберите часть текста для предпоказа","Please choose comment part to be previewed","Будь ласка, оберiть часть коментаря для передпоказу"],"change_password_lnk":["Изменить пароль","Change your password","Змiнити пароль"],"cant_remove_comment":["Удаление невозможно, так как внесены изменения.","The comment was changed and can not be removed.","Коментар отримав змiни и не може бути видалений."],"cant_edit_comment":["Редактирование невозможно, так как внесены изменения.","The comment was changed and can not be edited.","Коментар отримав змiни и не може бути вiдредагований."],"effect_message_text_edit_tooltip":["Редактировать комментарий ","Edit comment","Редагувати коментар"],"effect_message_remove_tooltip":["Удалить комментарий","Remove comment","Видалити коментар"],"effect_message_text_edit_text":["Редактировать ","Edit","Редагувати"],"effect_message_remove_text":["Удалить","Remove","Видалити"],"rshow1":["репутация до ","","репутацiя до "],"rshow1m":["","up to ",""],"rshow2":["","",""],"rshow3":["Вы получаете","This rank gives you","Ви отримуєте"],"rshow4":["права модератора","moderation rights","права модератора"],"rshow5":["бонусный эффект -","an opportunity to","бонусний ефект -"],"rshow6":[".",".","."],"rshow7":["защиту от всех эффектов","protection from all effects","захист від усіх ефектів"],"rshow8":[" и "," and "," i "],"free":["бесплатно","free","безкоштовно"],"allow_html":["использование HTML в комментариях","use html","використання HTML в коментарях"],"all_members":["все участники","all members","всi учасники"],"payment_not_allowed":["К сожалению, для данной интеграции методы оплаты не предусмотрены. Если Вы владелец сайта, пожалуйста, включите методы оплаты.","Unfortunately all payment methods for current integration are switched off. Site owner can switch them on.","На жаль, для цієї інтеграції методи оплати не передбачені. Якщо Ви власник сайту, будь ласка, ввімкніть методи оплати."],"rank_note":["* При получении нового звания бонусы накапливаются.","* Please note that all bonus effects are accumulated for next ranks.","* При отриманнi нового звання бонуси накопичуються."],"rank_free_effect_title":["Бонусные эффекты званий","Rank free effects","Бонуснi ефекти звань"],"help_bonuses":["Бонусы","Bonuses","Бонуси"],"help_power_moves":["Сила влияния","Power Moves","Сила впливу"],"help_opp_for_expression":["Дар убеждения","Opportunities for Expression","Дар переконання"],"help_ranks":["Звания наделяют комментаторов специальными привилегиями в зависимости от баланса монет.","Ranks<br><span style='font-weight: normal;'>Ranks assign special privileges to certain commenters, according to their point balance.</span>","Звання наділяють коментаторів спеціальними привілеями залежно від балансу монет."],"add_emotion_to_coment":["Добавить эмоцию к комментарию (цена за эмоцию)","Add emotion to comment (price per emotion)","Додати емоцію до коментаря (цiна за емоцiю)"],"add_emotion_to_coment_c":["Помните, как забавно корчить рожи?","Go ahead and make faces. You won’t stay that way.","Пам'ятаєте, як потішно корчити пики?"],"like_comment":['"Много раз нравится" комментарий',"Multi like comment",'"Багато разів подобається" коментар'],"like_comment_c":["От всего сердца.","Like to your heart's content!","Від щирого серця."],"dislike_comemnt":['"Много раз не нравится" комментарий',"Multi dislike comment",'"Багато разів не подобається" коментар '],"dislike_comemnt_c":["Категорически не согласны.","Dislike as much as you want!","Категорично не згодні."],"vote_up_comment":["Много голосов ЗА комментарий","Multi vote up comment","Багато голосiв ЗА коментар"],"vote_up_comment_c":["Когда каждый голос важен.","For when voting up really matters.","Коли кожен голос важливий."],"vote_down_comment":["Много голосов ПРОТИВ комментария","Multi vote down comment","Багато голосiв ПРОТИ коментаря"],"vote_down_comment_c":["Сила голосов против.","For when voting down really matters.","Сила незгоди."],"add_comment":["Опубликовать комментарий","Add a comment","Опублiкувати коментар"],"add_comment_c":["Вы действительно так думаете.","Your solid opinion here.","Ви дійсно так думаєте."],"receive_reply":["Получить ответ","Receive a reply","Отримати вiдповiдь"],"receive_reply_c":["Вы сказали что-то значимое!","You said something un-ignorable. Good for you.","Ви сказали щось значиме!"],"spam_mark":["Комментарий получил отметку о спаме","Comment marked as inappropriate","Коментар отримав відмітку про спам"],"spam_mark_c":["Каждый немного модератор.","Be a tattle-tale: we all want a more civil environment.","Кожен трохи модератор. Для кожного."],"change_avatar":["Изменить фото автора (цена в час)","Change author's picture (price per hour)","Змінити фото автора (ціна за годину)"],"change_avatar_c":["Превратите оппонента в медузу. Не беспокойтесь, это временно!","Turn anyone into a blowfish or amoeba. Don’t worry, it’s temporary.","Перетворіть опонента на медузу. Не турбуйтеся, це тимчасово!"],"own_emotion":["к своему комментарию","to your comment","до свого коментаря"],"own_emotion_c":["Помните, как забавно корчить рожи?","Go ahead and make faces. You won’t stay that way.","Пам'ятаєте, як потішно корчити пики?"],"other_emotion":["к комментарию другого автора","to other's comment","до коментаря іншого автора"],"other_emotion_c":["Помните, как забавно корчить рожи?","Go ahead and make faces. You won’t stay that way.","Пам'ятаєте, як потішно корчити пики?"],"add_image":["Добавить картинку (цена за картинку)","Add image (price per image)","Додати картинку (ціна за картинку)"],"own_image":["к своему комментарию","to your comment","до свого коментаря"],"other_image":["к комментарию другого автора","to other's comment","до коментаря іншого автора"],"add_image_c":["Лучше один раз увидеть…","A picture’s worth a thousand words.","Краще один раз побачити."],"embed_video":["Добавить видео (цена за видео)","Embed video (price per video)","Додати відео (ціна за відео)"],"own_video":["к своему комментарию","in your comment","до свого коментаря"],"other_video":["к комментарию другого автора","in other's comment","до коментаря іншого автора"],"embed_video_c":["Стоит тысячи слов.","And sometimes you need the whole song-and-dance.","Замiсть тисячі слів."],"add_format":["Добавить форматирование","Add text formatting","Додати форматування"],"own_format":["к своему комментарию","to your comment","до свого коментаря"],"other_format":["к комментарию другого автора","to other's comment","до коментаря іншого автора"],"add_format_c":["Когда обычные слова недостаточно убедительны.","For those moments when plain text won’t do.","Коли звичайні слова недостатньо переконливі."],"prevent_from_posting":["Запретить автору комментировать (цена в час)","Prevent author from posting (price per hour)","Заборонити авторові коментувати (ціна за годину)"],"prevent_from_posting_c":["Возможность задуматься над сказанным.","Give them a bit of time to think of a good comeback.","Можливість замислитися над сказаним."],"ignore_user":["Игнорировать автора (навсегда)","Ignore author (permanently)","Ігнорувати автора (назавжди)"],"ignore_user_c":["И вы больше никогда его не услышите.","You can’t be expected to want to hear everybody’s opinion.","Ви більше ніколи його не почуєте."],"turn_off_replies":["Запретить ответы к собственному комментарию","Turn off replies on a comment","Заборонити відповіді до власного коментаря"],"turn_off_replies_c":["Иногда есть лучшее время для дискуссии.","Some discussions are better left for another time or place.","Іноді є кращий час для дискусії."],"comments_request":["Запросить комментарий (цена за пользователя)","Ask for comments (price per user)","Запросити коментар (ціна за користувача)"],"add_dispute":["Добавить спор (цена за спор)","Add dispute (price per dispute)","Додати суперечку (ціна за суперечку)"],"add_quiz":["Добавить конкурс (цена за конкурс)","Add quiz (price per quiz)","Додати конкурс (ціна за конкурс)"],"edit_comment":["Добавить ремарку (цена в час)","Add a remark (price per hour)","Додати ремарку (ціна за годину)"],"own_remark":["к своему комментарию","to your comment","до свого коментаря"],"other_remark":["к комментарию другого автора","to other's comment","до коментаря іншого автора"],"edit_comment_c":["Отредактировать чей-то комментарий? Запросто!","Now you can comment directly inside someone’s comment!","Відредагувати чийсь коментар? Запросто!"],"change_name":["Изменить имя автора (цена в час)","Change author’s name (price per hour)","Змінити ім'я автора (ціна за годину)"],"change_name_c":["Можете называть его Супер-Героем. Или Королевой Англии. Ненадолго.","Make anyone Seymour Butts or the Queen of England for a while.","Можете називати його Cупер-Героєм. Чи Королевою Англії. Ненадовго."],"reputation_bomb":["Монетная бомба (цена за 1 монету, на которую уменьшится репутация цели)","Reputation Bomb (price per 1 point taken from the author)","Монетна бомба (ціна за 1 монету, на яку зменшиться репутація мішені)"],"reputation_bomb_c":["Хотите изменить расстановку сил ?","Shake things up a bit: make them think twice!","Хочете змінити розстановку сил ?"],"like_higher":['"Много раз нравится" комментарий автора с более высокой репутацией',"Multi like comment from author with higher point balance",'"Багато разів подобається" коментар автора з більш високою репутацією'],"dislike_higher":['"Много раз не нравится" комментарий автора с более высокой репутацией',"Multi dislike comment from author with higher point balance",'"Багато разів не подобається" коментар автора з більш високою репутацією'],"vote_up_higher":["Много голосов ЗА комментарий автора с более высокой репутацией","Multi vote up comment from author with higher point balance","Багато голосiв ЗА коментар автора з більш високою репутацією"],"vote_down_higher":["Много голосов ПРОТИВ комментария автора с более высокой репутацией","Multi vote down comment from author with higher point balance","Багато голосiв ПРОТИ коментаря автора з більш високою репутацією"],"like_lower":['"Много раз нравится" комментарий автора с более низкой репутацией',"Multi like comment from author with lower point balance",'"Багато разів подобається" коментар автора з нижчою репутацією'],"dislike_lower":['"Много раз не нравится" комментарий автора с более низкой репутацией',"Multi dislike comment from author with lower point balance",'"Багато разів не подобається" коментар автора з нижчою репутацією'],"vote_up_lower":["Много голосов ЗА комментарий автора с более низкой репутацией","Multi vote up comment from author with lower point balance","Багато голосiв ЗА коментар автора з нижчою репутацією"],"vote_down_lower":["Много голосов ПРОТИВ комментария автора с более низкой репутацией","Multi vote down comment from author with lower point balance","Багато голосiв ПРОТИ коментаря автора з нижчою репутацією"],"profile_was_removed":["Профайл удален","Profile was removed","Профайл видалений"],"restore_my_profile":["Восстановить профайл","Restore my profile","Поновити мiй профайл"],"message_is_immune":["Этот комментарий защищен от применения любых эффектов","This comment is protected from any effects","Цей коментар захищений від застосування будь-яких ефектів"],"effect_make_immune":["Сделает невозможным применение для этого комментария любых эффектов","All effects will be unavailable for this comment","Зробить неможливим застосування до цього коментаря будь-яких ефектів"],"effect_pin_to_top":["Комментарий будет отображаться в обсуждении первым","Pins comment to the top of discussion","Коментар відображатиметься в обговоренні першим"],"effect_pin_to_top_tooltip":["Показывать в начале обсуждения","Pin comment to the top","Показувати на початку обговорення"],"effect_make_immune_tooltip":["Иммунитет комментария от эффектов","Make comment immune to all effects ","Імунітет коментаря від ефектів"],"effect_cancel_a_effects_tooltip":["Отмена действия эффектов: Изменить имя, Изменить фото, Запретить комментировать, Формат, Ремарка","Cancels effects: Changed-name, Changed-avatar, Prevent author from posting, Format, Remark","Відміна дії ефектів: Змінити ім'я, Змінити фото, Заборонити коментувати, Формат, Ремарка"],"cancel_a_effects":["Отменяет все эффекты, примененные к автору и комментариям","Сancels all effects applied to author and comments","Відміняє усі ефекти, застосовані до автора і коментарів"],"first_activity_bonus":["Бонус за первое посещение сайта","Bonus for first time visit","Бонус за перше відвідування сайту "],"first_activity_bonus_c":["Рады знакомству!","Welcome to SolidOpinion!","Раді знайомству!"],"read_thread":["Бонус за посещение сайта","Site visit bonus","Бонус за відвідування сайту"],"read_thread_c":["Заглядывайте почаще!","Nice to see you again.","Заходьте частіше!"],"spent_1_day":["Ежедневный бонус","Everyday bonus","Щоденний бонус"],"spent_1_day_c":["За использование SolidOpinion.","Thanks for using SolidOpinion.","За використання SolidOpinion."],"click_on_post_share":["Бонус пользователю, который опубликовал ссылку в социальной сети (за переход по ссылке)","Bonus for user who has shared a link in social network (per click)","Бонус коментатору, який опублікував посилання в соціальній мережі (за перехiд по посиланню)"],"click_on_post_share_c":["Делитесь лучшим!","Sharing is caring.","Діліться кращим з друзями!"],"like_received":['Получить "нравится"',"Receive like",'Отримати "подобається"'],"like_received_c":["Ура! Кто-то думает так же, как вы.","They like you, they really like you.","Ура! Хтось думає так само, як ви."],"dislike_received":['Получить "не нравится"',"Receive dislike",'Отримати "не подобається"'],"dislike_received_c":["Всем не угодишь.","Well. You can’t please everyone.","Усім не догодиш."],"vote_up_received":["Получить голос ЗА","Receive vote up","Отримати голос ЗА"],"vote_up_received_c":["Ваш комментарий увидят все.","Someone wants everyone to see your comment.","Ваш коментар побачать усі."],"vote_down_received":["Получить голос ПРОТИВ","Receive vote down","Отримати голос ПРОТИ"],"vote_down_received_c":["Кто-то хочет, чтобы ваш комментарий было непросто найти.","Someone wants to make it hard to find your comment.","Хтось хоче, щоб ваш коментар було непросто знайти."],"first_post":["За первый комментарий, опубликованный на сайте","First post on the thread bonus","За перший коментар, опублікований на сайті"],"first_post_c":["Кто на новенького?","Way to be the first to offer your opinion!","Хто на новенького?"],"pay_for_open":["Просмотреть скрытый комментарий","Pay for open comment","Прочитати прихований коментар"],"pay_for_open_c":["Некоторая информация стоит денег.","Some info is worth paying for.","Деяка інформація коштує грошей."],"points_for_dollar":["Монет за 1 СолидДоллар","Points available per SolidDollar","Монет за 1 СолiдДоллар"],"to_reputation_bomb":["бросить монетную бомбу","throw a reputation bomb","кинути монетну бомбу"],"to_add_emotion":["добавить эмоцию к комментарию","add emotion to comment","додати емоцію до коментаря"],"to_make_immune":["иммунитет комментария от эффектов","make comment immune to all effects","імунітет коментаря від ефектів"],"to_cancel_all_effects":["отмена всех эффектов","cancel all effects","відміна усіх ефектів"],"site_game_rules":["Правила сайта","Site rules","Правила сайту"],"400":["Sorry, an error has occurred. We're working on getting this fixed as soon as we can.","Sorry, an error has occurred. We're working on getting this fixed as soon as we can.","Sorry, an error has occurred. We're working on getting this fixed as soon as we can."],"401":["Unauthorized","Unauthorized","Unauthorized"],"404":["Sorry, an error has occurred. We're working on getting this fixed as soon as we can","Sorry, an error has occurred. We're working on getting this fixed as soon as we can","Sorry, an error has occurred. We're working on getting this fixed as soon as we can"],"405":["Method Not Allowed","Method Not Allowed","Method Not Allowed"],"406":["Method Not Allowed","Method Not Allowed","Method Not Allowed"],"500":["Sorry, an error has occurred. We're working on getting this fixed as soon as we can.","Sorry, an error has occurred. We're working on getting this fixed as soon as we can.","Sorry, an error has occurred. We're working on getting this fixed as soon as we can."],"top_total_comment":["комментарий|комментария|комментариев","comment|comments","коментар|коментарi|коментарiв"],"user_menu_change_settings":["Мои настройки","Change settings","Мої налаштування"],"title_buy_points":["Купить монеты","Buy poins","Купити монети"],"user_menu_buy_points":["Купить монеты","Buy points","Купити монети"],"h_get_points":["Купить монеты","Buy points","Купити монети"],"h_spend_points":["Использовать монеты","Spend points","Використати монети"],"user_menu_earn_points":["Заработать монеты","Earn points","Заробити монети"],"user_menu_logout":["Выйти","Log out","Вихiд"],"main_comment_field":["Оставить комментарий","Leave a comment","Залишити коментар"],"main_comment_field_reply":["Написать ответ","Leave a reply","Написати відповідь"],"reply":["ответ","reply","відповідь"],"comment_button":["Добавить","Add","Додати"],"tab_link_discussion":["Обсуждение","Discussion","Обговорення"],"tab_link_community":["Сообщество","Community","Учасники"],"tab_link_profile":["Мой профайл","Profile","Мiй профiль"],"tab_link_rewards":["Награды","Rewards","Нагороди"],"tab_link_activity":["Активность","Activity","Активнiсть"],"user_member_since":["Зарегистрирован","Member since","Зареєстрований"],"tab_link_forum":["Форум","Forum","Форум"],"fo_points":["монету|монеты|монет","point|points","монету|монети|монет"],"points":["монета|монеты|монет","point|points","монета|монети|монет"],"posts":["комментарий|комментария|комментариев","comment|comments","коментар|коментарі|коментарiв"],"votes":["голос|голоса|голосов","vote|votes","голос|голоса|голосiв"],"likes":["раз понравилось|раза понравилось|раз понравилось","like|likes","раз сподобалося|рази сподобалося|разів сподобалося"],"dislikes":["раз не понравилось|раза не понравилось|раз не понравилось","dislike|dislikes","раз не сподобалося|рази не сподобалося|разів не сподобалося"],"votes_up":["голос за|голоса за|голосов за","vote up|votes up","голос за|голоси за|голосiв за"],"votes_down":["голос против|голоса против|голосов против","vote down|votes down","голос проти|голоси проти|голосiв проти"],"spams":["спам|спама|спамов","spam|spams","спам|спама|спамiв"],"hours":["час|часа|часов","hour|hours","годину|години|годин"],"fo_hours":["час|часа|часов","hour|hours","години|годин|годин"],"times":["раз|раза|раз","time|times","раз|рази|разiв"],"minutes":["минута|минуты|минут","minute|minutes","хвилина|хвилини|хвилин"],"left_minutes":["осталась|осталось|осталось","left|left|left","залишилася|залишилося|залишилося"],"replies":["ответ|ответа|ответов","reply|replies","відповідь|відповіді|відповідей"],"user_approved":["одобрено","approved","пiдтверджено"],"reply_link":["Ответ","Reply","Відповісти"],"vote_up_link":["Голосовать ЗА","Vote up","Голосувати ЗА"],"vote_down_link":["Голосовать ПРОТИВ","Vote down","Голосувати ПРОТИ"],"vote":["Голосовать","Vote","Голосувати"],"your_rating":["Ваш рейтинг","Your rating","Ваш рейтинг"],"like_link":["Нравится","Like","Подобається"],"dislike_link":["Не нравится","Dislike","Не подобається"],"author_link":["Автор","Author","Автор"],"message_link":["Комментарий","Message","Коментар"],"share_link":["Поделиться","Share","Подiлитись"],"effect_menu_link_author":["Автор","Author","Автор"],"effect_menu_link_comment":["Комментарий","Comment","Коментар"],"comment":["комментарий","comment","коментар"],"moderator_menu_block":["Заблокировать автора","Block user","Заблокувати автора"],"moderator_menu_delete":["Удалить","Delete","Видалити"],"moderator_menu_spam":["Отметить как спам","Mark as spam","Вiдмiтити як спам"],"moderator_menu_approve":["Одобрить","Approve","Схвалити"],"user_by":["от","by","вiд"],"changed_by":["отредактировал","Changed by","відредагував"],"community_points_users_header":["Топ комментаторы","Top commenters by points","Топ коментатори"],"community_activity_users_header":["Популярные комментаторы","Popular commenters","Популярні коментатори"],"community_new_threads_header":["Новые темы","Latest threads","Новi теми"],"community_top_threads_header":["Популярные темы","Popular threads","Популярнi теми"],"community_recomen_threads_top_header":["Рекомендованные темы","Recommended threads","Рекомендовані теми"],"community_recomen_threads_new_header":["Новые темы","Latest threads","Нові теми"],"user_profile_link_change_avatar":["Изменить","Change","Змiнити"],"user_profile_you_have":["У вас ","You have","У вас "],"user_buy_more":["Купить","Buy more","Купити"],"user_public_profile_link":["Моя страница","Public profile","Моя сторiнка"],"user_change_settings_link":["Мои настройки","Change settings","Мої налаштування"],"no_comments_in_thread":["На данный момент в этом обсуждении нет ни одного комментария.<br> Вы можете оставить первый!","There are no comments on this thread.<br> You have an opportunity to be the first!","На даний момент у цій темі немає жодного коментаря.<br> Ви можете залишити перший!"],"comment_hidden_because_points":["Другие авторы увидят этот комментарий, когда ваш баланс монет станет положительным.","Sorry this comment will be visible for other commenters when your points balance becomes positive.","Інші автори побачать цей коментар, коли ваш баланс монет стане позитивним."],"thread_hidden_because_points":["Другие авторы увидят эту тему, когда ваш баланс монет станет положительным.","Sorry this thread won't be visible for other commenters. Looks like your points balance is negative.","Інші автори побачать цю тему, коли ваш баланс монет стане позитивним."],"button_show_more":["Показать еще","Show more","Показати ще"],"link_show_more":["больше &raquo;","more &raquo;","бiльше &raquo;"],"link_show_less":["&laquo; меньше","&laquo; less","&laquo; менше"],"in_reply_to":["в ответ на","in reply to","у вiдповiдь на"],"login_with_social":["Подключиться с","Connect with","Підключитися з"],"quick_signup_text":["или зарегистрируйтесь","or sign up","або зареєструйтесь"],"quick_signup_field_email":["Электронная почта","Email","Електронна адреса"],"quick_signup_field_name":["Имя","Name","Iм'я"],"or":["или","or","або"],"insert_img_url":["Insert image URL","Insert image URL","Insert image URL"],"quick_signup_agree":["Вы согласны с Правилами использования","You agree with Terms and Policies","Ви згоднi з Правилами користування"],"quick_signup_done":["Ваш временный пароль был отослан по электронной почте, не забудьте сменить его ","Your temporary password has been sent to your inbox. Please don’t forget to change it later. ","Ваш тимчасовий пароль був надiсланий електронною поштою, будь ласка змiнiть його"],"image_author_text":["Добавлено","Added by","Додано"],"spam_message_body":["Вы пометили это сообщение как спам","You marked this comment as inappropriate","Ви вiдмiтили цей коментар як спам"],"message_prevented_posting":["Запретил Вам добавлять коментарии - ","Prevent from posting by","Заборонив Вам додавати коментарі - "],"message_point_to_next":["до следующего звания","to next rank","до наступного звання"],"message_avatar_choose_another_img":["Выбрать другое изображение","Choose another image","Вибрати інше зображення"],"effect_change_author_name_tooltip":["Изменить имя автора","Change author's name","Змiнити iм'я автору"],"effect_change_author_avatar_tooltip":["Изменить фото автора","Change author's picture","Змiнити фото автору"],"effect_reputation_bomb_tooltip":["Бросить монетную бомбу","Throw a reputation bomb at the author","Кинути монетну бомбу"],"effect_prevent_from_posting_tooltip":["Запретить автору комментировать","Prevent author from posting","Заборонити автору коментувати"],"effect_multi_vote_up_tooltip":["Много голосов за","Multi vote up","Багато голосiв за"],"effect_multi_vote_down_tooltip":["Много голосов против","Multi vote down","Багато голосiв проти"],"effect_multi_like_tooltip":["Много раз нравится","Multi like","Багато разiв подобається"],"effect_multi_dislike_tooltip":["Много раз не нравится","Multi dislike","Багато разiв не подобається"],"effect_add_emotion_tooltip":["Добавить эмоцию","Add an emotion","Додати емоцiю"],"effect_add_remark_tooltip":["Вставить ремарку","Add a remark","Додати ремарку"],"effect_add_image_tooltip":["Добавить фото","Add an image","Додати фото"],"effect_add_video_tooltip":["Вставить видео","Embed video","Додати вiдео"],"effect_inappropriate_tooltip":["Сообщить о спаме","Flag as inappropriate","Повiдомити про спам"],"effect_turn_off_replies_tooltip":["Запретить ответы","Turn off replies","Заборонити вiдповiдi"],"effect_transfer_points_tooltip":["Передать монеты","Transfer points","Подарувати монети"],"effect_ignore_tooltip":["Игнорировать автора","Ignore author","Iгнорувати автора"],"effect_change_author_name_text_p1":["Изменить","Change ","Змiнити"],"effect_change_author_name_text_p2":["на","to","на"],"effect_change_author_name_text_p3":["на","for","на"],"effect_like_text":['"Нравится" комментарий',"Like this comment",'"Подобається" коментар'],"effect_dislike_text":['"Не нравится" комментарий',"Dislike this comment",'"Не подобається" коментар'],"effect_vote_up_text":["Голосовать ЗА","Vote up this comment","Голосувати ЗА"],"effect_vote_down_text":[" Голосовать ПРОТИВ","Vote down this comment","Голосувати ПРОТИ"],"effect_choose_image_button":["Выберите файл","Upload file","Оберiть файл"],"cancel_button":["Отмена","Cancel","Скасувати"],"ok_button":["Готово","Ok","Готово"],"add_remark_button":["Вставить ремарку","Add remark","Додати ремарку"],"effect_apply_button":["Применить ","Apply ","Застосувати "],"effect_change_author_avatar_text_p1":["Изменить фото","Change","Змiнити фото"],"effect_change_author_avatar_text_p2":["на","profile picture for","на"],"effect_choose_image":["Пожалуйста, выберите файл (поддерживаются GIF, JPG и PNG форматы)","Please select an image file (supported formats are GIF, JPG, and PNG)","Оберiть файл (пiдтримуються GIF, JPG та PNG формати)"],"effect_choose_image_atach":["Добавить","Attach","Додати"],"effect_choose_image_upload_and_atach":["Загрузить и добавить","Upload and attach","Завантажити і додати"],"effect_choose_image_upload_and_atach_for":["за","for","за"],"effect_multi_vote_up_text":["Голосовать ЗА","Vote up this comment for","Голосувати ЗА"],"effect_multi_vote_down_text":["Голосовать ПРОТИВ","Vote down this comment for","Голосувати ПРОТИ"],"effect_multi_like_text":["Нравится","Like this comment for","Подобається"],"effect_multi_dislike_text":["Не нравится","Dislike this comment for","Не подобається"],"effect_reputation_bomb_text_p1":["Бросить в","Throw the bomb to","Кинути у"],"effect_reputation_bomb_text_p2":["бомбу мощностью ","with","бомбу потужнiстю"],"effect_reputation_bomb_text_p3":["монета|монеты|монет","point power|points power","монета|монети|монет"],"effect_prevent_from_posting_text_p1":["Запретить","Prevent","Заборонити"],"effect_prevent_from_posting_text_p2":["комментировать на","from posting for","коментарi протягом"],"effect_add_emotion_text1":["Для добавления эмоции кликните на иконку внизу","To add an emotion click on the icon below","Щоб додати емоцiю, клацнiть знизу на її зображеннi"],"effect_add_emotion_text2":["Чтобы убрать эмоцию, кликните на ее иконку в поле предпросмотра","To remove an emotion click on the icon in the preview field","Щоб видалити емоцiю, клацнiть на її зображення в полі попереднього перегляду"],"effect_add_video_text":["Адрес страницы видео с Youtube/DailyMotion/Vimeo","Youtube/DailyMotion/Vimeo video URL","Адреса сторiнки вiдео з Youtube/DailyMotion/Vimeo"],"effect_inappropriate_text":["Сообщить о спаме","Report a spam","Повiдомити про спам"],"effect_add_remark_text1":["Чтобы добавить ремарку, выделите часть текста комментария либо кликните на место, где вы хотите оставить сообщение","Add a remark by highlighting part of the text in the comment. Or you can simply point your cursor to the place you want to edit and write your comment.","Щоб додати ремарку, оберiть частину тексту коментаря або клацнiть на мiсце, де ви бажаєте залишити повiдомлення"],"effect_add_remark_text2":["Применить эффект на","Apply an effect for","Застосувати ефект на"],"effect_add_remark_edited":["Ремарка:&nbsp;","Edited:&nbsp;","Ремарка:&nbsp;"],"effect_add_remark_changed_by":["от","by","від"],"effect_turn_off_reply":["Никто не cможет оставлять ответы на это сообщение.","Turn off replies for this comment","Ніхто не зможе залишати відповіді на цей коментар."],"effect_turned_off_reply":["Ответы запрещены.","Replies are turned off","Відповіді заборонені."],"effect_ignore_text_p1":["Больше никогда не показывать сообщения","Ignore","Бiльше нiколи не бачити коментарi"],"effect_ignore_text_p2":["","forever. You will not longer see his/her posts",""],"effect_transfer_points_text":["Передать","Transfer to","Подарувати"],"points_invalid":["Пожалуйста, проверьте количество монет","Please check the number of points to be transferred","Будь ласка, перевірте кількість монет"],"effect_transfer_points_text_apply":["Передать","Transfer","Подарувати"],"error_no_text_in_comment_field":["Вы забыли ввести текст","You forgot to enter text","Ви забули ввести текст"],"error_no_forum_title":["Пожалуйста, выберите название форума","Please add a forum title","Будь ласка, оберіть ім'я форуму"],"error_no_topic_title":["Пожалуйста, выберите название темы","Please add a topic","Будь ласка, оберіть назву теми"],"body_invalid":["Вы забыли ввести текст","You forgot to enter text","Ви забули ввести текст"],"html_invalid":["Пожалуйста, проверьте введенные тэги. Пример: [a] Текст [/a]","Please check tags used. Example: [a] Text [/a]","Будь ласка, перевірте введені теги. Приклад: [a] Текст [/a]"],"error_effect_remark_to_incorrect_position":["Вы не можете добавить ремарку в этом месте","You can’t add a remark here","Ви не можете додати ремарку в це мiсце"],"error_quick_signup_fields":["Адрес электронной почты и имя обязательны","Email and name are required","Адреса електронної пошти та iм'я обов'язковi"],"error_invalid_email":["Пожалуйста, введите корректный адрес электронной почты","Please enter a valid email address","Будь ласка, надайте коректну адресу електронної пошти"],"error_invalid_name":["Пожалуйста, введите корректное имя","Please enter a valid name","Будь ласка, надайте коректне iм'я"],"error_agree_terms":["Пожалуйста, подтвердите согласие с Правилами использования","You should agree with Terms and Policies","Ви маєте погодитись iз Правилами користування"],"error_browser_is_not_supported":["Ваш браузер не поддерживается. <a href='http://solidopinion.com/browser'>Пожалуйста, обновите браузер</a>","Your browser is not supported, <a href='http://solidopinion.com/browser'>Please update your browser</a>","Ваш браузер не підтримується. <a href='http://solidopinion.com/browser'>Будь ласка, оновить браузер.</a>"],"error_widget_is_not_active":["Извините, но виджет комментариев в данный момент не активен","Sorry, this widget is currently not active","Вибачте, але вiджет коментарiв на даний час не активний"],"error_widget_loading_to_long":["Загрузка выполняется слишком долго, пожалуйста, <a onclick='location.reload();'>нажмите сюда</a> для обновления.","Some features have failed to load due to an Internet connectivity problem. If this problem persists, try <a onclick='location.reload();'>reloading the page</a>.","Завантаження виконується занадто довго, будь ласка, <a onclick='location.reload();'>натисніть сюди</a> для оновлення."],"error_no_smile":["Пожалуйста, добавьте эмоции","Please add an emotion","Будь ласка, додайте емоції"],"error_text_no_chang":["Пожалуйста, добавьте ремарку","Please add a remark","Будь ласка, додайте ремарку"],"error_text_no_chang_format":["Пожалуйста, добавьте формат","Please add a format","Будь ласка, додайте формат"],"error_login_error":["Неверное сочетание электронного адреса и пароля.<br>Пароли SolidOpinion чувствительны к регистру.<br>Пожалуйста, проверьте нажатие клавиши CAPS lock.","Sorry, we can't recognise this Email/Password Combination.<br>SolidOpinion passwords are case sensitive.<br>Please check your CAPS lock key.","Невірне поєднання електронної адреси і пароля.<br>Паролі Solidopinion чутливі до регістра.<br>Будь ласка, перевірте натиснення клавіші CAPS lock."],"name_invalid":["Имя может содержать буквенно-цифровые символы, тире, подчеркивание и пробел. Пожалуйста, выберите другое имя.","Sorry, 'Name' allows only alphanumeric characters, hyphen, dash, underscores and spaces.","Iм'я може складатися з лiтерно-цифрових символiв, тире, підкреслення і прогалин. Будь ласка, оберiть iнше iм'я."],"worning_text_limit":["У вас осталось символов:","You have characters left:","У вас залишилося символів:"],"worning_text_limit_error":["Вы превысили максимальную длину.","You exceeded comment maximum length!","Ви перевищили максимальну довжину."],"email_invalid":["Пожалуйста, введите корректный адрес электронной почты.","Please enter a valid email address.","Будь ласка, надайте коректну адресу електронної пошти."],"pass_too_short":["Пароль должен содержать от 6 до 20 символов.","Password must have from 6 to 20 characters.","Пароль повинен містити від 6 до 20 символів."],"error_signup_password_invalid":["Пожалуйста, выберите пароль","Please enter your password","Будь ласка, оберіть пароль."],"error_signup_password_blank":["Пароль не может быть пустым.","Sorry, password can't be blank.","Вибачте, Ви не можете використовувати пустий пароль."],"error_signup_pass_not_equal":["Ваши пароли не совпадают. Пожалуйста, попробуйте еще раз.","Your passwords do not match. Please try again.","Ваші паролі не збігаються, будь ласка, спробуйте ще раз."],"error_signup_data_required":["Все поля обязательны для заполнения.","All fields are required.","Всі поля обов'язкові для заповнення."],"captchacode_invalid":["Код неверный","Code is invalid","Код невірний"],"forgot_sent":["Мы отправили инструкции по изменению пароля на Ваш электронный адрес.","We've sent password reset instructions to your email address.","Ми надiслали інструкції по зміні паролю на Вашу електронну адресу."],"fakename_invalid":["Введенное имя содержит недопустимые символы, попробуйте использовать другое","This name contains forbidden characters. Please try another one.","Надане iм'я мiстить не дозволенi символи, спробуйте iнше"],"user_is_not_allowed_on_this_site":["Наш сайт не разрешает Вам оставлять комментарии, если Вы считаете, что это ошибка, Вы можете написать нам","Our website policy allows for read only access. If you think this is a mistake, please let us know","Наш сайт не дозволяє Вам залишати коментарi, якщо Ви вважаєте, що це помилка, надiшлiть нам повiдомлення"],"reply_is_not_allowed":["Ответы на этот комментарий запрещены его автором","Replies to this comment have been disabled by the author","Вiдповiдi на цей коментар забороненi його автором"],"user_cant_post":["Кто-то запретил Вам комментировать. Попробуйте позже","Oops. Someone prevented you from commenting. Please try again later","Хтось заборонив Вам коментувати, спробуйте пiзнiше"],"filter_check_failed":["Ваш комментарий не соответствует правилам сайта, попробуйте изменить его","Your comment does not meet the rules of the site, try to change it","Ваш коментар не відповідає правилам сайту, спробуйте змінити його"],"not_enough_money":["Не хватает монет","Not enough points","Бракує монет"],"not_enough_points":["Не хватает монет","Not enough points","Бракує монет"],"edit_comment_alert_message":["Редактирование прекратит действие эффектов Ремарка и Формат","Editing terminates Remark and Format effects","Редагування припинить дію ефектів Ремарка і Формат"],"cant_apply_effect_to_this_user":["Извините, но Вы не можете применять эффекты к этому пользователю, так как он защищен","Sorry, you can not apply any effects to this post as this author is protected","Вибачте, але Ви не можете застосовувати ефекти до цього користувача, оскільки він захищений"],"cant_apply_effect":["К сожалению, этот эффект не может быть применен. Пожалуйста, попробуйте позже.","Sorry by game rules you can't apply this effect. Please try again later.","На жаль, цей ефект не може бути застосований. Будь ласка, спробуйте пізніше."],"position_already_taken":["На этот текст не может быть добавлена ремарка.","Someone has already applied a remark to this part.","На цей текст не може бути додана ремарка."],"image_too_small":["Фото слишком маленькое, ширина и высота должны быть более 200 пикселей","This image is too small. Please try another image that is at least 200px wide and tall.","Фото надто маленьке, ширина і висота мають бути більше 200 пікселів"],"image_format_incorrect":["К сожалению, мы не можем использовать это фото. Поддерживаемые форматы:  GIF, JPG и PNG, а максимальный размер файла должен быть не более 5 МБ. Попробуйте другое фото.","Can't use this image. We support only GIF, JPG and PNG formats. It should be 5MB or less. Please try another one","Нажаль ми не можемо використати це фото. Ми приймаємо лише GIF, JPG та PNG формати. Максимальний розмiр файлу має бути меньшим за 5 МБ. Спробуйте iнше"],"count_invalid":["Неверное количество","Count is incorrect","Невірна кількість"],"video_url_invalid":["Пожалуйста, введите корректный адрес странички с видео","Please enter valid video url","Будь ласка, надайте коректну адресу сторiнки з вiдео"],"img_url_invalid":["Пожалуйста, введите корректный адрес картинки","Please enter valid image url","Будь ласка, введіть коректну адресу картинки"],"image_file_too_large":["Размер фото слишком большой, поддерживаются фото до 5МБ","This image is too big. Please try another image that is 5MB or less.","Розмір фото занадто великий, підтримуються фото до 5МБ"],"error_user_protected":["Извините, но Вы не можете применить эффект, так как автор этого комментария защищен от действия любых эффектов","Sorry, you can’t apply any effects to this comment as this author is fully protected","Вибачте, але Ви не можете застосувати цей ефект, тому що автор цього коментаря захищений вiд дiї будь-яких эфектiв"],"popup_login_title":["SolidOpinion Вход","SolidOpinion Log in","SolidOpinion Вхiд"],"popup_login_with_social":["Подключиться c","Connect with","Підключитися з"],"popup_login_email_field":["Ваш электронный адрес","Your Email","Ваша електронна адреса"],"popup_login_pass_field":["Пароль","Password","Пароль"],"popup_login_forgot_link":["Забыли пароль?","Forgot your password?","Забули пароль?"],"popup_login_keep_logged_in":["Сохранить пароль","Keep me logged in","Зберегти пароль"],"popup_login_signup_link":["Регистрация","Sign up for SolidOpinion","Реєстрація"],"popup_login_confirm_button":["Войти","Log In","Увiйти"],"popup_login_cancel_button":["Отменить","Cancel","Скасувати"],"popup_login_processing":["Обработка","Processing","Обробка"],"popup_signup_title":["SolidOpinion Регистрация","SolidOpinion Sign up","SolidOpinion Реєстрація"],"popup_signup_with_social":["Подключиться с","Connect with","Підключитися з"],"popup_signup_email_field":["Ваш электронный адрес","Your Email","Ваша електронна адреса"],"popup_signup_name_field":["Ваше Имя","Your Name","Ваше Iм'я"],"popup_signup_pass_field":["Пароль","New password","Пароль"],"popup_signup_pass2_field":["Подтвердите пароль","Re-enter password","Підтвердіть пароль"],"popup_signup_agree_text":["Регистрируясь, Вы соглашаетесь с ","You agree with ","Реєструючись, Ви погоджуєтесь з "],"popup_signup_agree_text2":["Правилами использования","Terms and Policies","Правилами користування"],"popup_signup_login_link":["Уже есть учетная запись?","Already have an account?","Вже маєте облiковий запис?"],"popup_signup_confirm_button":["Зарегистрироваться","Sign Up","Зареєструватись"],"popup_signup_cancel_button":["Отменить","Cancel","Скасувати"],"popup_signup_use_my_social_avatar":["Использовать моё фото из социальной сети","Use my social network profile picture","Використати моє фото з соцiальної мережi"],"popup_forgot_title":["Восстановление пароля","Forgot password","Вiдновлення паролю"],"popup_forgot_email_field":["Ваш электронный адрес","Email","Ваша електронна адреса"],"popup_forgot_code_field":["Код с картинки","Code","Код з зображення"],"popup_forgot_login_link":["Войти","Log in","Увiйти"],"popup_forgot_confirm_button":["Отправить","Send","Надiслати"],"popup_complain_confirm_button":["Отправить","Send","Надiслати"],"popup_forgot_cancel_button":["Отменить","Cancel","Скасувати"],"popup_forgot_refresh_image":["Обновить изображение","Refresh Image","Оновити зображення"],"expert_mode_on":["Доступен режим эксперта","Expert mode is enabled","Доступний режим експерта"],"popup_voted_up":["Поднят голосами.<br>Нажмите для перехода к оригиналу.","Voted up.<br>Click for original position.","Піднятий голосами.<br>Натисніть для переходу до оригіналу."],"popup_voted_down":["Перемещен голосами.<br>Нажмите для перехода к оригиналу.","Voted down.<br>Click for original position.","Переміщений голосами.<br>Натисніть для переходу до оригіналу."],"popup_voted_def":["Перемещен голосованием.<br>Нажмите для перехода к обсуждению.","Moved by votes.<br>Click to see discussion.","Переміщений голосуванням.<br>Натисніть для переходу до обговорення."],"contact_us":["Форма обратной связи","Contact us form","Форма зворотнього зв'язку"],"open_in_app":["Вы можете использовать удобное приложение для комментирования","Would you like to use awesome app for easy commenting?","Ви можете застосувати зручний додаток для коментування"],"EXPERT_MODE":["Режим эксперта <a href='EXPERT_MODE_HELP_URL' target='_blank' class='link-color'>[?]</a>","Expert mode <a href='EXPERT_MODE_HELP_URL' target='_blank' class='link-color'>[?]</a>","Режим експерта <a href='EXPERT_MODE_HELP_URL' target='_blank' class='link-color'>[?]</a>"],"EXPERT_MODE_c":["Доверяют профессионалам","Post it like a pro!","Довіряють професіоналам"],"sort_date_only_t":["Новые вначале","Sort by newest","Нові спочатку"],"sort_points_only_t":["По репутации автора","Sort by author reputation","По репутації автора"],"sort_date_t":["Новые и голоса ЗА","Sort by newest and votes","Нові і голоси ЗА"],"sort_points_t":["По репутации автора и голосам ЗА","Sort by author reputation and votes","По репутації автора і голосам ЗА"],"sort_date_oldest_t":["Старые вначале","Sort by oldest","Старi спочатку"],"sort_date_only":["Новые","Newest","Нові"],"sort_points_only":["Репутация автора","Reputation","Репутація автора"],"sort_date":["Новые и голоса ЗА","Newest and voted up","Нові і голоси ЗА"],"sort_points":["Репутация автора и голоса ЗА","Reputation and voted up","Репутація автора і голоси ЗА"],"sort_date_oldest":["Старые","Oldest","Старi"],"error_user_is_not_allowed":["Политикой сайта Вам не разрешено оставлять комментарии. Если Вы считаете это ошибкой, пожалуйста, сообщите нам об этом","Our website policy allows for read only access. If you think this is a mistake, please let us know.","Політика сайта не дозволяє Вам залишати коментарі. Якщо Ви вважаєте це помилкою, будь ласка, повідомте нас про це."],"user_about_me":["О себе:","About me:","О себе:"],"user_block_succ":["Пользователь успешно заблокирован","The user was successfully blocked","Користувач успішно заблокований"],"complain_success":["Ваша жалоба была успешно отправлена","Your complaint was successfully sent","Ваша скарга була успішно відправлена"],"error":["Ошибка","Error","Помилка"],"popup_buy_title":["Получить монеты","Buy points","Купити монети"],"popup_buy_yo_balance":["На Вашем счету","Your balance is","На Вашому рахунку"],"popup_buy_soliddolars":["СолидДоллар|СолидДоллара|СолидДолларов","SolidDollar|SolidDollars","СолiдДолар|СолiдДолари|СолiдДоларiв"],"popup_buy_y_have":["У Вас ","You have","Загалом Ви маєте"],"popup_buy_points_for_site":["на сайте","for site","на сайтi"],"popup_buy_action_requre":["Для применения эффекта нужно","This action requires","Для застосування ефекту потрiбно"],"popup_buy_points":["монет","point(s)","монет"],"popup_buy_total_amount_of_points":[" У Вас","You total amount of point(s) is"," Загалом Ви маєте"],"popup_buy_please_add":["Пожалуйста, добавьте","Please add","Будь ласка, додайте"],"popup_buy_points_to_y_to_proceed":["на Ваш счет, чтобы применить эффект.","to your account to proceed with action.","на Ваш рахунок, щоб застосувати ефект."],"popup_buy_buy":["Купить","Buy","Купити"],"popup_buy_point":["монет","points","монет"],"popup_buy_mess_balance_lower_than_purchasep1":["К сожалению, на Вашем счету не хватает средств.","Unfortunately, your balance is lower than the purchase amount.","На жаль, на Вашому рахунку бракує коштiв."],"popup_buy_mess_balance_lower_than_purchasep2":["Пожалуйста, пополните счет на ","You need to add at least","Будь ласка, поповніть рахунок на "],"popup_buy_mess_balance_lower_than_purchasep3":[", чтобы завершить покупку."," to your account to complete this purchase.",", щоб завершити купівлю."],"popup_buy_button_continue":["Продолжить","Continue","Далi"],"popup_buy_button_cancel":["Отменить","Cancel","Скасувати"],"popup_buy_usd":["USD","dollar(s)","USD"],"popup_buy_fcb":["Facebook кредитов","Facebook credits","Facebook кредитiв"],"popup_buy_vko":["Голосов Вконтакте","Vkontakte votes","Голосiв Вконтактi"],"popup_buy_country":["Выберите страну","Choose country","Оберіть країну"],"popup_buy_ukraine":["Украина","Ukraine","Україна"],"popup_buy_russia":["Россия","Russia","Росія"],"popup_buy_sms_text":["Пожалуйста, отправьте СМС с текстом","Please send SMS with text","Будь ласка, надiшлiть СМС с текстом"],"popup_buy_sms_number":["на номер","to service number","на номер"],"popup_buy_sms_confirmation":['Нажмите "Продолжить" после получения СМС с подтверждением.','Click "Continue" when you receive confirmation SMS.','Натисніть "Далі" після отримання СМС з підтвердженням.'],"popup_buy_sms_price":["Цена","Price","Ціна"],"popup_buy_sms_fee":["(plus additional Pension fund fee 7.5% of service cost excluding VAT)","(plus additional Pension fund fee 7.5% of service cost excluding VAT)","(plus additional Pension fund fee 7.5% of service cost excluding VAT)"],"popup_buy_sms_support":["Поддержка","Support","Підтримка"],"popup_buy_sms_payment_site":["Мобильные платежи от","Mobile Payment by","Мобільні платежі від"],"popup_buy_sms_messages_quantity":["сообщение|сообщения|сообщений","message|messages","повідомлення|повідомлень"],"popup_buy_sms_points_messages1":["Пожалуйста, отправьте","Please send","Будь ласка, надiшлiть"],"popup_buy_sms_points_messages2":["СМС с текстом","SMS with text","СМС з текстом"],"popup_buy_sms_points_messages3":["для пополнения баланса на","to top-up your balance for","для поповнення рахунку на"],"popup_buy_sms_uah":["гривна|гривны|гривен","UAH","гривна|гривні|гривень"],"popup_buy_sms_rub":["рубль|рубли|рублей","RUB","рубль|рублі|рублів"],"popup_buy_getpoins":["Как заработать монеты?","How else can I get points?","Як заробити монети?"],"popup_getpoints_actions":["За следующие действия ты сможешь получить бонусные монеты","These actions will get you points","За цi дії ти отримаєш бонуснi монети"],"popup_getpoints_spent_1_day":["Ежедневный бонус","Everyday bonus","Щоденний бонус"],"popup_getpoints_read_thread":["Бонус за посещение сайта","Site visit bonus","Бонус за відвідування сайту"],"popup_getpoints_add_comment":["За каждый комментарий","For every added comment","За кожен коментар"],"popup_getpoints_receive_reply":["За каждый ответ на твой комментарий","For every reply on your comment","За кожну відповідь на твій коментар"],"popup_getpoints_vote_up_received":["За каждый голос, который получит твой комментарий","For every vote up on your comment","За кожен голос, який отримає твій коментар"],"popup_getpoints_like_received":["Каждый раз, когда твой комментарий кому-то понравится","For every like on your comment","Кожен раз, коли твій коментар комусь сподобається"],"popup_getpoints_first_activity_bonus":["Бонус за первый визит","For first time visit","Бонус за перший візит"],"popup_getpoints_click_on_post_share":["За каждый переход по ссылке, которой ты поделился в социальной сети","For every click on a link you shared","За кожен перехід по посиланню, яким ти поділився в соціальній мережі"],"popup_getpoints_first_post":["За первый комментарий в обсуждении","For first post on the thread bonus","За перший коментар в обговореннi"],"popup_getpoints_ranks_title":["Также каждое звание имеет свои дополнительные бонусы!","And – each rank has its own advantages!","Також кожне звання має свої додаткові бонуси!"],"popup_getpoints_ranks_title2":["Для получения звания тебе нужно собрать необходимое количество монет.","To get a rank, you must collect a certain number of points.","Для отримання звання треба зібрати необхідну кількість монет."],"popup_getpoints_ranks_description":["","",""],"popup_getpoints_rank_column":["Звание","Rank","Звання"],"popup_getpoints_amount_column":["Нужно монет","Required Points","Треба монет"],"popup_getpoints_effect_column":["Бонус","Free Effect","Бонус"],"popup_getpoints_ranks_notation":["Все бонусы за предыдущие звания накапливаются!","All your bonuses move with you to the next level!","Усі бонуси за попередні звання накопичуються!"],"popup_getpoints_ranks_turn_off_replies":["Запретить ответы","Turn off replies on a comment","Заборонити вiдповiдi"],"popup_getpoints_ranks_ignore_user":["Игнорировать автора комментария","Ignore comment's author","Ігнорувати автора коментару"],"popup_getpoints_ranks_prevent_from_posting":["Запретить автору комментировать","Prevent comment author from posting","Заборонити автору коментувати"],"popup_getpoints_ranks_add_image":["Добавить фото","Add an image to comment","Додати фото"],"popup_getpoints_ranks_embed_video":["Вставить видео","Embed video in comment","Додати вiдео"],"popup_getpoints_ranks_change_name":["Изменить имя автора","Change comment author's name","Змінити им'я автора"],"popup_getpoints_ranks_change_avatar":["Изменить аватар автора","Change comment author's profile picture","Змінити аватар автора"],"popup_getpoints_ranks_edit_comment":["Вставить ремарку","Add remark","Додати ремарку"],"popup_getpoints_ranks_add_emotion":["Добавить эмоцию","Add emotion","Додати емоцію"],"popup_getpoints_ranks_not_selected":["Не выбран","Not Selected","Не обрано"],"popup_getpoints_back":["Назад","Back","Назад"],"popup_getpoints_close":["Закрыть","Close","Закрити"],"effect_reputation_bomb_result_p1":["Монетная бомба поразила цель! Потери оппонента","Reputation bomb hit the target! Your opponent lost ","Монетна бомба вразила ціль! Опонент втратив"],"effect_reputation_bomb_result_p2":["","opponent lose","opponent lose"],"effect_reputation_bomb_result_p3":["монета|монеты|монет","point|points","монету|монети|монет"],"effect_reputation_bomb_result_non":["Монетная бомба отклонилась от цели, оппонент не задет.","Oops! Reputation bomb didn't hit the target. Wish you luck with another one!","Монетна бомба вiдхилилася вiд курсу, опонент не постраждав."],"effect_transfer_points_result_success":["Вы передали монеты","Point(s) have been transferred","Ви подарували монети"],"contact_us_notext":["Пожалуйста, введите ваше сообщение","Please add a message","Будь ласка, введіть ваше повідомлення"],"user_not_exists":["Пользователь не существует","User doesn't exist","Користувач не iснує"],"location_invalid":["Пожалуйста, используйте только буквенно-цифровые символы, знаки препинания и пробел.","Location allows only alphanumeric, any punctuation signs and space.","Будь ласка, використовуйте лiтерно-цифровi символи, розділові знаки і прогалини."],"about_invalid":["Пожалуйста, используйте только буквенно-цифровые символы, знаки препинания и пробел.","About allows only alphanumeric, any punctuation signs and space.","Будь ласка, використовуйте лiтерно-цифровi символи, розділові знаки і прогалини."],"ph_location":["Добавить местонахождение","Add location","Додати місцеположення"],"ph_about":["Добавить обо мне","Add about me","Додати про мене"],"ph_name":["Имя","Name","Iм'я"],"notice_reward_ok":["Вы приобрели награду! Вам на почту отправлены инструкции, как ее получить. Спасибо!","You have successfully obtained a Reward! An email has been sent to you with instructions on how to redeem it. Enjoy!","Ви придбали нагороду! Вам на пошту відправлені інструкції, як її отримати. Дякуємо!"],"claim_button":["Купить за ","Claim for ","Купити за "],"out_of_stock":["Эти награды уже закончились","These rewards have already ended","Ці нагороди вже закінчилися"],"btn_save":["Сохранить","Save","Зберегти"],"get_for_my_site":["Установить на мой сайт","Get it for my site","Встановити на мій сайт"],"tip_waiting_moder":["На модерации","On moderation","На модерації"],"tab_link_people":["Люди","People","Люди"],"tab_link_recent":["Новые","Recent","Нові"],"tab_link_popular":["Популярные","Popular","Популярні"],"tab_link_help":["Помощь","Help","Допомога"],"on":["на","on","на"],"your_comments":["Мои комментарии на сайте","Your comments on","Мої коментарі на сайті"],"not_your_comments":["комментарии на","comments on","коментарі на"],"go_to_discussion":["Перейти к обсуждению","Go to discussion","Перейти до обговорення"],"error_please_add_rating_for_post":["Пожалуйста, добавьте рейтинг, прежде чем опубликовать Ваш комментарий","Please add a rating before posting your comment","Будь ласка, додайте рейтинг, перш ніж опублікувати Ваш коментар"],"rating_invalid":["Пожалуйста, добавьте рейтинг, прежде чем опубликовать Ваш комментарий","Please add a rating before posting your comment","Будь ласка, додайте рейтинг, перш ніж опублікувати Ваш коментар"],"add_forum_button":["Создать","Create","Створити"],"create_topic_button":["Создать","Create","Створити"],"forum_title":["Создать форум","Add a forum","Створити форум"],"topic_title":["Добавить тему","Add a topic","Додати тему"],"forum_description":["Описание форума","Description","Опис форуму"],"breadcrums_topics":["Назад","Back","Назад"],"delete_topic":["Удалить тему","Delete topic","Видалити тему"],"delete_forum":["Удалить форум","Delete forum","Видалити форум"],"no_activity_yet":["У Вас еще нет истории активности","You didn't have any activity yet","Вибачте, у Вас ще нема історії активності"],"total_topic":["тема|темы|тем","topic|topics","тема|теми|тем"],"last_comment":["Последний комментарий","Last comment","Останній коментар"],"last_topic":["последняя тема","last topic","остання тема"],"from":["От","From","Від"],"main_category":["Основная Категория","Main Category","Основна Категорія"],"no_threads_in_forum":["В этом Форуме нет тем.","There are no topics in this forum.","У цьому форумі немає тем."],"no_forums":["Форумов не существует.","There are no forums.","Форумів не існує."],"forum_is_undefined":["Форум не существует.","Forum doesn't exist.","Форум не iснує."],"topic_is_undefined":["Тема не существует.","Topic doesn't exist.","Тема не iснує."],"forum_category":["Категория","Category","Категорія"],"effect_add_format_tooltip":["Добавить формат","Add format","Додати формат"],"Clear":["Очистить","Clear","Очистити"],"check_buy":["Вы уверены, что хотите купить","Are you sure you want to buy","Ви впевнені, що бажаєте купити"],"alert_close":["закрыть","close","закрити"],"mess_removed":["Комментарий был удален","Comment was deleted","Коментар був видалений"],"update_rating":["Обновить мой рейтинг","Update my rating","Оновити мій рейтинг"],"update_rating_field":["Пожалуйста, прокомментируйте новый рейтинг","Please explain your new rating","Будь ласка, прокоментуйте новий рейтинг"],"need_points_to_read":["Установить цену за чтение комментария","Set price for user to read this comment","Встановити ціну за читання коментаря"],"closed_comment":["Скрытый комментарий.","This comment is hidden.","Прихований коментар."],"open_for":["Прочитать за ","Open comment for ","Прочитати за "],"are_u_shure":["Вы&nbsp;уверены?","Are&nbsp;you&nbsp;sure?","Ви&nbsp;впевнені?"],"Yes":["Да","Yes","Так"],"No":["Нет","No","Ні"]},"categories":{"shoes":["Обувь","Shoes","Взуття"],"news":["Members Only & Special","",""],"general":["Главная","General","Головна"]},"messagerank":{"already_did_this_action":["Вы уже оценили этот комментарий","You have already ranked this comment","Ви вже оцінили цей коментар"]},"messagesetstatus":{"message_setstatus_1":["Успешно отмечено как спам","The comment was successfully marked as spam","Успішно відзначено як спам"],"message_setstatus_2":["Успешно удалено","The comment was successfully deleted","Успішно видалено"],"message_setstatus_3":["Успешно одобрено","The comment was successfully approved","Успішно схвалено"]},"sitecomplain":{"already_sent":["Извините, но вы уже отправили жалобу","Sorry, but you have already sent complaints","Вибачте, але ви вже відправили скаргу"]},"messageturnoffreplies":{"another_effect_inprogress":["Ответы на этот комментарий уже запрещены","You’ve already turned off replies to this post.","Відповіді на цей коментар вже заборонені"]},"userreputationbomb":{"another_effect_inprogress":["Извините, но вы не можете применять эффекты к этому автору, так как он имеет защиту","Sorry, the author is protected and you can’t apply an effect to this comment.","Вибачте, але ви не можете застосовувати ефекти до цього автору, так як він має захист"]},"userignore":{"another_effect_inprogress":["Вы уже игнорируете этого пользователя","You've already ignored this user.","Ви вже ігноруєте цього користувача"]},"userpreventfromposting":{"another_effect_inprogress":["Вы уже запретили комментировать этому пользователю","You've already prevented this user from posting.","Ви вже заборонили коментувати цьому користувачеві"]},"userfakename":{"another_effect_inprogress":["Имя этого пользователя уже изменено, попробуйте позже","This user is already under the fake name effect. Please try again later.","Ім'я цього користувача вже змінено, спробуйте пізніше"]},"useruploadfakeavatar":{"another_effect_inprogress":["Кто то уже применил эффект к этому пользователю","Someone has already applied this effect for this user.","Хто то вже застосував ефект до цього користувача"],"error":["Ой-ой! Поддерживаются только изображения в форматах JPG/PNG/GIF. Полный размер файла, загруженного изображения, не должен превышать 5 Мб. Изображение должно быть больше, чем 200Х200 пикселей. Попробуйте загрузить другое изображение.","Uh oh! Only JPG/PNG/GIF images are supported. The total file size of the uploaded image must be less than 5 MB. An image has to be bigger than 200px by 200px. Try uploading another image.","Ой-ой! Підтримуються тількі зображення у форматах JPG/PNG/GIF. Повний розмір файлу, завантаженого зображення, не повинен перевищувати 5 МБ. Зображення повинно бути більше, ніж  200Х200 пікселів. Спробуйте завантажити інше зображення."]},"usercropfakeavatar":{"another_effect_inprogress":["Кто то уже применил эффект к этому пользователю","Someone has already applied this effect for this user.","Хто то вже застосував ефект до цього користувача"],"image_not_found":["Извините, возникла внутренняя ошибка. Попробуйте позже","Internal has error occurred. Please try again later","Вибачте, виникла внутрішня помилка. Спробуйте пізніше"]},"siteblockuser":{"filter_already_exists":["Для этого пользователя уже создан фильтр. Перейти к <a class='link-color' href='SO_BASE_URLsettings/SO_SITE_NAME#filters' target='_blank'>управлению фильтрами</a>.","Filter for this user already exists. You can check it <a class='link-color' href='SO_BASE_URLsettings/SO_SITE_NAME#filters' target='_blank'>here</a>.","Фiльтр для цього користувача вже створений. Перейти до <a class='link-color' href='SO_BASE_URLsettings/SO_SITE_NAME#filters' target='_blank'>управління фільтрами</a>."]},"usersignup":{"user_name_already_taken":["Извините, это имя уже занято","Sorry, this name is already taken.","Вибачте, це ім'я вже зайнято"],"user_email_already_taken":["Извините, но введенный адрес электронной почты уже используется. Если Вы забыли пароль, пожалуйста, воспользуйтесь функцией <a class='fogot-password link-color'>восстановления пароля</a>","Sorry, this email is already in use. If you forgot your password, please <a class='fogot-password link-color'>click here</a>.","Вибачте, але надана адреса електроної пошти вже використовується. Якщо Ви забули пароль, будь ласка, спробуйте <a class='fogot-password link-color'>вiдновити доступ</a>"],"quick_signup_done":["Ваш временный пароль отправлен на почту, не забудьте сменить его!","Your temporary password has been sent to your inbox. Please don’t forget to change it later.","Ваш тимчасовий пароль відправлений на пошту, не забудьте змінити його!"]}};function replace_so_vars(text){if(typeof base_url!="undefined"&&typeof getSiteName!="undefined"){return text.replace("SO_BASE_URL",base_url).replace("SO_SITE_NAME",getSiteName()).replace("EXPERT_MODE_HELP_URL",getExpertModeHelpUrl());}return text;}function getText(text,module,lang){if(!lang||lang==undefined||lang==""){lang=sys_lang;}var lid=lang=="en"?1:lang=="ua"?2:0;if(text===undefined||text==""){return"";}if(module===undefined||module==""){module="default";}if(frontend_messages_data[module]&&frontend_messages_data[module][text]){return replace_so_vars(frontend_messages_data[module][text][lid]);}else{if(frontend_messages_data["default"][text]&&frontend_messages_data["default"][text][lid]){return replace_so_vars(frontend_messages_data["default"][text][lid]);}}return text;}function getDecimal(num){return num-Math.floor(num);}function nouns(text,raw_val,module){if(text==undefined||!text||text==""){return"";}if(raw_val!=undefined){if(raw_val<0){raw_val*=-1;}}var text_data=[];text=getText(text,module,sys_lang);if(text.length>0){text_data=text.split("|");}var val=0;if(typeof sys_lang=="undefined"||sys_lang=="en"){if(raw_val!=undefined){val=raw_val;}val=String(parseInt(raw_val));val=Number(val);if(val==1&&text_data[0]!=undefined){text=text_data[0];}else{if(text_data[1]!=undefined){text=text_data[1];}}}else{var decimal=getDecimal(raw_val);if(raw_val!=undefined){val=String(parseInt(raw_val));val=Number(val.substr(val.length-2));}if(val>20){val=String(parseInt(raw_val));val=Number(val.substr(val.length-1));}if(decimal!=0){text=text_data[1];}else{if(val==1&&text_data[0]!=undefined){text=text_data[0];}else{if(val>1&&val<5&&text_data[1]!=undefined){text=text_data[1];}else{if(text_data[2]!=undefined){text=text_data[2];}}}}}return text;}function _(text,module){if(module!=undefined&&module.length>1){module=module.toLowerCase().replace(/\//g,"");}return getText(text,module);}
var loaded_js=[];function ls(b,e,d){if(!(b in loaded_js)){loaded_js.push(b);var a=document.createElement("script");a.type="text/javascript";a.src=b;if(d){a.async=false;}if(e){var c=function(){if(e&&{}.toString.call(e)==="[object Function]"){e();}};if(ie<9){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"||a.readyState=="completed"){c();}};}else{a.onload=c;}}document.getElementsByTagName("head")[0].appendChild(a);}}function lc(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);if(typeof b!="undefined"){document.getElementsByTagName("head")[0].appendChild(b);}}function preload(imgs){$(imgs).each(function(){(new Image()).src=this;});}function isSupportedBrowser(){function html5_storage(){try{return"localStorage" in window&&window["localStorage"]!==null;}catch(e){return false;}}return !html5_storage();}function addCommas(nStr){nStr=_n(nStr);nStr+="";x=nStr.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,"$1"+","+"$2");}return x1+x2;}function _n(n){if(n==undefined||n==Infinity||isNaN(n)||n=="undefined"||n=="NaN"||n=="Infinity"){n=0;}return n;}window.log=function(){try{return console.log.apply(console,arguments);}catch(_error){}};function stripHtml(html){html=html.replace(/<br\s*[\/]?>/gi," ");var tmp=document.createElement("DIV");tmp.innerHTML=html;return tmp.textContent||tmp.innerText;}function removeLastBr(text){while(1){if(text.substr(-4)=="<br>"&&text.length>4){text=text.substr(0,text.length-4);}else{break;}}return text;}function isInteger(input){return typeof(input)=="number"&&parseInt(input)==input;}function isEmptyObj(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return false;}}return true;}function isElement(o){return(typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o.nodeType===1&&typeof o.nodeName==="string");}function htmlDecode(input){if(!input){return"";}var e=document.createElement("div");e.innerHTML=input;return e.innerHTML;}function removeEmptyTags(html){return html.replace(/<[^\/>][^>]*>\s*<\/[^>]+>/gim,"");}function getAvatar(usr,type,real){if(type==undefined){type="S";}if(real==undefined){real=false;}return(usr&&usr.effects&&usr.effects.avatar&&!real)?usr.effects.avatar.avatar_url+"_"+type+".jpg":(usr&&usr.avatar_url)?usr.avatar_url+"_"+type+".jpg":(site_avatar_url!="")?site_avatar_url+"_"+type+".jpg":default_avatar;}function validateEmail(email){var b=/\S+@\S+\.\S+/;return b.test(email);}function showMessageError(id,message,api_dat){if(!message||message==undefined||message==""){message=_("error");}showMessage(id,message,"error",api_dat);}function showMessageSuccess(id,message,api_dat,no_close){if(no_close!==true){no_close=false;}if(!message||message==undefined||message==""){message=_("sucsses");}showMessage(id,message,"success",api_dat,no_close);}function showMessage(id,message,status,api_dat,no_close){if(!id){return false;}var html='<div class="error-new message-'+status+'"><span class="inner">'+_(message,api_dat)+"</span>";if(no_close){html+="</div>";}else{html+='&nbsp;<button class="close link-color" data-dismiss="alert" type="button">'+_("alert_close")+"</button></div>";}$("#"+id).html(html);$("#"+id).on("click","button.close",function(e){$("#"+id).empty();});return true;}function getSortOrder(site_name){var c=$.cookie("sort_"+site_name);if(!c||c===null||c==""||c=="false"){return false;}return c;}function setSortOrder(site_name,order){var domain=".solidopinion.com";if(order&&order!==null&&order!=""){$.cookie("sort_"+site_name,order,{expires:999,path:"/",domain:domain});}else{$.removeCookie("sort_"+site_name,{path:"/",domain:"."+base_domain});}}function sfSetAuth(key){var domain=".solidopinion.com";if(typeof frontend_base_url!="undefined"){domain=frontend_base_url.replace("//api","").replace("/","");}if(key&&key!==null&&key!=""){$.cookie("a",key,{expires:30,path:"/",domain:domain});$.cookie("islogged",1,{expires:30,path:"/",domain:domain});}else{sfRemoveAuth();}}function sfRemoveAuth(){$.removeCookie("a",{path:"/",domain:"."+base_domain});$.removeCookie("islogged",{path:"/",domain:"."+base_domain});}function sfGetAuth(){var a=$.cookie("a");if(!a||a===null||a==""||a=="false"){return false;}return a;}function getCustomData(key){if((typeof key!="undefined")&&(key!="")){var value=$.jStorage.get(key);return value;}return null;}function hideMessage(id){var a=$("#"+id);a.hide();}function strikeThrough(){document.execCommand("strikeThrough");}function insertTextAtCursor1111(text){var sel,range,html;if(window.getSelection){sel=window.getSelection();var node=sel.focusNode;if(sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0);range.deleteContents();range.insertNode(document.createTextNode(text));}setCaretPosition(node,text.length);}else{if(document.selection&&document.selection.createRange){document.selection.createRange().text=text;}}}function insertTextAtCursor(html,selectPastedContent){var sel,range;if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0);range.deleteContents();var el=document.createElement("div");el.innerHTML=html;var frag=document.createDocumentFragment(),node,lastNode;while((node=el.firstChild)){lastNode=frag.appendChild(node);}var firstNode=frag.firstChild;range.insertNode(frag);if(lastNode){range=range.cloneRange();range.setStartAfter(lastNode);if(selectPastedContent){range.setStartBefore(firstNode);}else{range.collapse(true);}sel.removeAllRanges();sel.addRange(range);}}}else{if((sel=document.selection)&&sel.type!="Control"){var originalRange=sel.createRange();originalRange.collapse(true);sel.createRange().pasteHTML(html);if(selectPastedContent){range=sel.createRange();range.setEndPoint("StartToStart",originalRange);range.select();}}}}function setCaretPosition(elem,caretPos){var range;if(elem.createTextRange){range=elem.createTextRange();range.move("character",caretPos);range.select();}else{elem.focus();if(elem.selectionStart!==undefined){elem.setSelectionRange(caretPos,caretPos);}}}function insertHtmlAtCursor(html){var sel,range;if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0);range.deleteContents();var el=document.createElement("div");el.innerHTML=html;var frag=document.createDocumentFragment(),node,lastNode;while((node=el.firstChild)){lastNode=frag.appendChild(node);}range.insertNode(frag);if(lastNode){range=range.cloneRange();range.setStartAfter(lastNode);range.collapse(true);sel.removeAllRanges();sel.addRange(range);}}}else{if(document.selection&&document.selection.type!="Control"){document.selection.createRange().pasteHTML(html);}}}function getSelectionCoords(){var sel=document.selection,range;var x=0,y=0;if(sel){if(sel.type!="Control"){range=sel.createRange();range.collapse(true);x=range.boundingLeft;y=range.boundingTop;}}else{if(window.getSelection){sel=window.getSelection();if(sel.rangeCount){range=sel.getRangeAt(0).cloneRange();if(range.getClientRects){range.collapse(true);var rect=range.getClientRects()[0];x=rect.left;y=rect.top;}}}}return{x:x,y:y};}function getSelectionHtml(){var html="";if(typeof window.getSelection!="undefined"){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement("div");for(var i=0,len=sel.rangeCount;i<len;++i){container.appendChild(sel.getRangeAt(i).cloneContents());}html=container.innerHTML;}}else{if(typeof document.selection!="undefined"){if(document.selection.type=="Text"){html=document.selection.createRange().htmlText;}}}return(html);}function getSelectedNode(){var node,selection;if(window.getSelection){selection=getSelection();node=selection.anchorNode;}if(!node&&document.selection){selection=document.selection;var range=selection.getRangeAt?selection.getRangeAt(0):selection.createRange();node=range.commonAncestorContainer?range.commonAncestorContainer:range.parentElement?range.parentElement():range.item(0);}if(node){return(node.nodeName=="#text"?node.parentNode:node);}}function saveSelection(){if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){return sel.getRangeAt(0);}}else{if(document.selection&&document.selection.createRange){return document.selection.createRange();}}return null;}function restoreSelection(range){if(range){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);}else{if(document.selection&&range.select){range.select();}}}}function getMenuItemObject(){return{"border":0,"class_name":"","add_data":"","price":"-","effect_name":""};}function getMesObject(){return{"code":"","parent_code":"","creation_date":"","stats":{"votes_up":0,"votes_down":0,"likes":0,"dislikes":0},"status":"","thread_code":"","author":getUsersObject(),"body":{"text":"","is_spam":0,"effects":{"remarks":[{"author":{"code":"","name":""},"start_pos":0,"end_pos":0,"body":"","time_to_end":0}]},"smiles":[{"author":{"code":"","name":""},"code":"","date_added":""}],"images":[{"author":{"code":"","name":""},"code":"","date_added":""}]},"level":0};}function getThreadObject(){return{"thread_code":"","last_comment_author_code":"","last_comment_author_name":"","last_comment_date":"","thread_create_date":"","author":getUsersObject(),"thread_title":"","thread_total_comments":0};}function getUsersObject(){return{"code":"","name":"","about":"","location":"","signup_date":"","status":"","effects":{"name":{"value":"","time_to_end":0,"author":{"code":"","name":""}},"avatar":{"author":{"code":"","name":""},"time_to_end":0}},"rank":{"name":"","color":"","icon":""},"stats":{"total_messages":0,"total_votes_up":0,"total_likes":0,"total_approved":0,"total_votes_down":0,"total_spam":0,"total_dislikes":0}};}function setIsLogged(flag){$.cookie("is_logged",flag,{expires:30,domain:"."+base_domain,path:"/"});if(flag){$.cookie("islogged",1,{expires:30,domain:"."+base_domain,path:"/"});}else{$.cookie("islogged",1,{path:"/",domain:"."+base_domain});}}var pad=function(num,totalChars){var pad="0";num=num+"";while(num.length<totalChars){num=pad+num;}return num;};var changeColor=function(color,ratio,darker){ratio=ratio/100;color=color.replace(/^\s*|\s*$/,"");color=color.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var difference=Math.round(ratio*256)*(darker?-1:1),rgb=color.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),alpha=!!rgb&&rgb[4]!=null?rgb[4]:null,decimal=!!rgb?[rgb[1],rgb[2],rgb[3]]:color.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16);}).split(/,/),returnValue;return !!rgb?"rgb"+(alpha!==null?"a":"")+"("+Math[darker?"max":"min"](parseInt(decimal[0],10)+difference,darker?0:255)+", "+Math[darker?"max":"min"](parseInt(decimal[1],10)+difference,darker?0:255)+", "+Math[darker?"max":"min"](parseInt(decimal[2],10)+difference,darker?0:255)+(alpha!==null?", "+alpha:"")+")":["#",pad(Math[darker?"max":"min"](parseInt(decimal[0],10)+difference,darker?0:255).toString(16),2),pad(Math[darker?"max":"min"](parseInt(decimal[1],10)+difference,darker?0:255).toString(16),2),pad(Math[darker?"max":"min"](parseInt(decimal[2],10)+difference,darker?0:255).toString(16),2)].join("");};var lighterColor=function(color,ratio){return changeColor(color,ratio,false);};var darkerColor=function(color,ratio){return changeColor(color,ratio,true);};function getBrightnes(c){c=String(c).replace(/[^0-9a-f]/gi,"");if(c.length<6){c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2];}var rgb=parseInt(c,16);var r=(rgb>>16)&255;var g=(rgb>>8)&255;var b=(rgb>>0)&255;var lum=0.2126*r+0.7152*g+0.0722*b;return Number(lum/255*100).toFixed();}function getTextColor(lightness){if(parseInt(lightness)<50){return"color: #fff !important;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.5);\n  -webkit-font-smoothing: antialiased;";}else{return"color: #333 !important;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);\n  -webkit-font-smoothing: antialiased;";}}function generateGradient(color,superLowlight,text,highhex,lowhex){return"  background-color: "+lowhex+" !important;"+"background-repeat: repeat-x;"+'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="'+highhex+'", endColorstr="'+lowhex+'");'+"background-image: -khtml-gradient(linear, left top, left bottom, from("+highhex+"), to("+lowhex+"));"+"background-image: -moz-linear-gradient(top, "+highhex+", "+lowhex+");"+"background-image: -ms-linear-gradient(top, "+highhex+", "+lowhex+");"+"background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, "+highhex+"), color-stop(100%, "+lowhex+"));"+"background-image: -webkit-linear-gradient(top, "+highhex+", "+lowhex+");"+"background-image: -o-linear-gradient(top, "+highhex+", "+lowhex+");"+"background-image: linear-gradient("+highhex+", "+lowhex+");"+"border-color: "+lowhex+" "+lowhex+" "+superLowlight+";"+text;}function getButtonCss(color){var mod=10;var lowhex=darkerColor(color,mod);var highhex=lighterColor(color,mod);var superLowlight=darkerColor(color,mod+10);if(getBrightnes(color)<20){superLowlight=lighterColor(color,mod+10);}var text="";return generateGradient(color,superLowlight,text,highhex,lowhex);}function hexToRgb(hex,a){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?"rgba("+parseInt(result[1],16)+", "+parseInt(result[2],16)+", "+parseInt(result[3],16)+", "+a+")":"";}function httpsUrl(url){if(/https?:\/\//.test(url)){return url.replace("http://","https://");}else{if(/\/\//.test(url)){return url.replace("//","https://");}}return"https://"+url;}function popapSocialLogin(sys){sys=sys?sys:"";if(!sys){return;}try{window.opener.doSocialLogin(sys);return true;}catch(err){if(location.protocol=="https:"){proxy_page_url=proxy_page_url.replace("https://","http://");window.location.href=proxy_page_url+"?function_name=doSocialLogin&param="+encodeURIComponent(sys);}}}function cutwww(host){if(host&&host.indexOf("www.")===0){return host.substr(4);}return host;}function inputDigitsOnly(e){var chrTyped,chrCode=0;if(e.charCode!=null){chrCode=e.charCode;}else{if(e.which!=null){chrCode=e.which;}else{if(e.keyCode!=null){chrCode=e.keyCode;}}}if(chrCode==0){chrTyped="SPECIAL";}else{chrTyped=String.fromCharCode(chrCode);}self.status="inputDigitsOnly: chrTyped = "+chrTyped;if(chrTyped.match(/\d|[\b]|SPECIAL/)){return true;}if(e.altKey||e.ctrlKey||chrCode<28){return true;}if(e.preventDefault){e.preventDefault();}e.returnValue=false;return false;}function stripTrailingSlash(str){if(str==undefined||str==""){return"";}if(str.substr(-1)=="/"){return str.substr(0,str.length-1);}return str;}$.fn.selectRange=function(start,end){if(!end){end=start;}return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end);}else{if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select();}}});};function randomString(){var chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var string_length=8;var randomstring="";for(var i=0;i<string_length;i++){var rnum=Math.floor(Math.random()*chars.length);randomstring+=chars.substring(rnum,rnum+1);}return randomstring;}function getHtmlStringSelector(selector){var html="";if(selector&&typeof selector=="string"&&selector.length>1){var tag="id";if(selector.charAt(0)=="."){tag="class";}html=" "+tag+'="'+selector.substr(1)+'" ';}return html;}Object.size=function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key)){size++;}}return size;};function placeholderIsSupported(){var test=document.createElement("input");return("placeholder" in test);}function isLongMessage(s){var max_str_length=100;var max_str_number=3;if(s=="undefined"){s="";}var ar=s.split("<br>");return ar[0].length>max_str_length||ar.length>max_str_number;}function NodeIterator(root){this.root=root;this._next=root;}NodeIterator.prototype={_current:null,hasNext:function(){return !!this._next;},next:function(){var n=this._current=this._next;var child,next;if(this._current){child=n.firstChild;if(child){this._next=child;}else{next=null;while((n!==this.root)&&!(next=n.nextSibling)){n=n.parentNode;}this._next=next;}}return this._current;},detach:function(){this._current=this._next=this.root=null;}};function createIterator(root){return new NodeIterator(root);}function getRangeByIndexes(element,start,end){var it=new NodeIterator(element);var range=document.createRange();range.selectNodeContents(element);var char_len=0,end_char_len,c_node_len=0,node;var start_found=false;while(it.hasNext()){node=it.next();if(node.nodeType=="3"){c_node_len=node.textContent.length;end_char_len=char_len+c_node_len;if(!start_found&&start>=char_len&&end_char_len>=start){if(!(c_node_len==start-char_len&&it._next&&it._next.nodeName=="BR")){range.setStart(node,start-char_len);start_found=true;}}if(start_found&&end!==false&&end<=end_char_len){range.setEnd(node,end-char_len);break;}char_len=end_char_len;}}return range;}function getTextNodesIn(node){var textNodes=[];if(node.nodeType==3){textNodes.push(node);}else{var children=node.childNodes;for(var i=0,len=children.length;i<len;++i){textNodes.push.apply(textNodes,getTextNodesIn(children[i]));}}return textNodes;}function createFragment(html){var el=document.createElement("div");el.innerHTML=html;var frag=document.createDocumentFragment(),node,lastNode;while((node=el.firstChild)){lastNode=frag.appendChild(node);}return frag;}function getFragmentHtml(fragment){var div=document.createElement("div");div.appendChild(fragment);return div.innerHTML;}function getTopParrentWithSameTextContent(el,node){if(!node){node=el;}if(node&&node.parentNode&&node.parentNode.textContent==el.textContent){return getTopParrentWithSameTextContent(el,node.parentNode);}else{return node;}}function createRangeFromCharacterIndices(el,start,end,target){var range=document.createRange();range.selectNodeContents(el);var textNodes=getTextNodesIn(el);var foundStart=false;var charCount=0,endCharCount;for(var i=0,textNode;textNode=textNodes[i++];){endCharCount=charCount+textNode.length;if(!foundStart&&start>=charCount&&(start<=endCharCount||(start==endCharCount&&i<textNodes.length))){if(start===end&&start==endCharCount&&target=="right"){if(textNode.parentNode&&(textNode.parentNode.innerText.length==endCharCount||textNode.parentNode.textContent.length==endCharCount)&&textNode.parentNode.parentNode){range.setStartAfter(textNode.parentNode);range.setEndAfter(textNode.parentNode);}else{if(textNode.parentNode&&textNode.parentNode.parentNode){range.setStartAfter(textNode.parentNode);range.setEndAfter(textNode.parentNode);}else{range.setStartAfter(textNode);range.setEndAfter(textNode);}}break;}else{if(target=="left"&&start-charCount==0){range.setStartBefore(getTopParrentWithSameTextContent(textNode));}else{range.setStart(textNode,start-charCount);}}foundStart=true;}if(foundStart&&end!==false&&end<=endCharCount){range.setEnd(textNode,end-charCount);break;}charCount=endCharCount;}return range;}function getShortMessage(s){var max_str_length=100;var max_str_number=3;if(s=="undefined"){s="";}var ar=s.split("<br>");var str="";if(isLongMessage(s)){if(ar[0].length>max_str_length){var substr=ar[0].substring(0,max_str_length);if(substr.charAt(substr.length-1)!=" "){for(var i=substr.length-2;i>0;i--){if(substr.charAt(i)==" "){str=ar[0].substring(0,i+1);break;}}}else{str=substr;}}else{if(ar.length>max_str_number){for(i=0;i<ar.length;i++){if(ar[i]!=""){str=ar[i];break;}}}}return $.trim(str)+"...";}else{return s;}return true;}function getLangugeIdByShortName(name){var i="2";if(name=="ru"){i=1;}if(name=="ua"){i=3;}return i;}function getLangugeShortNameById(id){var l="en";if(id==1){l="ru";}if(id==3){l="ua";}return l;}function is_mob(){return(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));}function urldecode(url){return decodeURIComponent(url.replace(/\+/g," "));}var oneceplaced=false;function placeWidgetOnece(){if(!oneceplaced){placeWidget();oneceplaced=true;}}function encodeAllButBr(text){return htmlspecialchars_encode(text.replace(/\<br\>/g,"[so_brs]")).replace(/\[so_brs\]/g,"<br>");}function openInIos(){setTimeout(function(){window.location="https://itunes.apple.com/ua/app/solidopinion/id938598282?mt=8";},25);window.location="solidopinion://isappinstalled";}function getAndroidLink(){var is_firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var l=document.createElement("a");var t=so_config.parent_href.replace("%23so","#so").replace(/#sot_([^#]+)/i,"").replace(/#sou_([^#]+)/i,"").replace(/#soa_([^#]+)/i,"").replace(/#sol-([^#]+)/i,"");l.href=t;var domain=l.protocol+"//"+l.hostname;var url=t.replace(domain,"");if(!url){url="/";}if(is_firefox){return"solidopinion.com://"+so_config.sitename+","+l.hostname+","+url;}else{return"intent://"+so_config.sitename+","+l.hostname+","+url+"#Intent;scheme=solidopinion.com;package=com.solidopinion.android;end";}}function openInAndroid(){var is_firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var l=document.createElement("a");var t=so_config.parent_href.replace("%23so","#so").replace(/#sot_([^#]+)/i,"").replace(/#sou_([^#]+)/i,"").replace(/#soa_([^#]+)/i,"").replace(/#sol-([^#]+)/i,"");l.href=t;var domain=l.protocol+"//"+l.hostname;var url=t.replace(domain,"");if(!url){url="/";}if(is_firefox){window.top.location="solidopinion://"+so_config.sitename+","+encodeURIComponent(domain)+","+url;}else{window.top.location="intent://"+so_config.sitename+","+encodeURIComponent(domain)+","+url+"#Intent;scheme=solidopinion;package=com.solidopinion.android;end";}}
var ua=navigator.userAgent;var effects_icons={vote_up:"1",vote_up_higher:"1",vote_up_lower:"1",vote_down:"2",vote_down_lower:"2",vote_down_higher:"2",like:"3",like_lower:"3",like_higher:"3",dislike:"4",dislike_lower:"4",dislike_higher:"4",turn_off_replies:"g",message_text_edit:"j",message_remove:"D",moderator_menu_block:".",moderator_menu_delete:"x",moderator_menu_spam:"o",ignore_user:"9",prevent_from_posting:"e",add_image:"7",own_image:"7",other_image:"7",own_video:"c",other_video:"c",change_name:"b",change_name_higher:"b",change_name_lower:"b",change_avatar:"a",reputation_bomb:"6",own_remark:"k",other_remark:"k",own_emotion:"5",other_emotion:"5",spam_mark:"L",approve_post:"",delete_post:"",spam_post:"l",transfer_points:"m",own_format:"K",other_format:"K",make_immune:"I",cancel_all_effects:"C",pin_to_top:"P"};function ctoc(classname){return effects_icons[classname];}var signup_login_box=do_logout=social=key1=key2=comments_quantity=$();function init_globals(){signup_login_box=$("#signup_login_box");social=$("#social");key1=$("#key1");key2=$("#key2");comments_quantity=$("#comments_quantity");}var myNav=navigator.userAgent.toLowerCase(),iem=(myNav.indexOf("msie")!=-1)?parseInt(myNav.split("msie")[1]):false;var is_firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var iOS=(navigator.userAgent.match(/(iPad|iPhone|iPod)/ig)?true:false);var android=(navigator.userAgent.match(/(Android)/ig)?true:false);var infinite_load=false,show_buttom=false,noblink=false,break_one_update_interval=false,focus_on_comment_id=0,site_game_rules={},help_tab_show=true,can_buy_points=true,comment_price_enabled=false,try_to_place_widget=false,frame_id=so_config.frame_id?so_config.frame_id:"sfIframe",cdn_url=so_config.cdn_url,api_url=so_config.api_url,base_url=so_config.base_url,frontend_path=so_config.frontend_path,frontend_base_url=so_config.frontend_base_url,site_base_url=so_config.site_base_url,com_groupe_order=so_config["community-tabs"]?so_config["community-tabs"]:"",alowed_sn=[],snetworks=so_config["social-networks"]?so_config["social-networks"]:"facebook,vkontakte,twitter,google,yahoo",payment_gateways=so_config["payment-gateways"]?so_config["payment-gateways"]:"paypal,facebook,sms",alowed_pg=[],base_domain="solidopinion.com",forum_pathname=so_config.thead,ssid=so_config.ssid,show_community=so_config["community-enabled"],skip_empty_line=so_config["skip_empty_line"]&&so_config["skip_empty_line"]=="true"?true:false,show_help=so_config["help-enabled"],com_max_lines=parseInt(so_config["community-length"])>0?parseInt(so_config["community-length"]):"",recomend_max_lines=10,reqest_number=0;if(typeof(show_help)!="undefined"&&show_help=="false"){show_help=false;}else{show_help=true;}var known_sn=["facebook","vkontakte","twitter","google","yahoo"],sn;for(var n in known_sn){sn=known_sn[n];if(snetworks.indexOf(sn)>=0){alowed_sn.push(sn);}}var known_pg=["paypal","facebook","sms"],pg;for(var n in known_pg){pg=known_pg[n];if(payment_gateways.indexOf(pg)>=0){alowed_pg.push(pg);}}var message_list={total:0,data:[]},game_ranks={},game_rules={},user_lock="",ad_count=0,current_site={},count_comments=10,datetime_format="Relative",modificator=1,site_avatar_url="",destination=0,rank_name=user_code="",selected_message={},current_user=getUsersObject(),raw_comment_text="",jcrop_api,boundx,boundy,topoffset=0,show_history=0,is_authentificate=false,disableLinks=true,last_height=0,image_code="",can_ajax=true,loading_timeout="",total_points=0,payment_window,login_window,base_message="",order="",vimage_visible=false,blocks_loaded=false,current_collor_settings={},fast_message_signup={},show_rating=false,post_custom_rating=0,icon_set_multiplier=0,icon_set_count=70,message_list_hash="",reply_raw_data={},viewer=[],forum_hash="",dropdown_timer=0,dropdown_sort_timer=0,widget_type=0,defoult_comment_price=11,topics_list={total:0,data:[]},times_messagelist_loaded=0,base_category="";function getImageBaseUrl(){return cdn_url+so_config.version;}var _orig=[];function getOriginals(){return _orig.toString();}function setOriginals(mid){_orig.push(mid);}function setSmileGroupe(site){if(site&&site.embed&&site.embed.smile_group){var g=site.embed.smile_group;icon_set_multiplier=((site.embed.smile_group-1)*256);icon_set_multiplier=icon_set_multiplier?icon_set_multiplier:1;if(g==1){icon_set_count=69;}else{if(g==2){icon_set_count=71;}else{if(g==3){icon_set_count=90;}}}}}function resizeAd(id,w,h){$("iframe#ad_"+id).css({"height":h+"px","width":w+"px"});}function getBlockContent(name,count,id){var content="";if(name=="ad"){content='<iframe id="ad_'+ad_count+'" width="0" height="0" scrolling="no" frameborder="0" allowtransparency="true" '+'role="application" style="border: medium none; overflow: hidden;" '+'src="'+frontend_base_url+"frontend/adframe.php?a="+ad_count+"&sn="+getSiteName()+"&pos="+id+'" horizontalscrolling="no" verticalscrolling="no"></iframe>';ad_count++;}else{if(name=="global"){return"";content='<div id="engageya_tag"><script type="text/javascript">var dbnwid=41818,dbnpid=95787,dbnwebid=45869,dbnlayout=15,dbncolor="36659e",dbntitlefontsize="14",dbnbgcolortype=1,dbnheader="Recommended across all internet",dbnremindercolor=2,dbn_protocol=(("https:"==document.location.protocol)?"https://":"http://");(function(){var s=document.createElement("script");s.type="text/javascript";s.async=true;s.id="grazit_script";s.class="grazit_script";s.src=dbn_protocol+"widget.engageya.com/sprk.1.0.2.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(s);})();<\/script></div>';}else{if(name=="local"||name=="last"){var sot_config={};$.extend(true,sot_config,so_config);sot_config.type="recommendet";sot_config.widget_name=name;sot_config.version=sot_config.version==""?"-":stripTrailingSlash(sot_config.version);sot_config.csu=current_site.url;sot_config.bsize=count&&count>1?"big":"small";sot_config.count=recomend_max_lines;sot_config.color=current_collor_settings;if(typeof id!="undefined"&&id!=""){sot_config.frame_id=id;id=' id="'+id+'"';}else{sot_config.frame_id="";id="";}sot_config.rlang=sys_lang;var so_config_sting=encodeURIComponent(JSON.stringify(sot_config));content="<iframe "+id+' width="100%" height="0px" scrolling="no" frameborder="0" allowtransparency="true" '+'role="application" style="border: medium none; overflow: hidden;" '+'src="'+so_config.siteuri+"?so_config="+so_config_sting+'" horizontalscrolling="no" verticalscrolling="no"></iframe>';}}}return content;}function setBlocks(blocks){if(blocks_loaded){return;}blocks_loaded=true;if(blocks==undefined){return;}var t=0;var b=0;var r=blocks.bottom_right_block;var l=blocks.bottom_left_block;if((r!="ad"&&l!="ad")&&(l==r&&r!="none"||r=="none"&&l!="none"||l=="none"&&r!="none")){l=l=="none"?r:l;b=2;$("#bottom_left_box").html(getBlockContent(l,b,"btl")).parent("td").css({width:"100%"});}else{if(r!="none"){$("#bottom_right_box").html(getBlockContent(r,0,"btr"));if(r!="ad"){$("#bottom_right_box").parent().css({"vertical-align":"top"});}b++;}if(l!="none"){$("#bottom_left_box").html(getBlockContent(l,0,"btl"));if(l!="ad"){$("#bottom_left_box").parent().css({"vertical-align":"top"});}b++;}}if(b>0){$(".box-container-bottom").addClass("box-container-has-data");}r=blocks.top_right_block;l=blocks.top_left_block;if((r!="ad"&&l!="ad")&&(l==r&&r!="none"||r=="none"&&l!="none"||l=="none"&&r!="none")){l=l=="none"?r:l;t=2;$("#top_left_box").html(getBlockContent(l,t,"tlb")).parent("td").css({width:"100%"});}else{if(r!="none"){$("#top_right_box").html(getBlockContent(r,0,"trb"));if(r!="ad"){$("#top_right_box").parent().css({"vertical-align":"top"});}t++;}if(l!="none"){$("#top_left_box").html(getBlockContent(l,0,"tlb"));if(l!="ad"){$("#top_left_box").parent().css({"vertical-align":"top"});}t++;}}if(b>1||t>1){$("body").css({"min-width":"250px"});sfSetminWidth(250);}else{if(b==1||t==1){$("body").css({"min-width":"250px"});sfSetminWidth(250);}else{}}}function setVtype(type){if(!type.voting_type){return;}type=type.voting_type;if(!type||type=="both"||(type!="vote"&&type!="like")){return;}$(".vtype").remove();var t="vtype1";if(type=="vote"){t="vtype2";}$("body").append($('<style class="vtype" type="text/css">.'+t+"{display:none !important;}</style>"));}var checkIsForum=function(){if(so_config&&so_config.widget_type=="forum"){return true;}else{if(Number(widget_type)==2&&so_config.widget_type!="comments"&&so_config.widget_type!="rating"){return true;}}return false;};function deleteFromStorage(mess_id){mess_id=mess_id?mess_id:"";try{localStorage.removeItem(getThreadId()+mess_id);}catch(e){}}function getFromStorage(mess_id){mess_id=mess_id?mess_id:"";var data="";try{data=localStorage.getItem(getThreadId()+mess_id);}catch(e){}return data;}function saveToStorage(mess_id,text){mess_id=mess_id?mess_id:"";try{localStorage.setItem(getThreadId()+mess_id,text);}catch(e){}}function clearStorage(){for(var i in localStorage){try{localStorage.removeItem(i);}catch(e){}}}function setFontSize(size){$(".customsize").remove();var s=parseInt(size);var style="#currentusergamerulespage span, .comment-content,.comment-content .mod-desc .time-date,.btn.comment-btn,.btn.select-btn,ul.bottom-nav-comments li.last,ul.bottom-nav-comments li a,"+".popover.goBack.right,.popover-comments .popover-content,.popover-content ul.bottom-nav-comments li,.tab-left .wrap-popover-list-com,.tab-right .wrap-popover-list-com,i.icon-quotes,"+".popover-list-inner,.pencil-box span.points,.name-desc .number-posts,.postbox-activity p,span.smaller,#currentusergamerulespage li,#currentusergamerulespage span {"+"font-size: "+(12+s)+"px;"+"}"+"a.expert-icon{"+"font-size: "+(30+s)+"px;"+"}"+'body,#action_message,.comment-content .mod-desc,ul.social-box-com li input[type="text"], ul.social-box-com li input[type="password"],.insert-img-url input[type="text"],.modalComments .modal-body h4,.modalComments h4,'+".modalComments h4,.modalComments .text-message, .modalComments .text-message-edit,.error-new button.close,.user-info > p,.user-info a,div.user-info-myprofile div.wrap-popover-list div.popover-list-inner,"+"div.user-info-myprofile div.wrap-popover-list div.popover-list-inner a,div.user-info-myprofile div.wrap-popover-list div.popover-list-inner a,.rank-myprofile,.rank-myprofile span,div.buy-points > a.buy_points,"+".tab-left h2, .tab-right h2,.user-section .name-desc span a,.member-since,.simple-action label,.simple-action > .modal-body > p.action-desk,.simple-action > .modal-body > span.ainput-end,.simple-action button,.simple-action .btn,"+"input.avatar,.active-user-photo-button .upload-user-image-btn,.buy-cancel p{"+"font-size: "+(13+s)+"px;"+"}"+"input#fakename{"+"font-size: "+(16+s)+"px !important;"+"}"+".edit-profile-input,.comments-header h3,.popover-comments .popover-content a[class^='userinfo_'],.textarea-wrapper .textarea,div.comment-div,.modalComments .modal-body .control-group .controls input,.modalComments .modal-body .control-group .hours,"+".modalComments .modal-body .control-group .hours_title,.modalComments .text-message-edit,.modalComments .title-message,.popover-top-text input,.editabletext:after,.tab-left h2 select, .tab-right h2 select,.select-site .width,"+".simple-action > .modal-body  .calc_points,.postbox-rewards h2,.postbox-rewards p,.your_rating,.cat-box,.select-cat input,.comment_price_container input.comment_price,.comment_price_container input.comment_price_count"+"{"+"font-size: "+(14+s)+"px !important;"+"}"+".update-my-rating,#get_for_my_site,.postbox-activity span.system-color,h4.main-error,.txt-wrapp-after,.update-my-rating,#get_for_my_site,.postbox-activity span.system-color,h4.main-error,.txt-wrapp-after"+"{"+"font-size: "+(11+s)+"px;"+"}"+'.user-info-myprofile span[data-field-name="name"],.user-info-myprofile #v_profile_user_name,.rating > span, .rating-display > span{'+"font-size: "+(15+s)+"px;"+"}"+".comment-content a.link-title-desc,.icon-arrow-btn,.icon-hiding-comment,.user-info h3{"+"font-size: "+(17+s)+"px;"+"}"+'.user-section .number,.icon-pined:before,select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input,'+".modalComments .modal-header h3,.user-section .number,#contact_us_popap h3{"+"font-size: "+(11+s)+"px;"+"}"+".icon-pencil, .icon-pined:before{"+"font-size: "+(16+s)+"px;"+"}"+".wating_moderation{font-size: "+(19+s)+"px;}"+".a.expert-icon{font-size: "+(30+s)+"px;}"+".icon-voted-up:before,.icon-voted-down:before,i.icon-arrow-dislike2, i.icon-arrow-like2{font-size: "+(21+s)+"px;}"+".icon-facebook, .icon-vk, .icon-twitter, .icon-google, .icon-so, .soicon,.icon-yahoo{font-size: "+(37+s)+"px;}"+".bottom-nav-comments i,.icon-arrow-btn{font-size: "+(20+s)+"px;}"+"i.icon-dropdown-inner{font-size: "+(28+s)+"px;}"+"ul.box-icon-action-menu li a{font-size: "+(27+s)+"px;}"+".close-icon{font-size: "+(26+s)+"px;}"+".icon-ok-input{font-size: "+(24+s)+"px;}"+"ul.share-comment-menu li a.soicon{font-size: "+(22+s)+"px;}"+".icon-rank-item,.site-rating > span,.post-rating > span{font-size: "+(20+s)+"px;}";$("body").append($('<style class="customsize" type="text/css">'+style+"</style>"));}function setColor(color){var c={};if(color==undefined){color=so_config.colors;}else{var sc=so_config.colors;c["b"]=sc&&sc.b?sc.b:color.color_b?color.color_b:false;c["d"]=sc&&sc.d?sc.d:color.color_d?color.color_d:false;c["l"]=sc&&sc.l?sc.l:color.color_l?color.color_l:false;c["n"]=sc&&sc.n?sc.n:color.color_n?color.color_n:false;c["s"]=sc&&sc.s?sc.s:color.color_s?color.color_s:false;c["t"]=sc&&sc.t?sc.t:color.color_t?color.color_t:false;c["i"]=sc&&sc.i?sc.i:color.color_i?color.color_i:false;c["m"]=sc&&sc.m?sc.m:color.color_m?color.color_m:c["b"]?c["b"]:false;c["i_back"]=sc&&sc.i_back?sc.i_back:color.input_background?color.input_background:false;c["i_bord"]=sc&&sc.i_bord?sc.i_bord:color.input_border_color?color.input_border_color:false;c["pp_bord"]=sc&&sc.pp_bord?sc.pp_bord:color.popup_border_color?color.popup_border_color:false;c["bt_txt"]=sc&&sc.bt_txt?sc.bt_txt:color.button_color?color.button_color:false;c["pr_butt"]=sc&&sc.pr_butt?sc.pr_butt:color.primary_button?color.primary_button:false;c["se_butt"]=sc&&sc.se_butt?sc.se_butt:color.secondary_button?color.secondary_button:false;}current_collor_settings=c;$(".customcolor").remove();var styles="";if(c.i_back){styles+='textarea, input[type="text"], div.comment-div{background-color:#'+c.i_back+" !important;}";}if(c.i_bord){styles+='.input-border-color, textarea, input[type="text"],div.comment-div,.input-border{border-color:'+hexToRgb(c.i_bord,"0.99")+" !important;}";}if(c.pp_bord){styles+=".popover-comments .arrow:after{border-right-color:#"+c.pp_bord+" !important;}";styles+=".sort-header ul,.popover,.popup-border-color, .popover-comments, .dropdown-menu{border-color:"+hexToRgb(c.pp_bord,"0.99")+" !important;}";styles+=".popover-comments .arrow{border-right-color:"+hexToRgb(c.pp_bord,0.99)+"!important;}";}if(c.bt_txt){styles+=".primary-button, .secondary-button, .primary-button:hover, .secondary-button:hover, .button-color{color:#"+c.bt_txt+" !important;}";}if(c.pr_butt){styles+=".primary-button  {"+getButtonCss(c.pr_butt)+"} .primary-button{text-shadow:none !important;}";}if(c.se_butt){styles+=".secondary-button {"+getButtonCss(c.se_butt)+"} .secondary-button{text-shadow:none !important;}";}if(c.m){styles+=".sort-header .sort-menu ul,.popap-color, .popover-top,.popover-comments,.dropdown-menu,a.category-box, div.tooltip .tooltip-inner, #pop_text_input{background-color:#"+c.m+"!important;}"+".nodat{border-color:#"+c.m+" !important;}"+".popover-comments .arrow:after{border-right-color:#"+c.m+" !important;}"+"#pop_text_input .arrow:after {border-top-color:#"+c.m+" !important;}";}if(c.b&&c.b!=="transparent"){c.b="#"+c.b;}else{c.b="transparent";}styles+=".widget-background,input[type=text],div.comment-div,body,.editabletext:after{background-color:"+c.b+";}"+".popover-top .arrow:after{border-bottom-color:"+c.b+";}"+".nodat{border-color:"+c.b+" !important;}";if(c.n){styles+='.sort-menu a,.link-color,.btn-custom,div.buy-points > a.buy_points,#comments-disc-nav a:hover,#comments-disc-nav a.act,#comments-disc-nav a,name-desc>span>a,.less,.more,#display_name,[class^="userinfo_"],[class^="topicinfo_"],a[class^="foruminfo_"],div.wrap-comments-content a.reply,a:hover.arrow-author,.icon-so,a:hover.icon-facebook, a:hover.icon-vk, a:hover.icon-twitter, a:hover.icon-google, a:hover.icon-yahoo,a.nodat,a[class^="categoryinfo_"],.reload_comments, a#my_threads_tab, .moderator_menu_spam > a.link-moderator{color:#'+c.n+" !important;}";styles+=".lighter_name_color{color: "+lighterColor(c.n,20)+"!important;}";styles+=".darker_name_color{color: "+darkerColor(c.n,20)+"!important;}";}if(c.t){styles+=".main-color{color:#"+c.t+" !important;},span.U{border-bottom-color:#"+c.t+" !important;}";styles+="#comments-disc-nav .dropdown-menu a,.dropdown-menu a,.sort-menu li a{color:#"+c.t+"!important;}";}if(c.s){styles+="ul.social-box-com li,.by,.post-text,.icon-pencil,.number,ul.bottom-nav-comments li:not(:last-child):after,.system-color,.vimage-desk,.icon-facebook, .icon-vk, .icon-twitter, .icon-google, .icon-yahoo, .soicon,.editabletext:after,.editableonclick:hover,.category-box .cat-span,li.topicThem,li.middle-dot, .wrapprofilepoints .popover-list-inner:not(:last-child):after{color:#"+c.s+" !important;}"+".popover-bottom-arrow .arrow:after, .border-level-bottom,.bottom-border{border-bottom-color:"+hexToRgb(c.s,0.3)+" !important;}"+".re-full{border-left-color:"+hexToRgb(c.s,0.3)+" !important;}"+".popover.top .arrow{border-top-color:"+hexToRgb(c.s,0.3)+"!important;}"+"#top_menu_list .caret,.select-cat .caret,#top_menu_list .caret,.category-box .caret,.sort-menu .caret{border-top-color:#"+c.s+" !important;}"+"#navigation .caret{border-left-color:#"+c.s+" !important;}"+".jcrop-holder{border-color:#"+c.s+" !important;}"+".comments-disc-nav,.footer-comments,.border-level, .user-sect-ion,.tab-left h2, .tab-right h2 ,div.user-info-myprofile div.bottom-myprofile, .comments-header,ul.box-icon-action-menu,.modalComments,.modalComments .text-message-edit,div.box-container-has-data,.category-box,li.topicThem,#category,#category.comments_demo > li:first-child.comment, #navigation, #comments > li, .child-container .padd-top-box, .child-border, #currentuseractivitypage > .grouper,.border-s,.border-p,.border-m,.comm-on-site-title,#currentuseractivitypage .date-activity,.activity-col .grouper{border-color:"+hexToRgb(c.s,"0.3")+" !important;}"+".dropdown-menu li > a:hover,.nav > li > a:hover, .nav > li > a:focus,.sort-menu ul > li > a:hover,.sort-menu ul > li > a:focus{background-color:#"+c.s+"!important;}";}if(c.l){styles+=".like-color, .message-success{color:#"+c.l+" !important;}";}if(c.d){styles+=".dislike-color, .message-error,.moderator_menu_spam > a{color:#"+c.d+" !important;}";}if(c.i){styles+=".star-color, .rating > span, .rating-display > span{color:#"+c.i+"}";}if(is_mob()){styles+=".mobile-check{display:block;}";}else{styles+=".mobile-check{display:none;}";}$("body").append($('<style class="customcolor" type="text/css">'+styles+"</style>"));}function getTheredHash(code){var h=so_config.hash;h=h.replace(/#sot_([^#]+)/,"").replace(/#sou_([^#]+)/,"");return h;}function getThredUrl(){var curent_url=so_config.parent_href;curent_url=curent_url.replace("%23so","#so").replace(/#sot_([^#]+)/i,"").replace(/#sou_([^#]+)/i,"").replace(/#soa_([^#]+)/i,"").replace(/#sol-([^#]+)/i,"");return curent_url;}function getUrlForMobileApp(){var l=document.createElement("a");var t=getThredUrl();l.href=t;var domain=l.protocol+"//"+l.hostname;var url=t.replace(domain,"");if(!url){url="/";}var u="solidopinion://"+getSiteName()+"/"+encodeURIComponent(domain)+"/"+encodeURIComponent(url);l=null;return u;}function sharer(purl,sys,text){var ptitle=so_config.social_title,url="",tmpurl=[],i;if(sys=="V"){url="http://vk.com/share.php?";url+="url="+encodeURIComponent(purl);url+="&title="+encodeURIComponent(ptitle);url+="&description="+encodeURIComponent(text);url+="&noparse=true";}else{if(sys=="F"){url="http://www.facebook.com/sharer.php?";url+="&u="+encodeURIComponent(purl);}else{if(sys=="T"){url="https://twitter.com/share?";tmpurl=purl.split("#");for(i in tmpurl){if(i==0){purl=tmpurl[i];}else{if(i==1){purl+="#"+tmpurl[i];}else{purl+="%23"+tmpurl[i];}}}url+="url="+encodeURIComponent(purl);url+="&text="+encodeURIComponent(text);url=frontend_base_url+"frontend/embed/share/?page_url="+encodeURIComponent(url);}}}window.open(url,"share","toolbar=0,status=0,width=626,height=436");}function getMessageGlobalUrl(code){var h=getTheredHash(code);return getThredUrl()+h;}function socialShare(code,sys,el){var text="",purl="";if(getMes(code).hidden!="yes"){text=shortString(getMes(code).body.text,100);}else{text=getMes(code).body.text+"..";}purl=getThredUrl();var type="facebook";if(sys=="T"){type="twitter";}else{if(sys=="V"){type="vkontakte";}}var get_link_data={};get_link_data.messagecode=code;get_link_data.share_type=type;if(checkIsForum()){var url=/#sol-([^-#]+)-?([^-#]{40})?/i.exec(getThreadId());if(url){if(url[1]&&typeof url[1]!="undefined"){get_link_data.forum_code=url[1];}}}apiRequest({api:"Message/getlink/",data:get_link_data,type:"GET",async:false},function(data){purl+="#soa_"+data.code;if(sys=="s"){el.parents(".comment-content").children(".share-link-container").html('<ul><li"><input readonly="readonly" style="font-size: 14px;" onclick="this.select();" type="text" value="'+purl+'"></li></ul>');return;}else{sharer(purl,sys,text);}});}function getProtocol(){return"//";}function getThreadTitle(){return so_config.thread_title;}function paymentCompleted(){if(payment_window){payment_window.close();}if($("button[class^='save_']").length>0){$("button[class^='save_']").click();}else{if($(".buy-reward:visible").length>0){$(".buy-reward:visible").click();}else{if(checkIsForum()){openForum();}else{action_reload();}}}}function getSocialLink(el){var mess=getMessageData(el);}function AjaxResponceString(data,status){var t="";if(type==undefined||type==""){type="err";}if(typeof data=="object"){if(data.responseText&&data.responseText!=""&&!status){t=data.responseText;}else{if(data.status&&data.status!=""){t=data.status;}}}else{if(typeof data=="string"){t=data;}}if(t==""){if(!status){t="error";}}return t;}function showMess(data,el,type,api_dat){var t=AjaxResponceString(data);if(api_dat==undefined){api_dat="default";}if(t=="transfer_not_allowed"||t=="access denied"){reload_frame();return false;}if(t=="401"){logoutFrontend(function(){$(".go-comment-button,#signup_login_box").show();});return false;}if(el==undefined||el==""||!$("#"+el).length>0){el="message_box";}if(el=="message_box"){placeWidget();}if(t=="cant_apply_effect"&&selected_message.code){type="err";el="message_box_"+selected_message.code;}if(type=="err"){showMessageError(el,t,api_dat);}else{showMessageSuccess(el,t,api_dat);}if(t=="not_enough_money"||t=="not_enough_points"){windowOpenBuyPoints(total_points);}if(t=="user_is_not_allowed_on_this_site"||t=="403"){showContactUs();}_resize();}function openUserPublicProfile(uid){if(uid==undefined||!uid){uid=getCurrentUserCode();}window.open(base_url+"user/"+uid,"_blank").focus();}function openUserProfile(){window.open(base_url+"profile","_blank").focus();}function hideErr(justerr){if(justerr){$(".message-error").remove();}else{$(".error-new").remove();}}function showTryAgain(){$("#contentWindow").empty().html("<h4 class='main-error'>"+_("error_widget_loading_to_long")+"</h4>");crosFramePost({"height":$("body").height()+20},"resizeFrameById");}function showNoSite(){$("#contentWindow").empty().html("<h4 class='main-error'>"+_("error_widget_is_not_active")+"</h4>");crosFramePost({"height":$("body").height()+20},"resizeFrameById");}function showEnbedIncorect(){$("#contentWindow").empty().html("<h4 class='main-error'>Embed site url is incorrect</h4>");crosFramePost({"height":$("body").height()+20},"resizeFrameById");}function getSiteName(){return so_config.sitename;}function getThreadId(){if(checkIsForum()){return so_config.thead;}var parsed_thread_url=/(?:https?:)?(?:\/\/)?(?:[^\/]+\.[^\/]+)?([^#]+)/i.exec(so_config.thread_url)[1];if(parsed_thread_url==""||parsed_thread_url=="undefined"||!parsed_thread_url){parsed_thread_url=false;}return parsed_thread_url?parsed_thread_url:so_config.thead;}function getVotingType(){return so_config.voting_type?so_config.voting_type:"both";}function recalk_points(val){if(sfGetAuth()){val=Math.abs(parseInt((val)));var points_price=Math.abs(parseInt($("#points_price").html()));total_points=val*points_price*modificator;if(isInteger(total_points)&&total_points>=1){$("#total_points").text(_("effect_choose_image_upload_and_atach_for")+" "+addCommas(total_points)+" "+nouns("fo_points",total_points));}else{$("#total_points").text("");}}else{$("#total_points").html("");}}function getVideoFrame(type,code){if(type==1){return'<iframe src="'+getProtocol()+"www.youtube.com/embed/"+code+'?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>';}else{if(type==2){return'<iframe frameborder="0" src="'+getProtocol()+"www.dailymotion.com/embed/video/"+code+'"></iframe>';}else{if(type==3){return'<iframe src="'+getProtocol()+"player.vimeo.com/video/"+code+'"  frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';}}}}function isLocked(show_warning){var islocked=user_lock!="";if(islocked&&show_warning){showMess("user_lock");}return islocked;}function replaceAll(){$("div.comment-div div, div.comment-div p").replaceWith(function(){if($.trim($(this).html())=="<br>"||$.trim($(this).html())=="</br>"){return"<br>";}return"<br/>"+$.trim($(this).html());});}function remTag(selector){$(selector).each(function(){var el=$(this);el.after(el.html());el.remove();});}function setSiteRating(site){if(site&&site.rating){if((!so_config.widget_type||(so_config.widget_type!="comments"&&so_config.widget_type!="forum"))&&site&&site.embed&&site.embed.widget_type==1||(so_config.widget_type&&so_config.widget_type=="rating")){show_rating=true;$(".postbox").addClass("show_rating");if(sfGetAuth()){}$(".rating-voters, .site-rating").css({"display":"inline-block"});if(site.rating&&site.rating.current>=0){setStarRating(".site-rating",site.rating.current);}if(site.rating&&site.rating.voters>0){$(".rating-voters").html("("+site.rating.voters+")");}}}}function setCommentsQantify(val){if(val>0){$(".no_comment").remove();}comments_quantity.html(addCommas(val)+"&nbsp;"+nouns("top_total_comment",val));}function showContactUs(){var u=frontend_base_url+"frontend/embed/contact/?l="+getLangugeShortNameById(getCurrentLangId())+"&s="+getSiteName();window.open(u,"contactWin","width=635, height=620, toolbar=0");placeWidget();}function hideContactUs(){$("#contact_body").val("");$("#contact_us_popap").hide();}function getMessageData(obj){var mess=getMesObject();var mess_code="";if(typeof obj=="string"||isElement(obj)){obj=$(obj);}if(obj instanceof jQuery){mess_code=obj.closest(".postbox-comments").children(".message_code").val();}if(typeof mess_code!="undefined"&&mess_code.length>0){mess=getMes(mess_code);}return mess;}function gatLastMessCodeForMore(){if(message_list.next!=""){return message_list.next;}return false;}function addToMesslist(mess){message_list.data.push(mess);}function addToTopiclist(topic){topics_list.data.push(topic);}function updateUserStats(author){for(var i in message_list.data){var a=message_list.data[i].author;if(a.code==author.code){$.extend(true,message_list.data[i].author,author);}}if(message_list.viewer.code==author.code){$.extend(true,message_list.viewer,author);}}function updateSiteRating(rating){if(rating&&rating.current>=0&&rating.voters>=0){if(message_list.site&&message_list.site.rating){message_list.site.rating.current=rating.current;message_list.site.rating.voters=rating.voters;}}}function getMessagesList(count,messagecode,suc_func,clear_cache,err_func){function succsses(res){times_messagelist_loaded++;if(res.site&&res.site.avatar_url){site_avatar_url=res.site.avatar_url;}if(res){if(res.hash){message_list_hash=res.hash;}if(res.viewer){$("#main_avatar").attr("src",getAvatar(res.viewer,"S",true));}if(res.ischanged=="no"){clear_cache=false;}updateMesslist(res,clear_cache);updateRewardsCount();updateActivityCount();var u=getCurrentUser();if(u&&u.rating&&(Number(widget_type)==1&&so_config.widget_type!="comments"&&so_config.widget_type!="forum")){setStarRating("#post_rating",u.rating);$(".update-my-rating").show();}else{$(".update-my-rating").hide();}if(message_list.site&&message_list.site.embed){setColor(message_list.site.embed);setVtype(message_list.site.embed);setBlocks(message_list.site.embed);if(message_list.site.embed.infinite_load&&message_list.site.embed.infinite_load!="0"){infinite_load=true;}else{infinite_load=false;}}}if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}$(".first-preloader").remove();$("body").attr("style","");}if(clear_cache==undefined){clear_cache=false;}var comments=[];if(typeof(count)==="undefined"){count=100;}if(typeof(messagecode)==="undefined"){messagecode="";}if(typeof(show_history)==="undefined"){show_history="";}if(typeof(datetime_format)==="undefined"){datetime_format="Relative";}if(typeof(timezone)==="undefined"){timezone="America/Los_Angeles";}var order=getSortOrder(so_config.sitename);if(!order){order=current_site.embed&&current_site.embed.order?current_site.embed.order:"";}if(getSiteName()!=""){var data={count:count,messagecode:messagecode,show_history:show_history,datetime_format:datetime_format,timezone:timezone,thread_title:getThreadTitle(),order:order};if(message_list_hash&&!messagecode){data.thread_change_hash=message_list_hash;}if(getOriginals()){data.originals=getOriginals();}function areqest(){apiRequest({api:"Message/getlist/",type:"GET",data:data},function(res){show_history="0";succsses(res);},function(xhr){show_history="0";if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(xhr);}if(xhr.status=="401"){logoutFrontend();_resize();return 0;}if(xhr.responseText!=undefined&&(xhr.responseText=="site_not_found"||xhr.responseText=="404")){showNoSite();}else{if(xhr.responseText!=undefined&&(xhr.responseText=="messagecode_invalid"||xhr.responseText=="400")){data.messagecode="";areqest();return;}}comments="";$(".first-preloader").remove();$("body").attr("style","");showPageBody();_resize();});}if(fast_message_signup&&fast_message_signup.comment&&!reply_raw_data.parrent_id){post_custom_rating=getStarRating("#post_rating");var d={messagecode:fast_message_signup.parent,body:fast_message_signup.comment};if(show_rating){d.rating=post_custom_rating;}messageAdd({data:d},function(){areqest();resetCommentBox($("#comment_data"));});fast_message_signup={};}else{areqest();}}return false;}function hasChildComments(id){if(id&&message_list&&message_list.data&&message_list.data.length>0){for(var i in message_list.data){var mess=message_list.data[i];if(mess.parent&&mess.parent.code==id){return true;}}}return false;}function isCloneComment(id){if(typeof id=="number"){id=id.toString();}if(id&&id.indexOf("_clone")>2){return true;}return false;}function isVotedUpComment(mes){if(mes&&mes.parent_code&&mes.level==1&&!mes.is_pinned&&mes.stats.votes_down<=mes.stats.votes_up){return true;}return false;}function isVotedDownComment(mes){if(mes&&mes.parent_code&&mes.level==1&&!mes.is_pinned&&mes.stats.votes_down>mes.stats.votes_up){return true;}return false;}function focusOnComment(commen_id){if($("#comm_"+commen_id).length>0){var offset=$("#comm_"+commen_id).offset().top;setTimeout(function(){sfSetPagePosition(offset);if(!noblink){blinkElement("#comm_"+commen_id+" > .wrap-comments-content");}noblink=false;},350);}}function blinkElement(selector){for(i=0;i<3;i++){$(selector).fadeTo(300,0.3).fadeTo(300,1);}}function getMes(code,mesList){if(typeof mesList=="undefined"){mesList={};$.extend(mesList,message_list.data);}for(i in mesList){var c=mesList[i];if(c.code==code){return jQuery.extend(true,{},c);}}return getMesObject();}function getTopicInf(code,topList){if(typeof topList=="undefined"){topList={};$.extend(topList,topics_list.data);}for(i in topList){var c=topList[i];if(c.thread_code==code){return c;}}return getThreadObject();}function updateMesslist(m,clear_cache){if(m&&m.ischanged=="no"){return;}message_list.next=m.next;message_list.total=m.total;message_list.viewer=Object.size(m.viewer)>0?$.extend(true,message_list.viewer,m.viewer):m.viewer;message_list.site=m.site;message_list.forum_code=(typeof m.forum_code!=="undefined")?m.forum_code:"";message_list.forum_title=(typeof m.forum_title!=="undefined")?m.forum_title:"";message_list.thread_title=(typeof m.thread_title!=="undefined")?m.thread_title:"";if(clear_cache==true){message_list.data=m.data;}else{for(i in m.data){addToMesslist(m.data[i]);}}}function getCurrentUserPoints(){if(message_list.viewer&&message_list.viewer.code){return message_list.viewer.stats.points;}return 0;}function getCurrentUserCode(){if(current_user&&current_user.code){return current_user.code;}return"";}function is_html_mode(){if(current_user&&current_user.allow_html){return true;}return false;}function getCurrentUser(){if(message_list.viewer&&(message_list.viewer.code||message_list.viewer.is_removed==1)){return jQuery.extend(true,{},message_list.viewer);}else{if(viewer&&viewer.code){return jQuery.extend(true,{},viewer);}}return"";}function showPageBody(){$("body").attr("style","");$(".footer-comments, #comments_block, .comments-header").fadeIn();}function getCurrentUserGameRules(){var sruli={};if(message_list&&message_list.viewer&&message_list.viewer.game_rules){return message_list.viewer.game_rules;}else{if(current_user&&current_user.code){var user=current_user;sruli=user.game_rules;}}return sruli;}function getCurrentSiteGameRules(){if(site_game_rules){return site_game_rules;}return{};}function getCurrentUserStatus(){if(message_list.viewer&&message_list.viewer.status){return message_list.viewer.status;}return"guest";}function getMessageFormatedBody(mes){var remarked_text=mes.body.text;if(mes.body.formatting&&mes.body.formatting){var csv,redd,dd=[];for(i in mes.body.formatting){var reg=new RegExp("([0-9]+),([0-9]+),([ibu]+)","ig");csv=mes.body.formatting[i];do{redd=reg.exec(csv);if(redd){dd.push({start:parseInt(redd[1]),end:parseInt(redd[2]),id:String(redd[3]).toUpperCase()});}}while(redd);}remarked_text=generateHtml(mes.body.text,dd);}if(mes.body.effects&&mes.body.effects.remarks!=undefined){remarked_text=addRemarkToText(remarked_text,mes.body.effects.remarks);}return remarked_text;}function reload_frame(){location.reload();}function displayMessagesList(commentsList,afterfunc,type){if(type==undefined){type="";}var total=commentsList.total;if(total>0){setCommentsQantify(total);}setSiteRating(commentsList.site);setSmileGroupe(commentsList.site);if((typeof(commentsList.data)!="undefined")&&(!isEmptyObj(commentsList.data))){$("div.comments-header").find("h3").css("visibility","visible");showSortOrderMenu();var mesArray=commentsList.data;var user_code=getCurrentUserCode();var mesVotedArray=[];for(var i in mesArray){var mes=mesArray[i];mes.avatar_small=getAvatar(mes.author);mes.remarked_text="";mes.author_points=mes.author.stats.points;mes.short_parent_message_body="";mes.display_more="none";mes.parent_hidden=false;if(mes.parent_code!=""){pmes=mes.parent;mes.short_parent_message_body=shortString(pmes.body.text);mes.parent_message_body=pmes.body.text;mes.parent_hidden=pmes.hidden=="yes"?true:false;if(pmes.body.text.length>30){mes.display_more="inline";}}mes.emotion_parced={};var emo=mes.body.smiles;for(em in emo){var e=emo[em].code;if(mes.emotion_parced[emo[em].author.code]==undefined){mes.emotion_parced[emo[em].author.code]={emotions:[emNumberToName(e)],author:emo[em].author};}else{mes.emotion_parced[emo[em].author.code].emotions.push(emNumberToName(e));}if(e>594&&e<601){mes.emotion_parced[emo[em].author.code].has_large=true;}}mes.vimaage_parced=[];var ima=mes.body.images;for(im in ima){var i=ima[im];mes.vimaage_parced.push({date_added:i.date_added,img_src:i.image_url+"_L.jpg",imgs_src:i.image_url+"_S.jpg",author:i.author,type:"image",vkey:"",vid:""});}var vid=mes.body.videos;for(vi in vid){var i=vid[vi];mes.vimaage_parced.push({date_added:i.date_added,img_src:i.video_thumbnail,imgs_src:i.video_thumbnail,author:i.author,play_icon:play_icon,type:"video",vkey:i.code,vid:i.video_source_id});}mes.full_reply=view_type!=1;if(mes.html_mode){mes.body.raw=mes.body.text;}mes.body.text=filterTextForView(mes.body.text);if(mes.html_mode){mes.body.text=parseHtmlModedText(mes.body.text);}else{mes.body.remarked_text=getMessageFormatedBody(mes);}mes.action_menu=getActionMenu(mes,true);mes.has_child=hasChildComments(mes.code);mes.voted_up=isVotedUpComment(mes);mes.voted_down=isVotedDownComment(mes);if(mes.voted_up){mesVotedArray.push(mes.code);}mes.admin_action_menu=getAdminActionInlineMenu(mes);mes.ownership="own";if(mes.author.code!=user_code){mes.ownership="other";}mes.creation_date=mes.creation_date.replace(/\s/g,"&nbsp;");if(type==""){if(mes.level>1){var p_com=$("ul#comments div.postbox-comments:last");var p_level=parseInt(p_com.attr("level"));var p_id=p_com.attr("id");if(mes.level>p_level){$("#"+p_id+" > div.child-container").append($("#commentTemplate").tmpl(mes));}else{if(mes.level==p_level){p_com.after($("#commentTemplate").tmpl(mes));}else{if(mes.level<p_level){var element=p_com;for(var i=p_level-mes.level;i>0;i--){element=element.closest(".child-container").parent().closest(".child-container");}element.append($("#commentTemplate").tmpl(mes));}}}}else{$("#comments").append($("#commentTemplate").tmpl(mes));}}else{if(type=="newpost"){mes.level=1;$("#comments").prepend($("#commentTemplate").tmpl(mes));}else{if(type=="repost"){if(mes.level>3){$("#comm_"+mes.parent_code).after($("#commentTemplate").tmpl(mes));}else{$("#comm_"+mes.parent_code+" > .child-container").prepend($("#commentTemplate").tmpl(mes));}}}}}_resize();if(try_to_place_widget){setTimeout(function(){placeWidgetOnece();},200);}if(afterfunc&&{}.toString.call(afterfunc)==="[object Function]"){afterfunc();}if(focus_on_comment_id){if(!reply_raw_data.parrent_id){focusOnComment(focus_on_comment_id);}focus_on_comment_id=0;}if(reply_raw_data.parrent_id){var mess=getMes(reply_raw_data.parrent_id);openReplyMessageBox(mess,reply_raw_data.text);if($("#comm_"+String(reply_raw_data.parrent_id)).length>0){setTimeout(function(){reply_raw_data={};},300);}}if(gatLastMessCodeForMore()){$(".pagination > ul").show();}else{$(".pagination > ul").hide();}_resize();if(times_messagelist_loaded==1){for(var i in mesVotedArray){(function(ii){setTimeout(function(){blinkElement("#comm_"+mesVotedArray[ii]+" > .wrap-comments-content");},i*50);})(i);}}return true;}else{if(!total&&commentsList.ischanged!="no"){showNoComment();}else{if(total>0&&(!commentsList.data||commentsList.data.length==0)){showNoComment();}}}_resize();}function parseHtmlModedText(text){text=text.replace(new RegExp("\\[br\\]","g"),"<br>");text=text.replace(new RegExp("\\[b\\]","g"),'<span class="B">');text=text.replace(new RegExp("\\[/b\\]","g"),"</span>");text=text.replace(new RegExp("\\[i\\]","g"),'<span class="I">');text=text.replace(new RegExp("\\[/i\\]","g"),"</span>");text=text.replace(new RegExp("\\[u\\]","g"),'<span class="U">');text=text.replace(new RegExp("\\[/u\\]","g"),"</span>");text=text.replace(new RegExp("\\[s\\]","ig"),'<span class="S">');text=text.replace(new RegExp("\\[/s\\]","ig"),"</span>");text=text.replace(new RegExp("\\[strike\\]","ig"),'<span class="S">');text=text.replace(new RegExp("\\[/strike\\]","ig"),"</span>");text=text.replace(new RegExp("\\[p\\]","ig"),'<span class="P">');text=text.replace(new RegExp("\\[/p\\]","ig"),"</span>");text=text.replace(new RegExp("\\[pre\\]","ig"),'<span class="PRE">');text=text.replace(new RegExp("\\[/pre\\]","ig"),"</span>");text=text.replace(new RegExp("\\[blockquote\\]","ig"),'<span class="BL">');text=text.replace(new RegExp("\\[/blockquote\\]","ig"),"</span>");text=text.replace(new RegExp("\\[cite\\]","ig"),'<span class="CI">');text=text.replace(new RegExp("\\[/cite\\]","ig"),"</span>");text=text.replace(new RegExp("\\[a\\]([^\\[]+)\\[/a\\]","ig"),'<a href="$1" target="_blank">$1</a>');text=text.replace(new RegExp("href=([\\'\\\"]{1})(?!https?:\\/\\/)([^\\'\\\">]+)","g"),"href=$1http://$2");var d=document.createElement("div");d.innerHTML=text;return d.innerHTML;}function closeReplyBoxes(){$('div[id^="reply_"]').slideUp(200,function(){$(this).remove();});}function openReplyMessageBox(mess,text){var open=$("#reply_"+mess.code).length==0;closeReplyBoxes();$("div.action-container").empty();$(".box-icon-action-menu").slideUp();if(open){$("#comm_"+mess.code+" > div.child-container").prepend($("#replyCommentTemplate").tmpl({display_button:(sfGetAuth()?"block":"none"),display_comment_box:(sfGetAuth()?"none":"block"),avatar_reply_src:$("#main_avatar").attr("src"),messagecode:mess.code,parent_messagecode:mess.parent_code}));var sruli=getCurrentUserGameRules();if(!is_html_mode()&&widget_type==0&&sruli&&(Math.abs(sruli.pay_for_open)>0||sruli.pay_for_open==0)){comment_price_enabled=true;$("#comm_"+mess.code+" > div.child-container .comment_price_container").show();}if(is_html_mode()){$(".expert-icon").show();}_resize();if(!text){text=getFromStorage(mess.code);}if(text){$("#reply_"+mess.code).find("div.comment-div").html(text).addClass("expand-comment");}else{expandMessageBox("#reply_"+mess.code+" .comment-div");}setTimeout(function(){$(".reply-container").show();if(!text){$("#reply_"+mess.code).find("div.comment-div").focus();}_resize();},200);}}function filterTextForDB(el_selector){var html=filterComment($(el_selector).html());html=htmlspecialchars_encode(html);return html;}function filterTextForView(text){text=removeLastBr(text);return text;}function filterPlaceholder(text){if(text==""||text=="<span>"+_("main_comment_field_reply")+"</span>"||text=="<span>"+_("main_comment_field")+"</span>"||text=="<span>"+_("topic_title")+"</span>"||text=="<span>"+_("forum_title")+"</span>"||text=="<span>"+_("forum_description")+"</span>"||text=="<span>"+_("update_rating_field")+"</span>"){return"";}return text;}function filterComment(text){text=filterPlaceholder(text);text=text.replace(/<br>/ig,"[[br]]").replace(/&nbsp;/ig," ");var div=document.createElement("div");div.innerHTML=text;text=htmlspecialchars_encode(div.textContent).replace(/\[\[br\]\]/ig,"<br>");return text.trim();}function showNoComment(error){if(!error||typeof error=="undefined"){error=false;}else{$(".wrap-comments-content").hide();}$(".no_comment").remove();$("div.comments-header").find("h3").css("visibility","hidden");$("#comments").prepend($("#noCommentTemplate").tmpl({error:error}));}function showNoThreads(error){if(!error||typeof error=="undefined"){error=false;}else{$(".wrap-comments-content").hide();}$(".no_comment").remove();$("div.comments-header").find("h3").css("visibility","hidden");$("#comments").append($("#noThreadsTemplate").tmpl({error:error}));}function showNoForums(){$(".no_comment").remove();$("div.comments-header").find("h3").css("visibility","hidden");$("#comments").prepend($("#noForumsTemplate").tmpl());}function getNonFreePosition(text){var tlen,data={s:0,e:0};if(!text){return data;}text=text.replace(/&nbsp;/g," ");text=text.replace(/&nbsp;/g," ");text=text.replace("  "," ");var data_clone=$("<div>"+text+"</div>");data_clone.html(data_clone.html().replace(/\<br\>/g,""));var el=$(".nodat",data_clone);if(el.length>0){tlen=$(el.get(0)).text().length;var t1=htmlspecialchars_decode(text.replace(/\<br\>/g,""));data.s=t1.search('<span class="nodat bold main-color">');data.e=tlen+data.s;}return data;}function postMessageFrontend(comment,messagecode){function succsses(data){$(".comment-btn").removeClass("disabled");hideErr();data.message.level=1;var rating=post_custom_rating;if(messagecode){deleteFromStorage(messagecode);}else{deleteFromStorage();}if(type=="repost"){var parent_mess=getMes(messagecode);if(typeof parent_mess.level=="undefined"||parent_mess.level==""){parent_mess.level=1;}data.message.level=parseInt(parent_mess.level)+1;rating=getCurrentUser().rating;}data.message.author.rating=rating;updateSiteRating(data.message.thread_rating);addToMesslist(data.message);updateUserStats(data.message.author);setStarRating("span[data-authorcode='"+data.message.author.code+"']",rating);if(message_list.site){setSiteRating(message_list.site);}if(data.message.parent&&data.message.parent.author){}var total=((comments_quantity.html()!="")&&(comments_quantity.html()!=" "))?(parseInt(comments_quantity.html())+1):1;var raw_meslist={data:[data.message],total:total,next:"true"};displayMessagesList(raw_meslist,function(){if(data&&data.message&&data.message.is_visible==false){showMess("comment_hidden_because_points","message_box_"+data.message.code);break_one_update_interval=true;}if(type=="repost"){$("#reply_"+messagecode).remove();$(".go-reply-button").hide();setCommentsQantify(parseInt(comments_quantity.html()));}else{$(".go-comment-button").hide();resetCommentBox($("#comment_data"));non_free_reset($("#comment_data"));}_resize();},type);}var key=sfGetAuth(),container,part;var type="repost";var points_to_open=0;if(typeof messagecode=="undefined"){messagecode="";type="newpost";container=$("#comments-content").closest("form.message-add-form");part=container.data("comment_price_part");if(part=="3"){points_to_open=parseInt($("#comments-content .comment_price").val());}}else{container=$("#reply_"+messagecode+" form.message-add-form");part=container.data("comment_price_part");if(part=="3"){points_to_open=parseInt($("#reply_"+messagecode+" .comment_price").val());}}var pos=getNonFreePosition(comment);comment=filterComment(comment);if(!comment){if(type=="newpost"){showMess("error_no_text_in_comment_field","message_box");}else{showMess("error_no_text_in_comment_field","action_message");}$(".comment-btn").removeClass("disabled");return false;}if(key){if((getSiteName()!="")&&(getThreadId()!="")){var data={messagecode:messagecode,body:comment};if(points_to_open>0){data.points_to_open=points_to_open;data.visible_start_position=pos.s;data.visible_end_position=pos.e;}if(type=="newpost"&&show_rating){data.rating=post_custom_rating;$(".hide-rating").hide();}messageAdd({data:data},succsses);}}else{logoutFrontend();}return false;}function saveMessageEdit(){replaceAll();remTag("#text_edit_comment span.blur");var new_text=filterComment($.trim(htmlDecode($("#text_edit_comment").html())));if(!new_text){showMess("error_no_text_in_comment_field","action_message");return false;}if(is_html_mode()){new_text=parceMessageBeforePosting(new_text);}if(authCheck()){apiRequest({api:"Message/edit/",data:{messagecode:selected_message.code,body:new_text}},function(){action_reload();},"","action_message");}}function parceMessageBeforePosting(text){text=text.replace(/<br>/ig," <br> ").replace(/(\[\/?[a-zA-Z]*\])/ig," $1 ");var url1=/((www\..+?\.[^\s]+)|(https?:\/\/[^\s]+))/ig;return text.replace(url1,"[a]$1[/a]").replace(/\s<br>\s/ig,"<br>").replace(/(\s(\[\/?[a-zA-Z]*\])\s)/ig,"$2").replace(/\[a\]\[a\]/ig,"[a]").replace(/\[\/a\]\[\/a\]/ig,"[/a]");}function messageAdd(params,afterfunc){var data={thread_title:getThreadTitle()};if(is_html_mode()){params.data.body=parceMessageBeforePosting(params.data.body);}for(var i in params.data){data[i]=params.data[i];}var mess_box="";if(!data.messagecode){mess_box="message_box";}apiRequest({api:"Message/add/",data:data,async:true},afterfunc,false,mess_box);}function showAction(el,template,adddata,afterfunc){modificator=1;if(authCheck()){var points_price=el.attr("data-price");$(".action-container").empty();var container=$(".action-container",el.closest("div.comment-content"));var tdata={selected_message:selected_message,user_points:getCurrentUserPoints()};if(points_price){tdata.points_price=points_price;}if(adddata){$.extend(tdata,adddata);}container.append($(template).tmpl(tdata).hide().fadeIn(200));_resize();if(afterfunc&&{}.toString.call(afterfunc)==="[object Function]"){afterfunc();}$(".calc_points").each(function(){$(this).trigger("change");$(this).selectRange(10);});}}function apiRequest(params,succ,err,mess_box){function succsses(data,succ){hideErr(true);if(succ&&{}.toString.call(succ)==="[object Function]"){succ(data);}}if(!can_ajax){return;}if(params!=undefined&&params.api){can_ajax=false;var a=sfGetAuth();var data={sitename:getSiteName(),thread_url:getThreadId()};if(getCurrentLangId()!=getLangugeIdByShortName(sys_lang)){data.language_id=getLangugeIdByShortName(sys_lang);}if(ssid){data.sessionid=ssid;}if(a){data.a=a;}for(i in params.data){data[i]=params.data[i];}if(!params.type){params.type="POST";}$.ajax({url:api_url+params.api,data:data,type:params.type,dataType:"json",async:(params.type=="POST"&&typeof(params.async)=="undefined"?false:(typeof(params.async)!="undefined"?params.async:true)),success:function(data){can_ajax=true;succsses(data,succ);},error:function(data){can_ajax=true;if(data.status=="200"){succsses(data,succ);return;}if(err&&{}.toString.call(err)==="[object Function]"){err(data);}else{standartAjaxErrorHandler(data,params.api,mess_box);}ajax_complete();_resize();}});}}function standartAjaxErrorHandler(data,api,mess_box){var error_container=mess_box;hideErr(true);if(mess_box==undefined||!mess_box){error_container="action_message";}if(data!=undefined){if(data.status=="403"||data=="user_is_not_allowed_on_this_site"){if(data!="cant_apply_effect"&&data.responseText!="cant_apply_effect"){error_container="";}$(".action-container").empty().show();}if(data.status=="401"){logoutFrontend();return 0;}}showMess(data,error_container,"",api);if(api=="Message/add/"){$(".comment-btn").removeClass("disabled");}}function logoutFrontend(func){hideErr();if(widget_type==1){$(".hide-rating").hide();$(".expert-icon").hide();$("#comment_data").removeClass("revote");resetCommentBox($("#comment_data"));}if(payment_window){payment_window.close();}message_list_hash="";if(sfGetAuth()){$.ajax({url:api_url+"User/logout/",data:{a:sfGetAuth()},type:"POST",dataType:"json"});}setTimeout(function(){sfRemoveAuth();displayUserInfo();if(func&&{}.toString.call(func)==="[object Function]"){func();}},500);}function removeAllButComments(){$("ul#comments").hide();$("#general-comments > ul:not(#comments)").remove();$(".modalComments").remove();$(".pagination > ul").hide();}function displayCommunity(){removeAllButComments();$("ul#comments").after($("#templateCommunity").tmpl());$("#userpage").remove();$("#general-comments").fadeIn(200);newCommunityShow();_resize();}function newCommunityShow(){apiRequest({api:"Site/getcommunity/",type:"GET",data:{shortname:getSiteName()}},function(data){if(data==undefined){return false;}var comm_groupe_data={popular_thread:["top","getComunityMessage"],last_threads:["new","getComunityMessage"],top_by_points:["points","getComunityUsers"],popular_commentors:["activity","getComunityUsers"]};var com_groups=com_groupe_order.split(",",4);var groupe,shown=0,vplace="top",hplace="left";for(groupe in com_groups){var gx2=comm_groupe_data[com_groups[groupe]];if(gx2&&typeof window[gx2[1]]=="function"&&gx2[0]!==""){var temp=window[gx2[1]](data,gx2[0]);if(!temp){continue;}if(shown>=2){vplace="bottom";}if((shown+1)%2==0){hplace="right";}else{hplace="left";}$("#community .tab-container.tab-"+vplace+" div.tab-"+hplace).append(temp);shown++;}}_resize();});}function getComunityMessage(data,type){var t="top_threads";if(type=="new"){t="last_threads";}else{if(type!="top"){return false;}}if(data[t]!=undefined&&data[t].length>0){var d=[];data=data[t];var v,title,x=1;for(var i in data){if(x>com_max_lines){break;}v=data[i];var url="http://"+current_site.url+v[0];title=(v[1]!="")?v[1]:url;if(title.length>300){title=title.substr(0,297)+"...";}d[i]={message_id:v[3],url:url,title:title,total_posts:v[2],body:v[7],last_message_date:v[4],user_code:v[5],user_name:v[6],is_body_short:isLongMessage(v[7]),body_short:isLongMessage(v[7])?getShortMessage(v[7]):""};x++;}return($("#templateCommunityTt").tmpl({topthreads:d,title:_("community_"+type+"_threads_header")}));}}function getComunityUsers(data,type){var t="top_users";if(type=="activity"){t="popular_users";}else{if(type!="points"){return false;}}if(data[t]!=undefined&&data[t].length>0){var d=[];data=data[t];var x=1,z;for(i in data){if(x>com_max_lines){break;}z=data[i];d[i]={code:z.code,name:z.name,stats:z.stats,avatar:z.avatar_url?z.avatar_url+"_S.jpg":site_avatar_url!=""?site_avatar_url+"_S.jpg":default_avatar,rank:z.rank?z.rank:false};x++;}return($("#templateCommunityTu").tmpl({topusers:d,title:_("community_"+type+"_users_header")}));_resize();}return false;}function displayUserPage(uid){$("#comments-disc-nav .act").removeClass("act");removeAllButComments();var key=sfGetAuth();getUserByAkey(key,function(usr){current_code=usr.code;getUserPublic(uid,function(user){user.code=uid;user.avatar_url=getAvatar(user,"M",true);var sn=getSiteName();if(user.rank!=undefined){user.rank=user.rank[sn];}if(user.stats!=undefined){for(var key in user.stats){user.stats[key]=user.stats[key][sn];}}else{user.stats=getUsersObject().stats;}user.own=false;user.show_restore=((user.is_removed==1)&&(uid==current_code))?true:false;$("ul#comments").after($("#showProfile").tmpl(user));$("#general-comments").fadeIn(200);displayProfileComments(uid);_resize();placeWidget();});});}function resetMyProfile(){removeAllButComments();var uid=getCurrentUser().code;getUserPublic(uid,function(user){user.code=uid;if(user.avatar_url){current_user.avatar_url=user.avatar_url;if(message_list.viewer){message_list.viewer["avatar_url"]=user.avatar_url;}if(viewer){viewer["avatar_url"]=user.avatar_url;}}$("#main_avatar").attr("src",getAvatar(user,"S",true));user.avatar_url=getAvatar(user,"M",true);var sn=getSiteName();user.own=false;if(user.rank!=undefined){user.rank=user.rank[sn];}if(user.stats!=undefined){for(var key in user.stats){user.stats[key]=user.stats[key][sn];}}else{user.stats=getUsersObject().stats;}user.own=true;user.show_restore=true;$("ul#comments").after($("#showProfile").tmpl(user));inituploadAvatar(function(data){cropAvatar(data);},function(data){resetUserUpload();showMess(data,"action_message");});displayProfileComments(uid);_resize();placeWidget();});}function displayMyProfile(){removeAllButComments();var curuser=getCurrentUser();curuser.avatar_url=getAvatar(curuser,"M",true);curuser.own=true;curuser.show_restore=true;if(!curuser.location){curuser.location="";}$("ul#comments").after($("#showProfile").tmpl(curuser));$("#general-comments").fadeIn(200);inituploadAvatar(function(data){cropAvatar(data);},function(data){if(data&&data.status=="401"){logoutFrontend(function(){$(".go-comment-button,#signup_login_box").show();});return false;}resetUserUpload();showMess(data,"action_message");});displayProfileComments(current_user.code);_resize();}function displayProfileComments(user_code,from_mess_code){var data={usercode:user_code,count:10};if(from_mess_code){data.messagecode=from_mess_code;}$("#show_more_on_site").hide();$(".show_on_site").append($("#templatePreloader").tmpl());can_ajax=true;apiRequest({api:"Message/userlist/",type:"GET",data:data},function(mdata){$(".more-animation").remove();if(mdata&&mdata.data&&mdata.data.length>0){$(".comm-on-site-title").show();var v,d=[],data=mdata.data;for(var i in data){v=data[i];var body;if(v[11]){body=parseHtmlModedText(v[3]);}else{body=v[3];}d[i]={creation_date:v[1],url:"http://"+v[9]+v[2]+"#sot_"+v[0],replies_count:v[10],body:body,votes_up:v[4],votes_down:v[5],likes:v[6],dislikes:v[7]};}var next="";if(mdata&&mdata.next){$("#show_more_on_site").show();next=mdata.next;$("#show_more_on_site").attr("data-next",next);$("#show_more_on_site").attr("data-user_code",user_code);}else{$("#show_more_on_site").attr("data-next","");}$("ul#my_comments_on_site").append($("#templateMyCommentsOnSite").tmpl({mess:d}));_resize();}},function(data){var t=AjaxResponceString(data,true);if(t=="401"){logoutFrontend(function(){$(".go-comment-button,#signup_login_box").show();});return false;}$(".more-animation").remove();});}function displayMyActivity(){removeAllButComments();fillMyActivity(10);}function fillMyActivity(count){$("#show_more_aactivity").hide();$(".show_activity").append($("#templatePreloader").tmpl());can_ajax=true;getCurrentUserActyvity(getCurrentLangId(),count,function(activity_data){var show_more=activity_data.next;if($(".myactivitydisplay").hasClass("act")){removeAllButComments();if(message_list&&message_list.viewer){message_list.viewer.unread_messages=0;}updateActivityCount();$(".more-animation").remove();$("ul#comments").after($("#templateActivity").tmpl({activity:activity_data,show_more:show_more,show_more_count:count}));$("#general-comments").show();_resize();}});}function displayMyGameRules(){getSiteGameRules(function(data){removeAllButComments();displayMyGameRulesTmpl(data);});}function tryToShowHelpTab(){if(!isEmptyObj(game_ranks)||!isEmptyGamerules(game_rules)){$(".mygamerulesdisplay").show();}}function getSiteGameRules(suc_func){if(!isEmptyObj(game_rules)){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(game_rules);return true;}}apiRequest({api:"Site/getrules/",type:"GET",data:{shortname:getSiteName()}},function(res){if(res!=undefined&&res.data!=undefined){game_rules=res.data;}if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(game_rules);}},suc_func);}function getSiteGameRanks(suc_func){if(!isEmptyObj(game_ranks)){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(game_ranks);return true;}}apiRequest({api:"Site/getranks/",type:"GET",data:{shortname:getSiteName(),ranks_type:1}},function(res){if(res!=undefined&&res.data!=undefined){game_ranks=res.data;}if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(game_ranks);}},suc_func);}function calcGameRulesWithRules(el1,el2,sruli){if(el1 in sruli&&el2 in sruli){if(sruli[el1]!="-"&&sruli[el2]!="-"){return Math.min(sruli[el1],sruli[el2]);}if(sruli[el1]==sruli[el2]){return false;}if(sruli[el1]!="-"){return sruli[el1];}if(sruli[el2]!="-"){return sruli[el2];}}else{if(el1 in sruli){return sruli[el1];}else{if(el2 in sruli){return sruli[el2];}}}return false;}function getDoubleRules(el1,el2,sruli){var tmp={};if(el1 in sruli&&el2 in sruli){if(sruli[el1]!="-"&&sruli[el2]!="-"){tmp[el1]=sruli[el1];tmp[el2]=sruli[el2];return tmp;}if(sruli[el1]!="-"){tmp[el1]=sruli[el1];return tmp;}if(sruli[el2]!="-"){tmp[el2]=sruli[el2];return tmp;}}else{if(el1 in sruli){tmp[el1]=sruli[el1];return tmp;}else{if(el2 in sruli){tmp[el2]=sruli[el2];return tmp;}}}return false;}function remuvePricingGameRules(text){if(text==_("click_on_post_share")){return text;}return text.replace(/(\s*\([^\)]+\)\s*)/ig,"").toLowerCase();}function getFreeEffectName(code){var result="";if((typeof frontend_messages_data["default"]["to_"+code]!="undefined")&&(frontend_messages_data["default"]["to_"+code])){result=_("to_"+code);}else{result=remuvePricingGameRules(_(code));}return result;}function isEnruled(s,r){if(r in s&&s[r]!="-"){return true;}return false;}function displayMyGameRulesTmpl(sruli){var to_show=["help_bonuses","first_activity_bonus","read_thread","spent_1_day","click_on_post_share","help_power_moves","change_avatar","change_name","prevent_from_posting","ignore_user","reputation_bomb","cancel_all_effects","help_opp_for_expression","add_comment","add_image","embed_video","edit_comment","receive_reply","turn_off_replies","vote_up_received","vote_down_received","like_received","dislike_received","first_post","add_format","pay_for_open","add_emotion_to_coment","like_comment","dislike_comemnt","vote_up_comment","vote_down_comment","spam_mark","make_immune","pin_to_top"];var rules={},rname,tmp;for(var r in to_show){rname=to_show[r];if(rname=="help_bonuses"){if(isEnruled(sruli,"first_activity_bonus")||isEnruled(sruli,"spent_1_day")||isEnruled(sruli,"read_thread")||isEnruled(sruli,"click_on_post_share")){rules[rname]="help_bonuses";}else{continue;}}else{if(rname=="help_power_moves"){if(isEnruled(sruli,"change_avatar")||isEnruled(sruli,"change_name")||isEnruled(sruli,"prevent_from_posting")||isEnruled(sruli,"ignore_user")||isEnruled(sruli,"reputation_bomb")||isEnruled(sruli,"cancel_all_effects")){rules[rname]="help_power_moves";}else{continue;}}else{if(rname=="help_opp_for_expression"){if(isEnruled(sruli,"add_comment")||isEnruled(sruli,"add_image")||isEnruled(sruli,"embed_video")||isEnruled(sruli,"edit_comment")||isEnruled(sruli,"receive_reply")||isEnruled(sruli,"turn_off_replies")||isEnruled(sruli,"vote_up_received")||isEnruled(sruli,"vote_down_received")||isEnruled(sruli,"like_received")||isEnruled(sruli,"dislike_received")||isEnruled(sruli,"first_post")||isEnruled(sruli,"add_format")||isEnruled(sruli,"pay_for_open")||isEnruled(sruli,"add_emotion_to_coment")||isEnruled(sruli,"like_comment")||isEnruled(sruli,"dislike_comemnt")||isEnruled(sruli,"vote_up_comment")||isEnruled(sruli,"vote_down_comment")||isEnruled(sruli,"spam_mark")||isEnruled(sruli,"make_immune")||isEnruled(sruli,"pin_to_top")){rules[rname]="help_opp_for_expression";}else{continue;}}else{if(rname=="add_emotion_to_coment"){tmp=getDoubleRules("own_emotion","other_emotion",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="add_image"){tmp=getDoubleRules("own_image","other_image",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="embed_video"){tmp=getDoubleRules("own_video","other_video",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="edit_comment"){tmp=getDoubleRules("own_remark","other_remark",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="add_format"){tmp=getDoubleRules("own_format","other_format",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="like_comment"){tmp=calcGameRulesWithRules("like_higher","like_lower",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="dislike_comemnt"){tmp=calcGameRulesWithRules("dislike_higher","dislike_lower",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="vote_up_comment"){tmp=calcGameRulesWithRules("vote_up_lower","vote_up_higher",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname=="vote_down_comment"){tmp=calcGameRulesWithRules("vote_down_lower","vote_down_higher",sruli);if(tmp!==false){rules[rname]=tmp;}continue;}else{if(rname in sruli){rules[rname]=sruli[rname];if(rname=="add_comment"){rules["EXPERT_MODE"]="&nbsp";}}}}}}}}}}}}}}}$("ul#comments").after($("#templateGameRules").tmpl({rules:rules}));_resize();getSiteGameRanks(function(data){displayRanksTmpl(data);});}function getExpertModeHelpUrl(){if(sys_lang=="ua"||sys_lang=="ru"){return"http://help.solidopinion.com/knowledgebase/articles/481744-%D0%A0%D0%B5%D0%B6%D0%B8%D0%BC-%D1%8D%D0%BA%D1%81%D0%BF%D0%B5%D1%80%D1%82%D0%B0";}return"http://help.solidopinion.com/knowledgebase/articles/483442-expert-mode";}function displayRanksTmpl(ranks){if(!ranks||ranks.length==0){return false;}ranks.sort(function(a,b){return b[1]-a[1];});$("ul#currentusergamerulespage").append($("#templateGameRanks").tmpl({ranks:ranks}));_resize();}function POSTS_find_bla(text){var blabla_data={"комментарию":[" к "],"комментария":["Вы проголосовали против"],"коментаря":[" до ","Ви проголосували проти"]};for(var cotext in blabla_data){if(array_has_text(text,blabla_data[cotext])){return cotext;}}return nouns("top_total_comment",1);}function array_has_text(text,arr){for(i in arr){var t=arr[i];if(text.search(t)>=0){return true;}}return false;}function parseActivityMessage(data){var mess=data.message;if(/\[comment\]/.test(mess)){if(data.message_code&&data.thread_url&&data.site_domain){mess=mess.replace(/\[comment\]/,'<a class="link-color activity-link" href="//'+data.site_domain+data.thread_url+"#sot_"+data.message_code+'" target="_blank" data-title="'+_("click_to_visit")+'">'+POSTS_find_bla(mess)+"</a>");}else{mess=mess.replace(/\[comment\]/,_("comment"));}}if(/\[reply\]/.test(mess)){if(data.reply_message_code&&data.thread_url&&data.site_domain){mess=mess.replace(/\[reply\]/,'<a class="link-color activity-link" href="//'+data.site_domain+data.thread_url+"#sot_"+data.reply_message_code+'" target="_blank" data-title="'+_("click_to_visit")+'">'+_("reply")+"</a>");}else{mess=mess.replace(/\[reply\]/,_("reply"));}}if(/\[user\]/.test(mess)&&data.by_user_name&&data.by_user_code){mess=mess.replace(/\[user\]/,'<a class="userinfo_'+data.by_user_code+' link-color activity-link">'+data.by_user_name+"</a>");}return mess;}function getCurrentUserActyvity(language_id,count,suc_func){apiRequest({api:"User/getactivitystream/",type:"GET",data:{language_id:language_id,activity_types:"replies,actions",count:count}},function(res){var data={};if(res!=undefined&&(res.actions!=undefined||res.replies!=undefined)){for(var cat in res){if(cat=="next"){data[cat]=res[cat];continue;}var tmp_data=res[cat];data[cat]=[];for(var i in tmp_data){var x=tmp_data[i];data[cat][i]={stat_id:x[0],message:x[1],points:x[2],date:x[3],message_code:x[4],by_user_code:x[5],site_domain:x[6],thread_url:x[7],by_user_name:x[8],reply_message_code:x[11],icon_url:(x[9]!="")?x[9]+"_S.jpg":site_avatar_url!=""?site_avatar_url+"_S.jpg":default_avatar};data[cat][i].message=parseActivityMessage(data[cat][i]);}}if((typeof data["replies"]=="undefined"||data["replies"].length==0)&&typeof data["actions"]!="undefined"&&data["actions"].length>0){data["replies"]=data["actions"];data["actions"]=[];}}else{data=res;}if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(data);}});}function updateRewardsCount(){if(current_site.rewards&&Object.size(current_site.rewards)>0){$(".myrewards").show();$("span.rewards_count").html(" ("+Object.size(current_site.rewards)+")");}}function updateActivityCount(){if(message_list&&message_list.viewer&&message_list.viewer.unread_messages){$("span.activity_count").html(" ("+message_list.viewer.unread_messages+")");}else{$("span.activity_count").html(" ");}}function displayMyRewards(suc_func){can_ajax=true;getSitePublic(getSiteName(),function(res){if($(".myrewards").hasClass("act")){removeAllButComments();var da={};if(res&&res.rewards){current_site.rewards=res.rewards;updateRewardsCount();for(k in res.rewards){da[k]={title:res.rewards[k][0],description:res.rewards[k][1],points:res.rewards[k][3],i_url:res.rewards[k][4]?res.rewards[k][4]+"_S.jpg":""};}$("ul#comments").after($("#templateRewards").tmpl({rewds:da}));}if(current_site.rewards&&Object.size(current_site.rewards)>0){$(".myrewards").show();}else{$(".myrewards").hide();if(checkIsForum()){openForum();}else{action_reload();}}if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}$("#general-comments").fadeIn(200);_resize();}},function(data){standartAjaxErrorHandler(data);});}function claimReward(reward_code){var mess_box="message_reward_"+reward_code;if(authCheck()){apiRequest({api:"Site/claimreward/",type:"POST",data:{shortname:getSiteName(),reward_code:reward_code}},function(res){if(res.responseText&&res.responseText=="not_enough_money"){showMess("not_enough_points",mess_box,"err");}else{displayMyRewards();setTimeout(function(){showMess(_("notice_reward_ok"),mess_box,"succ");},1200);}},function(data){if(data.responseText&&data.responseText=="not_enough_money"){showMess("not_enough_points",mess_box,"err");}else{standartAjaxErrorHandler(data,"default",mess_box);}});}}function getSitePublic(shortname,suc_func,err_func){apiRequest({api:"Site/getpublic/",type:"GET",data:{shortname:shortname,wtype:"discussion"}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}},function(res){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(res);}});can_ajax=true;}function getUserPublic(uid,suc_func){apiRequest({api:"User/getpublic/",type:"GET",data:{usercode:uid}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}});}function isModerator(force){return current_user.sites&&current_user.sites.length>0&&$.inArray(getSiteName(),current_user.sites)>=0;}function remove_smile(target){$(target).remove();recalc_smile();}function add_smile(target){var smile_name=$(target).attr("class");if(smile_name.length>0){$("#smile_prew").append($('<div class="'+smile_name+'"></div>'));recalc_smile();}}function recalc_smile(){modificator=$("#smile_prew div").length;recalk_points(1);}function shortString(s,max){if(s==undefined||s==""||$.trim(s)==""){return"";}var max_len=30;if(typeof max!="undefined"&&max>5){max_len=max;}s=$.trim(stripHtml(s));if(s.length>max_len){s=$.trim(s.substring(0,max_len))+"...";}return s;}function getAdminActionMenu(mess){var user_status=getCurrentUserStatus();var ownership="own";var order=[];var menu=[];if(mess.author.code!=user_code){ownership="other";}if(user_status=="owner"||user_status=="admin"||user_status=="moderator"){if(ownership=="other"&&user_status!="moderator"){order.push("moderator_menu_block");}if(mess.status!=3){order.push("moderator_menu_approve");}order.push("moderator_menu_delete","moderator_menu_spam");}for(var i in order){var rname=order[i];var m={class_name:rname,effect_name:_(rname)};menu.push(m);}if(menu.length>=1){return $("#templateAdminActionMenu").tmpl({data:menu}).clone().wrap("<p>").parent().html();}return"";}function getAdminActionInlineMenu(mess){var user_status=getCurrentUserStatus();var ownership="own";var order=[];var menu=[];if(mess.author.code!=user_code){ownership="other";}if(user_status=="owner"||user_status=="admin"||user_status=="moderator"){if(mess.status!=3){order.push("moderator_menu_approve");}order.push("moderator_menu_delete","moderator_menu_spam");if(ownership=="other"&&user_status!="moderator"){order.push("moderator_menu_block");}}for(var i in order){var rname=order[i];var m={class_name:rname,effect_name:_(rname)};menu.push(m);}if(menu.length>=1){return $("#templateAdminActionInlineMenu").tmpl({data:menu}).html();}return"";}function getActionMenu(mess,robject){var user_status=getCurrentUserStatus();var user_points=getCurrentUserPoints();var user_code=getCurrentUserCode();var sruli=getCurrentUserGameRules();if(isEmptyObj(sruli)){sruli=getCurrentSiteGameRules();}var ownership="own";var ranking="higher";var message_menu={user:[],mess:[]};if(mess.hidden=="yes"){if(robject){return message_menu;}return $("#templateActionMenu").tmpl({data:message_menu});}if(mess.author.code!=user_code){ownership="other";if(user_points>=mess.author.stats.points){ranking="lower";}}else{ranking="lower";}var r_order={user:[],mess:[]};if(mess.author.is_protected==0||ownership=="own"){r_order.mess.push(["vote_up_"+ranking,"effect_multi_vote_up_tooltip"]);if(!mess.is_immune||ownership=="own"){r_order.mess.push(["vote_down_"+ranking,"effect_multi_vote_down_tooltip"]);}r_order.mess.push(["like_"+ranking,"effect_multi_like_tooltip"]);if(!mess.is_immune||ownership=="own"){r_order.mess.push(["dislike_"+ranking,"effect_multi_dislike_tooltip"]);}if(!mess.is_immune||ownership=="own"){r_order.mess.push([ownership+"_emotion","effect_add_emotion_tooltip"]);if(!mess.html_mode){r_order.mess.push([ownership+"_remark","effect_add_remark_tooltip"]);}if((!mess.body.formatting||(mess.body.formatting&&mess.body.formatting.length==0))&&!mess.html_mode){r_order.mess.push([ownership+"_format","effect_add_format_tooltip"]);}r_order.mess.push([ownership+"_image","effect_add_image_tooltip"]);r_order.mess.push([ownership+"_video","effect_add_video_tooltip"]);}if(mess.author.effects){if(typeof mess.author.effects.avatar=="undefined"){r_order.user.push(["change_avatar","effect_change_author_avatar_tooltip"]);}if(typeof mess.author.effects.name=="undefined"){r_order.user.push(["change_name","effect_change_author_name_tooltip"]);}}else{r_order.user.push(["change_name","effect_change_author_name_tooltip"]);r_order.user.push(["change_avatar","effect_change_author_avatar_tooltip"]);}if(sfGetAuth()){if(ownership=="other"){if(mess.author.is_protected==0){r_order.user.push(["reputation_bomb","effect_reputation_bomb_tooltip"],["ignore_user","effect_ignore_tooltip"],["prevent_from_posting","effect_prevent_from_posting_tooltip"]);}if(mess.body.is_spam==0&&(user_status!="owner"&&user_status!="admin")){r_order.mess.push(["spam_mark","effect_inappropriate_tooltip"]);}r_order.user.push(["transfer_points","effect_transfer_points_tooltip"]);}else{if(typeof mess.is_pinned=="undefined"||mess.is_pinned==false){r_order.mess.push(["pin_to_top","effect_pin_to_top_tooltip"]);}if(typeof mess.is_immune=="undefined"||mess.is_immune==0){r_order.mess.push(["make_immune","effect_make_immune_tooltip"]);}r_order.mess.push(["cancel_all_effects","effect_cancel_a_effects_tooltip"]);if(typeof mess.is_reply_turned_off!="undefined"&&mess.is_reply_turned_off==0&&(mess.is_immune!=1||ownership=="own")){r_order.mess.push(["turn_off_replies","effect_turn_off_replies_tooltip"]);}if(user_status=="owner"||user_status=="admin"){r_order.user.push(["transfer_points","effect_transfer_points_tooltip"]);}}}else{r_order.user.push(["reputation_bomb","effect_reputation_bomb_tooltip"],["ignore_user","effect_ignore_tooltip"],["prevent_from_posting","effect_prevent_from_posting_tooltip"],["spam_mark","effect_inappropriate_tooltip"]);r_order.mess.push(["turn_off_replies","effect_turn_off_replies_tooltip"]);}}else{if(mess.body.is_spam==0){r_order.mess.push(["spam_mark","effect_inappropriate_tooltip"]);}r_order.user.push(["transfer_points","effect_transfer_points_tooltip"]);}if(ownership=="own"&&mess.isEditable){r_order.mess.push(["separator","separator"],["message_text_edit","effect_message_text_edit_tooltip"],["message_remove","effect_message_remove_tooltip"]);}if(user_status=="owner"||user_status=="admin"||user_status=="moderator"){r_order.mess.push(["separator","separator"]);if(mess.status!=3){r_order.mess.push(["moderator_menu_approve","moderator_menu_approve"]);}r_order.mess.push(["moderator_menu_delete","moderator_menu_delete"],["moderator_menu_spam","moderator_menu_spam"]);}if(user_status=="owner"||user_status=="admin"){r_order.user.push(["separator","separator"],["moderator_menu_block","moderator_menu_block"]);}for(var order_name in r_order){for(var i in r_order[order_name]){var rname=r_order[order_name][i][0];var m=getMenuItemObject();m.class_name=rname;m.effect_name=_(r_order[order_name][i][1]);if(sruli!=undefined&&sruli[rname]!=undefined&&sruli[rname]!="-"){m.price=Math.abs(sruli[rname]);}if(m.price!="-"||m.class_name=="transfer_points"||m.class_name=="separator"||m.class_name=="moderator_menu_block"||m.class_name=="message_text_edit"||m.class_name=="message_remove"||m.class_name=="moderator_menu_delete"||m.class_name=="moderator_menu_block"||m.class_name=="moderator_menu_spam"||m.class_name=="moderator_menu_approve"){message_menu[order_name].push(m);}}}if(mess.author.is_removed==1){message_menu["user"]=[];}if(robject){return message_menu;}return $("#templateActionMenu").tmpl({data:message_menu});}$(function(){$(document).on("mouseup","#text_message_edit",function(e){editingTextEvent(e);});});function selectTextEvent(node){var container=$(node).closest("form");if(container.data("comment_price_part")!="2"){return false;}if(fileteSelectionToNode(node,true)){container.find(".primary-button.select-btn").removeClass("disabled");}else{container.find(".primary-button.select-btn").addClass("disabled");}}function editingTextEvent(){var node=document.getElementById("text_message_edit");if(fileteSelectionToNode(node)){$(".set_edit").removeClass("disabled");}else{$(".set_edit").addClass("disabled");}}function remarkingTextEvent(){var node=document.getElementById("text_message");if(fileteSelectionToNode(node)){remarkEvent();}}function createRangeFromIndices(el,start,end,glue){glue===undefined?1:glue;var range=document.createRange(),foundStart=false;range.selectNodeContents(el);var charCount=0,endCharCount,node,next_node;range.setStart(el,0);range.collapse(true);var nodeIterator=document.createNodeIterator(el,NodeFilter.SHOW_TEXT,null,false);while(node=nodeIterator.nextNode()){endCharCount=charCount+node.length;if(!foundStart&&start>=charCount&&start<=endCharCount){if(start==endCharCount&&glue===1){next_node=nodeIterator.nextNode();if(next_node){range.setStart(next_node,0);}nodeIterator.previousNode();}else{next_node=nodeIterator.nextNode();if(next_node){range.setStart(next_node,0);}else{range.setStart(node,start-charCount);}nodeIterator.previousNode();}foundStart=true;}if(foundStart&&end<=endCharCount){range.setEnd(node,end-charCount);break;}charCount=endCharCount;}if(range.commonAncestorContainer.textContent==range.startContainer.textContent+range.endContainer.textContent&&range.startOffset==0&&range.endContainer.textContent.length==range.endOffset){range.selectNode(range.commonAncestorContainer);}return range;}function encode_for_range(str){return str.replace(/\<br\>/g,"[br]").replace(/&lt;/g,"#l!]").replace(/&gt;/g,"#g!]");}function decode_for_range(str){return str.replace(/\[br\]/g,"<br>").replace(/\#l\!\]/g,"&lt;").replace(/\#g\!\]/g,"&gt;");}function suroundHtmlByNode(html,start,end,node){html=html.trim();var range,div=document.createElement("div");var htmlNode=node.cloneNode(true);div.innerHTML=html;range=getRangeByIndexes(div,start,end);var parent=range.commonAncestorContainer;try{if(parent.nodeType==3){range.surroundContents(htmlNode);}else{var content=range.extractContents();htmlNode.appendChild(content);range.insertNode(htmlNode);}}catch(e){}return div.innerHTML;}function generateHtml(text,data){if(typeof document.createNodeIterator=="undefined"){return text;}text=text.replace(/(<\/?br>\s*){2,}/g,"<br><br>");var node,raw_text=text;var div=document.createElement("div");div.innerHTML=raw_text;var u,s,e;var len=0,perew;raw_text=div.innerHTML;for(var i in data){u=data[i];s=parseInt(u["start"]);e=parseInt(u["end"]);t=u["id"];node=createNode("span",t);raw_text=suroundHtmlByNode(String(raw_text),s,e,node);}var div=$(document.createElement("div"));div.html(raw_text);$("span",div).each(function(){if(""===$.trim($(this).text())){$(this).remove();}});return decode_for_range(div.html());}function isDescendant(parent,child){var node=child.parentNode;while(node!=null){if(node==parent){return true;}node=node.parentNode;}return false;}function elInNode(el,node){if(el==node){return true;}while(el){el=el.parentNode;if(el==node){return true;}}return false;}function fileteSelectionToNode(node,filter_white_space){if(typeof filter_white_space!="boolean"){filter_white_space=false;}var range,sel=window.getSelection();try{range=sel.getRangeAt(0);}catch(e){return false;}if(range.collapsed){return false;}var range_clone=range.cloneRange();if(filter_white_space&&range_clone.cloneContents().textContent.trim().length==0){return false;}var e=elInNode(range.endContainer,node);var s=elInNode(range.startContainer,node);if(!s&&!e){if(!isDescendant(range.commonAncestorContainer,node)){return false;}}else{if(s&&e){return true;}}range.selectNodeContents(node);if(s){range.setStart(range_clone.startContainer,range_clone.startOffset);}if(e){range.setEnd(range_clone.endContainer,range_clone.endOffset);}sel.removeAllRanges();sel.addRange(range);return true;}function makeSelectedTextStyle(type){var t="B";var html=getSelectionHtml();if(html.length==0){return;}switch(type){case"bold":t="B";break;case"italic":t="I";break;case"underline":t="U";break;default:return html;}if(html.length>0){var container=document.getElementById("text_message_edit");var node,ni=document.createNodeIterator(container,NodeFilter.SHOW_ELEMENT,null,false);try{node=ni.nextNode();while(node){if(node.textContent==""&&node.nodeName.toLowerCase()!="br"){node.parentNode.removeChild(node);}node=ni.nextNode();}}catch(e){}var range=window.getSelection().getRangeAt(0);var range_clone=range.cloneRange();range.collapse(false);var rfrag=createFragment('<span class="rl">');range.insertNode(rfrag);range_clone.collapse(true);var lfrag=createFragment('<span class="ll">');range_clone.insertNode(lfrag);var div_clone=document.createElement("div");div_clone.innerHTML=container.innerHTML;var docFragment=document.createDocumentFragment();docFragment.appendChild(div_clone);range=document.createRange();range.selectNodeContents(div_clone);var llimiter=div_clone.getElementsByClassName("ll")[0];range.setEndBefore(llimiter);var left=getFragmentHtml(range.cloneContents());range=document.createRange();range.selectNodeContents(div_clone);var rlimiter=div_clone.getElementsByClassName("rl")[0];range.setStartAfter(rlimiter);var right=getFragmentHtml(range.cloneContents());range=document.createRange();range.selectNodeContents(div_clone);var llimiter=div_clone.getElementsByClassName("ll")[0];range.setEndAfter(llimiter);range.deleteContents();var rlimiter=div_clone.getElementsByClassName("rl")[0];range.selectNodeContents(div_clone);range.setStartBefore(rlimiter);range.deleteContents();var selement=div_clone.getElementsByClassName(t)[0];if(selement&&selement.textContent==div_clone.textContent){var spans=$("."+t,div_clone);spans.contents().unwrap();container.innerHTML=left+'<span class="ll"></span>'+div_clone.innerHTML+'<span class="rl"></span>'+right;}else{var spans=$("."+t,div_clone);spans.contents().unwrap();container.innerHTML=left+'<span class="ll"></span><span class="'+t+'">'+div_clone.innerHTML+'</span><span class="rl"></span>'+right;}range.selectNodeContents(container);var llimiter=container.getElementsByClassName("ll")[0];range.setStartAfter(llimiter);var rlimiter=container.getElementsByClassName("rl")[0];range.setEndBefore(rlimiter);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);$(".set_edit").removeClass("disabled");docFragment=null;}var data=getTagPosition();if(isEmptyObj(data)){modificator=0;}else{modificator=1;}recalk_points(1);}function removeEmptyTagsN(container){try{var nodeIterator=document.createNodeIterator(container,NodeFilter.SHOW_ELEMENT,null,false);var node=nodeIterator.nextNode();while(node){if(node.textContent==""&&node.nodeName.toLowerCase()!="br"){node.parentNode.removeChild(node);}node=nodeIterator.nextNode();}}catch(e){}return container;}function removeBrs(container){var nodeIterator=document.createNodeIterator(container,NodeFilter.SHOW_ELEMENT,null,false);try{var node=nodeIterator.nextNode();while(node){if(node.nodeName.toLowerCase()=="br"){node.parentNode.removeChild(node);}node=nodeIterator.nextNode();}}catch(e){}return container;}function getTagPosition(){var id,start,end;var d={};var container=removeEmptyTagsN(document.getElementById("text_message_edit").cloneNode(true));var data_clone=$(container);data_clone.html(data_clone.html().replace(/\<br\>/g,""));var el=$(".I,.B,.U",data_clone);if(el.length>0){var ee,ht,i=0,tt;el.each(function(){id=$(this).attr("class");var tlen=$(this).text().length;$(this).addClass("prot");ht=data_clone.html();ee=$("<span>"+data_clone.html()+"</span>");$(this).removeClass("prot");tt=htmlspecialchars_decode(ee.html().replace(/<\s?\/?span\s*(?:class=[\'\"][IBU][\'\"])?>/ig,""));start=tt.search(/<\s?span\s*(?:class=[\'\"][\sIBUprot]+[\'\"])?>/ig);end=tlen+start;if(start==end){return;}d[i]={};d[i]["id"]=id;d[i]["start"]=start;d[i]["end"]=end;i++;});}return d;}function parseBIU(){var data_clone=$("#text_message_edit").clone();if($(".I,.B,.I",data_clone).length>0){$("strike",data_clone).each(function(){var el=$(this);if(!el.attr("class")||el.attr("class")=="nodat"){el.after(el.html()).remove();}});}}function emNumberToName(a){return"smile"+a;}function getTooltipHtml(text){return'<div class="tooltip fade top" style="display: block;"><div class="tooltip-inner main-color">'+text+"</div></div>";}function createNode(type,classes,text){var node=document.createElement(type);if(classes){node.className=classes;}if(text){if(typeof node.textContent!=="undefined"){node.textContent=text;}}return node;}function getDisplayedText(raw_text){return $("<div>"+raw_text.replace(/\<br\>/g,"\n")+"</div>").text().trim();}function htmlStringToNode(html_string){var div=document.createElement("div");div.innerHTML=html_string;return div.childNodes;}function htmlToText(html){var div=document.createElement("div"),tt;div.innerHTML=html;tt=div.textContent;div=null;return tt;}function insertAfter(elem,refElem){var parent=refElem.parentNode;var next=refElem.nextSibling;if(next){return parent.insertBefore(elem,next);}else{return parent.appendChild(elem);}}function addRemarkToText(text,remarks){if(typeof document.createNodeIterator=="undefined"){return text;}var s,e,r,min_left,node=null,rem=[],rand;for(i in remarks){rem.push(remarks[i]);}rem.sort(function(a,b){return b.start_pos-a.start_pos;});for(i in rem){rand=new Date().getTime();r=rem[i];if(!r.author.stats){r.author.stats={points:"0"};}s=parseInt(r.start_pos);e=parseInt(r.end_pos);min_left=Number((r.time_to_end/60).toFixed());node=createNode("strike","nodat nodat_"+rand);text=suroundHtmlByNode(text,s,e,node);var txt_tmp=$("<div>"+text+"</div>");$(".nodat_"+rand,txt_tmp).after($('<span class="nodat q" style="font-style:italic;padding-right: 3px;"> '+r.body+'</span><span class="pencil-box nodat">'+'<i class="icon-pencil nodat" data-title="'+_("effect_add_remark_changed_by")+" "+r.author.name+", "+min_left+" "+nouns("minutes",min_left)+" "+nouns("left_minutes",min_left)+' ">k</i></span><span class="by nodat"> '+_("effect_add_remark_changed_by")+" </span>"+$("<div class='nodat'>").append($("#nameTemplate").tmpl(r.author)).html()));$(".nodat_"+rand,txt_tmp).before($("<span class='by nodat'>"+_("effect_add_remark_edited")+"</span>"));text=txt_tmp.html();}return text;}function getDocumentFragmentHtml(fragment){var div=document.createElement("div");div.appendChild(fragment);return div.innerHTML;}function get_firstchild(n){if(!n){return false;}x=n.firstChild;while(x.nodeType!=1){x=x.nextSibling;}return x;}$(function(){$(document).on("focus",".comment-div",function(e){expandMessageBox(this);});$(document).on("contextmenu",".comment-div",function(e){$(this).focus();});$(document).on("blur",".comment-div",function(e){if(iem){setTimeout(function(){narrowMessageBox(e.target);},200);}else{narrowMessageBox(e.target);}});});function blurFirstPartOfText(input_field,alen){if(!(alen>=0)){return false;}var ph=getFieldPH(input_field);var h=input_field.html().toLowerCase();if(h==""||h=="<br>"||h=="<p>&nbsp;</p>"||h==ph){return;}var atr_id=input_field.attr("id");if(atr_id){remTag($("#"+atr_id+" span.blur"));}var text=input_field.html();var tlen=input_field.text().length;var len=tlen>alen?alen:tlen;if(tlen>alen){node=createNode("span","blur system-color");text=suroundHtmlByNode(String(text),len,tlen,node,false);$("#"+atr_id).html(text.replace(/\[br\]/g,"<br>"));}}function saveSelectText(el){if(el.hasClass("disabled")){return;}var container=el.closest("form.message-add-form");container.data("comment_price_part","3");var range=window.getSelection().getRangeAt(0);node=createNode("span","nodat bold main-color");range.surroundContents(node);$(".comment-div",container).focus();$(".non_free_comment2",container).hide();$(".primary-button.comment-btn",container).show();$(".primary-button.select-btn",container).hide();$(".comment_price_input_container",container).show();}function non_free_reset(el,focus){var container=el.closest("form.message-add-form");container.data("comment_price_part","0");$(".non_free_comment",container).hide();$(".comment_price_input_container",container).hide();$(".non_free_comment2",container).hide();$(".primary-button.comment-btn",container).show();$(".primary-button.select-btn",container).hide();if(focus===true){changeInContentEditable(el);}}function non_free_show_select_prom(el){var container=el.closest("form.message-add-form");container.data("comment_price_part","2");$(".non_free_comment",container).hide();$(".comment_price_input_container",container).hide();$(".non_free_comment2",container).css("display","inline-block");$(".primary-button.comment-btn",container).hide();$(".primary-button.select-btn",container).show();}function checkTextCount(element){var can_len=12000;var e=element.parent(".txt-wrapp");$(".txt-wrapp-after",e).remove();var len=element.html().length;var left=can_len-len;if(left<100){if(left>=0){$("<div class='txt-wrapp-after'>"+nouns("worning_text_limit",left)+" "+(left)+"</div>").insertAfter($(".comment-div",e));}else{$("<div class='txt-wrapp-after'>"+_("worning_text_limit_error")+"</div>").insertAfter($(".comment-div",e));}}if(left>0){return true;}return false;}function changeInContentEditable(jelement,focus){var container=jelement.closest("form.message-add-form");var part=container.data("comment_price_part");var comment_div=$(".comment-div",container);checkTextCount(jelement);if(part=="3"){var range=window.getSelection().getRangeAt(0);var leng=comment_div.get(0).textContent.length;var caret_pos=getCharacterOffsetIn(range,comment_div.get(0));$(".nodat",comment_div).replaceWith($(".nodat",comment_div).html());range=createRangeFromIndices(comment_div.get(0),caret_pos,caret_pos,0);if(range.collapsed){var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);}non_free_show_select_prom($(".comment-div",container));}if(part=="0"||part==undefined){$(".non_free_comment",container).css("display","inline-block");$(".non_free_comment2",container).hide();$(".comment_price_input_container",container).hide();container.data("comment_price_part","1");$(".nodat",comment_div).replaceWith($(".nodat",comment_div).html());$(comment_div).focus();}var id=jelement.attr("id");if(id&&id!="comment_data"){id=id.replace("reply_for_","");}else{id="";}saveToStorage(id,jelement.html());_resize();}function getCharacterOffsetIn(range,node){var treeWalker=document.createTreeWalker(node,NodeFilter.SHOW_TEXT,function(node){var nodeRange=document.createRange();nodeRange.selectNodeContents(node);return nodeRange.compareBoundaryPoints(Range.END_TO_END,range)<0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT;},false);var charCount=0;while(treeWalker.nextNode()){charCount+=treeWalker.currentNode.length;}if(range.startContainer.nodeType==3){charCount+=range.startOffset;}return charCount;}function getFieldPH(e){var ph="<span>"+_("main_comment_field").toLowerCase()+"</span>";var atr_id=$(e).attr("id");if(atr_id){if(atr_id.indexOf("reply_for_")>=0){hidden_area=$(".go-reply-button");ph="<span>"+_("main_comment_field_reply").toLowerCase()+"</span>";}else{if(atr_id.indexOf("topic_")>=0){ph="<span>"+_("topic_title").toLowerCase()+"</span>";}else{if(atr_id.indexOf("forum_title")>=0){ph="<span>"+_("forum_title").toLowerCase()+"</span>";}else{if(atr_id.indexOf("forum_description")>=0){ph="<span>"+_("forum_description").toLowerCase()+"</span>";}}}}}return ph;}function expandMessageBox(el){var e=$(el);var h=e.html().toLowerCase();var ph=getFieldPH(e);var rh="";var hidden_area="";if(e.attr("id")=="comment_data"){rh="<span>"+_("update_rating_field").toLowerCase()+"</span>";hidden_area=$(".go-comment-button");}else{hidden_area=$(".go-comment-button",e);}if((h==""||h=="<br>"||h=="<p>&nbsp;</p>"||(h==ph||h==rh))){if(iem){e.empty();if(ph!="<span>"+_("forum_title").toLowerCase()+"</span>"&&ph!="<span>"+_("forum_description").toLowerCase()+"</span>"&&ph!="<span>"+_("topic_title").toLowerCase()+"</span>"){e.addClass("expand-comment");}}else{if(ph!="<span>"+_("forum_title").toLowerCase()+"</span>"&&ph!="<span>"+_("forum_description").toLowerCase()+"</span>"&&ph!="<span>"+_("topic_title").toLowerCase()+"</span>"){e.addClass("expand-comment");}setTimeout(function(){e.empty();},100);}}if(e.attr("id")!="text_edit_comment"){hidden_area.show();}if(message_list.viewer&&message_list.viewer.rating==0&&e.attr("id")=="comment_data"){$(".hide-rating").show();}if(is_html_mode()){$(".expert-icon").show();}}function narrowMessageBox(e){var h=$(e).html();var el=$(e);if(((h==" ")||(h=="")||(h=="<br>")||(h=="<P>&nbsp;</P>"))&&(el.height()>20||(el.height()==20&&(el.attr("id").indexOf("forum_title")>=0||el.attr("id").indexOf("topic_data")>=0||el.attr("id").indexOf("forum_description")>=0)))){resetCommentBox(el);reply_raw_data={};}if(/reply_for_([^\s]+)/.exec(el.attr("id"))&&!sfGetAuth()){reply_raw_data.text=h;reply_raw_data.parrent_id=/reply_for_([^\s]+)/.exec(el.attr("id"))[1];}}function resetCommentBox(e,check){var ph="<span>"+_("main_comment_field")+"</span>";e.removeClass("expand-comment");if(e.attr("id")){if(e.attr("id").indexOf("reply_for_")>=0){ph="<span>"+_("main_comment_field_reply")+"</span>";}else{if(e.attr("id").indexOf("topic_")>=0){ph="<span>"+_("topic_title")+"</span>";}else{if(e.attr("id").indexOf("forum_title")>=0){ph="<span>"+_("forum_title")+"</span>";}else{if(e.attr("id").indexOf("forum_description")>=0){ph="<span>"+_("forum_description")+"</span>";}else{if(e.attr("id").indexOf("comment_data")>=0&&(check==="update_rating"||e.hasClass("revote"))){ph="<span>"+_("update_rating_field")+"</span>";}}}}}}e.empty().html(ph);if(e.attr("id").indexOf("comment_data")>=0||e.attr("id").indexOf("topic_")>=0){$('<div contenteditable="true"></div>').appendTo(e.parent()).focus().blur().remove();}}function hard_reset_input(e){e.parent().html(e.parent().html());}var selected=false;var times_edited=0;var raw="";function reset_text_input(){selected=false;$("#text_input").val("");$("#pop_text_input").hide();hide_popapalert();$("#text_message").html(raw);}function save_text_input(){if(parsEditedText().pop().val.length>0){modificator=1;raw=$("#text_message").html();recalk_points($("#time_edit_comment").val());}reset_text_input();}function synk_new_text(text){var q=$("#text_message .q"+times_edited);if(q.length>0){if(text.length>0){q.empty().text(" "+text+" ");}else{q.empty();}}else{$('<q style="font-style:italic" class="q'+times_edited+'"></q>').insertAfter("#text_message .s"+times_edited);$("#text_message .q"+times_edited).text(" "+text+" ");}}function show_popap_at(x,y){hide_popapalert();$("#pop_text_input").show().offset({top:y,left:x});}function show_popapalert(text,x,y){removeSelection();$("#pop_alert").show().offset({top:y,left:x});$("#pop_alert_text").text(text);}function hide_popapalert(){$("#pop_alert").hide();}function removeSelection(){if(window.getSelection()){window.getSelection().removeAllRanges();}else{if(document.getSelection()){document.getSelection().removeAllRanges();}}}function parsEditedText(){var data=[];for(var i=times_edited;i>=0;i--){var val={};var data_clone=$("#text_message").clone();data_clone.html(data_clone.html().replace(/\<br\>/g,""));if($(".s"+i,data_clone).length>0){$(".by",data_clone).remove();$("strike",data_clone).each(function(){var el=$(this);if(!el.attr("class")||el.attr("class").indexOf("nodat")==0){el.after(el.html()).remove();}});$(".nodat,[class^='userinfo_']",data_clone).remove();$(".B",data_clone).replaceWith(function(){return $(this).text();});$(".I",data_clone).replaceWith(function(){return $(this).text();});$(".U",data_clone).replaceWith(function(){return $(this).text();});val.val=$.trim($(".q"+i,data_clone).html());val.len=htmlspecialchars_decode($(".s"+i,data_clone).html()).length;val.pos=htmlspecialchars_decode(data_clone.html()).search('<strike class="s'+i+'">');data.push(val);}}return data;}function save_edit_comment(){if(authCheck()){var messData=removeEmptyTags($.trim(htmlDecode($("#text_message").html())));if(raw_comment_text==messData){showMess("error_text_no_chang","action_message");return false;}var timeh=Math.abs(parseInt($("#time_edit_comment").val()));var edata=parsEditedText();var data=edata[0];apiRequest({api:"Message/addremark/",data:{messagecode:selected_message.code,count:timeh,position:data.pos,end_position:parseInt(data.pos)+parseInt(data.len),body:data.val}},function(){action_reload();});}}function save_add_format(){if(authCheck()){var data=getTagPosition();if(isEmptyObj(data)){showMess("error_text_no_chang_format","action_message");return false;}var pos="";for(var i in data){if(pos!=""){pos+=",";}pos+=String(data[i].start)+","+String(data[i].end)+","+String(data[i].id).toLowerCase();}apiRequest({api:"Message/addformat/",data:{messagecode:selected_message.code,positions:pos}},function(){action_reload();});}}function saveEmotion(){var smiles=[];$("#smile_prew div").each(function(){var scode=$(this).attr("class").replace(/smile/,"");smiles.push(scode);});if(smiles.length>=1){var s_line=(smiles instanceof Array)?smiles.join(","):smiles;apiRequest({api:"Message/addemotion/",data:{messagecode:selected_message.code,smilecode:s_line}},function(){action_reload();});}else{showMess("error_no_smile","action_message","","Message/addemotion/");}}function windowOpenBuyPoints(tp){if(!can_buy_points){return;}if(!tp){tp=0;}var u=frontend_base_url+"frontend/embed/payment/?shortname="+getSiteName()+"&usercode="+getCurrentUserCode()+"&l="+getLangugeShortNameById(getCurrentLangId())+"&p="+tp+"&pg="+encodeURIComponent(alowed_pg.toString());payment_window=window.open(httpsUrl(u),"paymentWin","width=1024, height=640, toolbar=0, scrollbars=1");}function authCheck(){if(!sfGetAuth()){doSocialLogin(frontend_base_url+"frontend/embed/login/?l="+getLangugeShortNameById(getCurrentLangId()));if(is_authentificate){showUserAutorisation("",true);}return false;}if(!is_authentificate){displayUserInfo();}return true;}function animate_content(afterfunc){remove_dropdown();var getType={};if(afterfunc&&getType.toString.call(afterfunc)==="[object Function]"){afterfunc();}_resize();$("#general-comments").fadeIn(200);}function action_reload(mess,use_hash){hideActions();if(!mess){mess="";}else{show_history="1";}if(!use_hash){message_list_hash="";}getMessagesList(count_comments,mess,function(messagesList){removeAllTabsContent();if(messagesList.ischanged=="no"&&use_hash){return;}$("#comments").empty().show();if(typeof messagesList.data=="undefined"){messagesList=message_list;}displayMessagesList(messagesList);addClassAct($("#discussion").parent());if(checkIsForum()){if(!message_list.forum_code||typeof message_list.forum_code==="undefined"||!message_list.forum_title||typeof message_list.forum_title==="undefined"){displayForums();}else{if(!message_list.thread_title||typeof message_list.thread_title==="undefined"){displayTopics(message_list.forum_code);}else{$("div#navigation").html(("")+'<a onclick="return false;" class="foruminfo_'+message_list.forum_code+'" forum_code="'+message_list.forum_code+'">'+message_list.forum_title+'</a><b class="caret"></b><b><a onclick="action_reload(); return false;" class="reload_comments">'+message_list.thread_title+"</a></b>");showPageBody();var key=sfGetAuth();getUserByAkey(key,function(usr){if((typeof usr.name!="undefined")&&(usr.name.length>0)){$("#main_avatar").attr("src",getAvatar(usr,"S",true));}_resize();});}}}else{showPageBody();}_resize();if(mess){focusOnComment(mess);base_message="";show_history="0";}if(is_mob()){$("i.icon-dropdown-inner").show();}},true);$("#general-comments").fadeIn(200);}function action_back_reload(afterfunc){raw="";getMessagesList(count_comments,"",function(messagesList){animate_content(function(){removeAllButComments();$("#comments").empty().show();if(typeof messagesList.data=="undefined"){messagesList=message_list;}displayMessagesList(messagesList);if(afterfunc&&{}.toString.call(afterfunc)==="[object Function]"){afterfunc();}});addClassAct($("#discussion").parent());_resize();},true);}function action_back(){animate_content(function(){$(".modalComments").remove();$("#general-comments >ul:not(#comments)").remove();$("#comments").show();});addClassAct($("#discussion").parent());_resize();}function action_cancel_effect(){raw="";$(".modalComments").remove();$("#general-comments >ul:not(#comments)").remove();}function remove_dropdown(){clearInterval(dropdown_timer);$("div.wrap-page > ul.dropdown-menu").remove();$(".dropdown-menu").hide();$(".dropdown-menu").parent(".dropdown.open").removeClass("open");}function remove_sort_dropdown(){clearInterval(dropdown_sort_timer);$(".sort-menu").removeClass("active");}function go_frontend_login(email,name,term,message_box){function succsses(){displayUserInfo();setTimeout(function(){showMess("quick_signup_done",message_box,"succ","User/signup/");},1800);}if(!email.val()&&!name.val()){showMess("error_quick_signup_fields",message_box);email.focus();return false;}if(!email.val()){showMess("error_invalid_email",message_box);email.focus();return false;}if(!name.val()){showMess("error_invalid_name",message_box);name.focus();return false;}if(!validateEmail(email.val())){showMess("error_invalid_email",message_box);email.focus();return false;}if(!term.is(":checked")){showMess("error_agree_terms",message_box);return false;}timezone=jstz.determine().name();$.ajax({url:api_url+"User/signup/",data:{email:email.val(),name:name.val(),sitename:getSiteName(),timezone:timezone},type:"POST",dataType:"json",async:false,success:function(){succsses();},error:function(data){if(data.status=="200"){succsses();}else{showMess(data,message_box,"","User/signup/");}}});$(".f_email, .f_name").val("");$(".i-agree").removeAttr("checked");$(".terms-block").hide();return false;}var avatar_ulploaded=false;function updatePreview(c){if(parseInt(c.w)>0){var pc=$(".preview-pane .preview-container");var rx=pc.width()/c.w;var ry=pc.height()/c.h;$("#x").val(c.x);$("#y").val(c.y);$("#s").val(c.w);$(".preview-pane .preview-container img").css({width:Math.round(rx*boundx)+"px",height:Math.round(ry*boundy)+"px",marginLeft:"-"+Math.round(rx*c.x)+"px",marginTop:"-"+Math.round(ry*c.y)+"px"});}_resize();}function init_avatar_uploader(){image_code="";var api="User/uploadfakeavatar/";$("#fake_avatar").fileupload({url:api_url+api,add:function(e,data){$(".upload-animation").show();$(".upload-a-phase1, .upload-a-phase2").hide();data.formData=[{name:"a",value:sfGetAuth()},{name:"usercode",value:selected_message.author.code}];data.submit().success(function(result){$("#action_message").empty();if(result[0].body&&result[0].body.textContent!==undefined){result=$.parseJSON(result[0].body.textContent);}else{if(typeof result!=="object"){result=jQuery.parseJSON(result);}}image_code=result.image_code;if(result&&result.url){avatar_ulploaded=true;var img=new Image();var d=new Date().getTime();var iurl=result.url+"?t="+d;$(img).load(function(){uploadAvatarPhase2(iurl,this);}).attr("src",iurl);}else{showMess("406","action_message","",api);}}).error(function(data){if(data!=undefined&&data.status=="401"){logoutFrontend();return 0;}$(".upload-animation").hide();$(".upload-a-phase1").show();showMess(data,"action_message","",api);});}});}function uploadAvatarPhase2(iurl,img){hideMessage("message_popup");$(".upload-a-phase1, .upload-a-phase2").show();$(".upload-mess-image-btn").text(_("message_avatar_choose_another_img"));$(".upload-animation").hide();$("#avatar_result, #prew_small_avatar").empty();$("#prew_small_avatar").append('<div class="preview-pane preview-pane-small border-s"><div class="preview-container"></div></div>');$("#avatar_result").html('<img src="'+iurl+'" id="avatar_image" />');$(".preview-container").html('<img class="jcrop-preview" src="'+iurl+'" />');$(".preview-avatar img").attr("src",iurl).css({"width":"auto","height":"auto"});$("#container_input").show();$(".upload-text").text(_("upload_anoter_ava"));$(".action-animation").hide();$("#avatar_image").Jcrop({onChange:updatePreview,onSelect:updatePreview,aspectRatio:1},function(){var bounds=this.getBounds();boundx=bounds[0];boundy=bounds[1];jcrop_api=this;jcrop_api.animateTo([img.width/2-30,img.height/2-30,img.width/2+30,img.height/2+30]);});_resize();setTimeout(function(){_resize("",true);},200);}function savevAvatar(user_code){if(!avatar_ulploaded){showMess("no_avatar_uploaded","action_message");return 0;}var key=sfGetAuth();var hours=Math.abs(parseInt($("#avatar_hours").val()));if(key){if((hours>0)&&user_code){apiRequest({api:"User/cropfakeavatar/",data:{a:key,image_code:image_code,x:$("#x").val(),y:$("#y").val(),s:$("#s").val(),sitename:getSiteName(),usercode:user_code,count:hours}},function(){action_reload();});}}else{logoutFrontend();}}function listener(e){var command=e.data.split(";");var eventName=command[0];var data=command[1];switch(eventName){case"setDest":data=JSON.parse(data);destination=data.topscrollpos;break;case"setTopOffset":data=JSON.parse(data);topoffset=data.topOffset;if(destination==0){destination=topoffset;}break;case"topResized":_resize();break;case"setHash":data=JSON.parse(data);so_config.hash=data.hash;break;case"scrollBottom":if(!$("#comments").is(":hidden")&&infinite_load){if(checkIsForum()&&$("#comments>li.comment").length==0){return false;}show_more();}break;case"resizeFrameById":data=JSON.parse(data);if(data.height&&data.frame_id){$("#"+data.frame_id).css("height",data.height+"px");}_resize();break;case"cfSetDest":destination=data;break;case"cfSetTopOffset":topoffset=data;if(destination==0){destination=topoffset;}break;case"cfSetHash":so_config.hash=data;break;case"sfSetHeight":var id="";if(typeof command[2]!="undefined"){id=command[2];}$("#"+id).css("height",data+"px");_resize();break;}}function show_more(){if(!can_ajax){$(".more-animation").remove();}var lmess_code=gatLastMessCodeForMore();if(lmess_code){$(".pagination").append($("#templatePreloader").tmpl());$(".pagination > ul").hide();getMessagesList(count_comments,lmess_code,function(messagesList){displayMessagesList(messagesList);_resize();count_comments=$(".postbox-comments").length;$(".more-animation").remove();},false,function(xhr){standartAjaxErrorHandler(xhr);});}}function removeAllTabsContent(){$("#community,#currentuserpage,#userpage,#rewardspage,.modalComments,#currentuseractivitypage,#currentusergamerulespage").hide();$("#community,#currentuserpage,#userpage,#rewardspage,.modalComments,#currentuseractivitypage,#currentusergamerulespage").remove();}function closeUserInfoPopap(){$(".popover-comments").remove();}function showUserInfoPopap(el,mess,x,y){var u=mess.code;var usr=mess.author;el.append($("#userInfoPopoverTemplate").tmpl({usr:usr,avatar_s:getAvatar(usr),avatar_m:getAvatar(usr,"M"),left:x,top:y}));}function setStarRating(selector,rating){rating=Math.round(rating);if(!selector&&(rating<0||rating>5)){return false;}var el=$(selector);el.removeClass(function(index,css){return(css.match(/rating[0-5]/g)||[]).join(" ");});el.addClass("rating"+rating);}function getStarRating(selector){if(!selector){return false;}var el=$(selector);var reg=/rating([0-5])/g;var res=reg.exec(el.attr("class"));return parseInt(res&&res.length>1&&res[1])||0;}function inituploadAvatar(succ_func,err_func){function succsses(result){if((typeof(result)!="undefined")&&(typeof(result[0])!="undefined")&&(typeof(result[0].body)!="undefined")){result=$.parseJSON(result[0].body.textContent);}else{if(typeof result!=="object"){result=jQuery.parseJSON(result);}}if(succ_func&&{}.toString.call(succ_func)==="[object Function]"){succ_func(result);}}function error(result){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(result);}}var api="User/uploadavatar/";$("#avatar, #avatar2").fileupload({url:api_url+api,add:function(e,data){resetUserUpload();var uploadFile=data.files[0];var goUpload=true;if(!(/\.(gif|jpg|jpeg|png)$/i).test(uploadFile.name)){showMess("image_format_incorrect","action_message","",api);goUpload=false;}if(uploadFile.size>5000000){showMess("image_file_too_large","action_message","",api);goUpload=false;}if(goUpload){$("#prew_small_avatar").empty();$(".upload-user-avatar,.user-info-display").hide();$("div.loading-ava-container").append($("#templateLoading").tmpl());data.formData={"a":sfGetAuth()};data.submit().success(function(result){succsses(result);}).error(function(data){error(data);});}}});}function resetUserUpload(){$(".active-user-photo-button").children(".save-new-author-avatar").remove();$("div.loading-ava-container .csslogo").remove();$("#avatar_prew").empty();$(".user-info-display").show();_resize();}var user_avatar_bounds;function updatePreviewAvatar(c){var a=$("#avatar_prew");a.data("x",c.x);a.data("y",c.y);a.data("s",c.w);var pc=$(".prev-image");var rx=pc.width()/c.w;var ry=pc.height()/c.h;$(".prev-image img").css({width:Math.round(rx*user_avatar_bounds[0])+"px",height:Math.round(ry*user_avatar_bounds[1])+"px",marginLeft:"-"+Math.round(rx*c.x)+"px",marginTop:"-"+Math.round(ry*c.y)+"px"});}function cropAvatar(result){if(result&&result.url){$("#avatar_prew").data("image_code",result.image_code);var img=new Image();var d=new Date().getTime();var iurl=result.url+"?t="+d;$(img).load(function(){$("div.loading-ava-container .csslogo").remove();$(".upload-user-avatar").show();$(".user-info-display").hide();$("#prew_small_avatar").append('<div style="border-radius: 5px;overflow:hidden;width:80px;height:80px;" class="prev-image border-m"></div>');$(".prev-image").html('<img style="max-width: none;" src="'+iurl+'" />');$("#avatar_prew").html('<img src="'+iurl+'" id="avatar_image" />');$("#avatar_image").Jcrop({onChange:updatePreviewAvatar,onSelect:updatePreviewAvatar,aspectRatio:1},function(){user_avatar_bounds=this.getBounds();jcrop_api=this;jcrop_api.animateTo([img.width/2-60,img.height/2-60,img.width/2+60,img.height/2+60]);});_resize();$(".save-new-author-avatar").on("click",saveUserAvatar);$(".cancel-new-author-avatar").on("click",resetMyProfile);setTimeout(function(){_resize("",true);},300);}).attr("src",iurl);}}function saveUserAvatar(){var a=$("#avatar_prew");apiRequest({api:"User/cropavatar/",data:{x:a.data("x"),y:a.data("y"),s:a.data("s"),image_code:a.data("image_code")}},function(data){resetMyProfile();});}function initimageLoder(){var api="Message/addimage/";$("#post_image").fileupload({url:api_url+api,add:function(e,data){var uploadFile=data.files[0];var goUpload=true;if(!(/\.(gif|jpg|jpeg|png)$/i).test(uploadFile.name)){showMess("image_format_incorrect","action_message","",api);goUpload=false;}if(uploadFile.size>5000000){showMess("image_file_too_large","action_message","",api);goUpload=false;}if(goUpload){$(".upload-mess-image-btn").hide();$(".action_cancel_effect").hide();$(".upload-animation").show();data.formData=[{name:"a",value:sfGetAuth()},{name:"sitename",value:getSiteName()},{name:"thread_url",value:getThreadId()},{name:"messagecode",value:selected_message.code}];data.submit().success(function(result){action_reload();}).error(function(data){if(data.status=="200"){action_reload();}else{if(data!=undefined&&data.status=="401"){logoutFrontend();return 0;}$(".action_cancel_effect").show();$(".upload-mess-image-btn").show();$(".upload-animation").hide();showMess(data,"action_message","",api);}});}}});_resize();}function showhideMenu(t,menutoshow,menutohide){$(".share-link-container").empty();$(".action-container").empty();$('div[id^="reply_"]').remove();var carret=$(".caret",t);var carreth={};$(".caret",t.closest("div.comment-content")).each(function(){if(!$(this).is(carret)){carreth=$(this);}});t=t.closest("div.comment-content").children(".action-menu-container");var p=t.children(menutoshow);var h=t.children(menutohide);p.insertBefore(h);$(menutoshow).not(p).hide();$(menutohide).not(h).hide();if(p.length>0&&!p.is(":hidden")){carret.addClass("caret00a");carret.removeClass("caret90a");p.hide();}else{carret.removeClass("caret00a");carret.addClass("caret90a");p.show();}if(h.length>0&&!h.is(":hidden")){h.hide();carreth.addClass("caret00a");carreth.removeClass("caret90a");}}function hideAllMenus(){$(".caret").addClass("caret00a").removeClass("caret90a");$(".box-icon-action-menu").hide();}function hideActions(){$(".action-container").empty();$(".action-menu-container > ul:visible").hide();}function loadLanguage(res){current_site=res;var l="en";if(current_site&&current_site.language_id){l=getLangugeShortNameById(getCurrentLangId());}sys_lang=l;can_ajax=true;can_buy_points=current_site&&current_site.embed&&current_site.embed.buy_points=="0"?false:true;setColor();var font_size=so_config&&so_config.font_size?parseInt(so_config.font_size):0;setFontSize(font_size);if(so_config&&so_config.dev&&so_config.dev=="true"){show_buttom=true;}$("#contentWindow").append($("#bodyTemplate").tmpl());var stored_data=getFromStorage();if(stored_data){$("#comment_data").html(stored_data);}_resize();init_globals();var trace_id=/soa_([a-z0-9]+)/ig.exec(so_config.hash);if(trace_id&&trace_id[1]&&trace_id[1].length<18){apiRequest({api:"Message/resolvelink/",data:{linkcode:trace_id[1]},async:false,type:"GET"},function(data){data=data.data;var new_hash="";if(data){if(data.forum_code){new_hash+="#SOL-"+data.forum_code;if(data.thread_url){var url=/#sol-([^-#]+)-?([^-#]{40})?/i.exec(data.thread_url);if(url[2]&&typeof url[2]!="undefined"){new_hash+="-"+url[2];}}}if(data.messagecode){new_hash+="#sot_"+data.messagecode;}if(data.user_code){new_hash+="#soa_"+data.user_code;}if(new_hash){so_config.hash.replace("%23so","#so").replace(/#sot_([^#]+)/i,"").replace(/#sou_([^#]+)/i,"").replace(/#soa_([^#]+)/i,"").replace(/#sol-([^#]+)/i,"");so_config.hash=new_hash;}}});}if(isSupportedBrowser()){showMess(_("error_browser_is_not_supported"));$(".first-preloader").remove();$("body").attr("style","");}else{displayUserInfo();initEvents();}sfGetTopOffset();$("a, input, textarea, button").each(function(){$(this).attr("hideFocus","true").css("outline","none");});}function getCurrentLangId(){return current_site&&current_site.language_id;}function edit_prof_paste(el,e){var pc="";if(e&&e.clipboardData&&e.clipboardData.getData){var types=[];for(var i=0;i<e.clipboardData.types.length;i++){types.push(e.clipboardData.types[i]);}if(types.indexOf("text/plain")>=0){pc=e.clipboardData.getData("text/plain");}else{if(types.indexOf("text/html")>=0){pc=$.trim(e.clipboardData.getData("text/html").replace(/(<([^>]+)>)/ig,""));}}}else{if(window.clipboardData&&window.clipboardData.getData){pc=$.trim(window.clipboardData.getData("Text"));}}if(pc.length==0){if(e.preventDefault){e.stopPropagation();e.preventDefault();}}return false;}function checkIsAllowedDomain(d,f){if(d){d=d.toLowerCase();}if(f){f=f.toLowerCase();}f=f.replace(/\*\./ig,".*").replace(/\s/g,"").replace(/,/g,"|");var patt=new RegExp(f);var res=d.replace(patt,"");if(res.length==0){return true;}return false;}var times_to_try=1;var view_type=1;function templates_loaded(){can_ajax=true;function succsses(res){if(res.embed&&typeof res.embed.community_tab_show!="undefined"){if(show_community!="false"&&show_community!="true"){show_community=res.embed.community_tab_show=="1"?true:false;}else{show_community=show_community=="false"?false:true;}}if(res.embed&&typeof res.embed.view_type!="undefined"){view_type=res.embed.view_type;}if(res.embed&&typeof res.embed.line_break!="undefined"&&so_config["skip_empty_line"]!="false"){skip_empty_line=so_config["skip_empty_line"]&&so_config["skip_empty_line"]=="true"?true:res.embed.line_break=="1"?true:false;}if(!com_groupe_order&&res.embed&&res.embed.community_tab_order){com_groupe_order=res.embed.community_tab_order;}if(res.embed&&typeof res.embed.help_tab_show!="undefined"){help_tab_show=res.embed.help_tab_show=="1"?true:false;}if(com_max_lines==""&&res.embed&&typeof res.embed.community_list_length!="undefined"){com_max_lines=res.embed.community_list_length;}var current_page_url=cutwww(so_config.parent).toLowerCase(),api_site_url=cutwww(res.url)?cutwww(res.url).toLowerCase():"",allowed_domains=res.embed&&res.embed.allowed_domains?res.embed.allowed_domains:"";if(!res.url&&!allowed_domains){if(res.status=="404"){showNoSite();}else{if(times_to_try>0){setTimeout(templates_loaded,5000);times_to_try--;}else{showTryAgain();}}return;}else{if(api_site_url.indexOf(current_page_url)<0&&!checkIsAllowedDomain(current_page_url,allowed_domains)){showEnbedIncorect();return;}else{if(res.is_community!=1){show_community=false;}widget_type=res.embed.widget_type;if(res.embed.recommended_count){recomend_max_lines=res.embed.recommended_count;}var result=res;getSiteGameRules(function(data){site_game_rules=data;if(!isEmptyGamerules(data)){loadLanguage(result);}getSiteGameRanks(function(){loadLanguage(result);});});}}}getSitePublic(getSiteName(),function(res){succsses(res);},function(res){succsses(res);});}function isEmptyGamerules(data){if(!isEmptyObj(data)){for(var i in data){if((Number(data[i])||Number(data[i])==0)&&i!="points_for_dollar"){return false;}}}return true;}function saveuserdata(data){function finish_field(){var p=pshow.parent();el.hide();try{form.remove();}catch(e){}if(text!=""){pshow.text(text);p.removeClass("notext");if(fname=="name"){$("#display_name").html(text);}}else{pshow.html('<a class="link-color">'+_("ph_"+fname)+"</a>");p.addClass("notext");}pshow.show();p.removeClass("no-border");_resize();}var d={};var el=$(data);var form=el.parent();var text=$.trim(el.val());var pshow=form.siblings(".editabletext");var fname=pshow.data("field-name");if(el.data("value")==text){finish_field();return;}d[fname]=text;apiRequest({api:"User/update/",data:d},function(){for(var n in d){current_user[n]=d[n];if(message_list.viewer){message_list.viewer[n]=d[n];}if(viewer){viewer[n]=d[n];}}finish_field();});}function applyVote(type,count,context){if(authCheck()){var mess=getMessageData(context);apiRequest({api:"Message/rank/",data:{messagecode:mess.code.replace("_clone",""),count:count,type:type}},function(){action_reload();},"","message_box_"+mess.code);}}function categoriesForSelect(val){function success(cat){var catData=cat.data;if(catData){var catTmplData=new Array;for(var i in catData){if(catData[i].toLowerCase().indexOf(val.toLowerCase())>=0){catTmplData.push(catData[i]);}}if(catTmplData[0]){catTmplData={catTmplData:catTmplData};$(".select-cat").find("ul.dropdown-menu").html($("#selectCategoryTemplate").tmpl(catTmplData));$(".select-cat").find(".btn-group").addClass("open");}else{$(".select-cat").find(".btn-group").removeClass("open");}}}getCategories(getSiteName(),function(cat){success(cat);},function(cat){success(cat);});}function openCommentForMe(id,clone){if(authCheck()){apiRequest({api:"Message/open/",data:{messagecode:id}},function(){action_reload();},"","message_box_"+id+(clone?"_clone":""));}}function showDiscussionTab(){var c=$("#comments");if(c.length>0&&!c.is(":hidden")){action_reload();}else{action_back_reload(function(){addClassAct($("#discussion").parent());});}}function showVoteLikeActionBox(type_name,context){var rules=getCurrentUserGameRules();var data={name:"apply_"+type_name,title:_("effect_"+type_name+"_text"),points_price:rules[type_name]};showAction($(context),"#templateSimpleAction",data);recalk_points(1);}$(document).ready(function(){$(templates_string).appendTo("body");templates_loaded();});function initEvents(){$(window).resize(function(){_resize();});if(is_mob()){$("body").addClass("mobile");}if(window.addEventListener){addEventListener("message",listener,false);}else{attachEvent("onmessage",listener);}var d=$(document);d.on("click",".login_window, .signup_window, .icon-facebook, .icon-twitter, .icon-vk, .icon-so, .icon-yahoo, #facebook-login, #vk-login, #tw-login",doSocialLogin);d.on("click",".icon-google, #google-login",function(e){doSocialLogin($(this).attr("data-href"),{h:680,w:1034});});d.on("click","#openInIos",function(e){openInIos();});d.on("mouseover",".comment-avatar > div > img",function(){var el=$(this).parent().parent();if(el.parents(".reply-container").length>0){return 0;}var mess=getMessageData(this);var e_ofst=(el.offset());if(el.children(".popover").length==0){showUserInfoPopap(el,mess,e_ofst.left+55,e_ofst.top-5);}}).on("mouseleave",".comment-avatar",function(){closeUserInfoPopap();}).on("mouseover","i.icon-pencil",function(){closeUserInfoPopap();});d.on("mouseover",".topic-avatar",function(){var el=$(this);var thread_code=el.attr("thread_code");var thr=getTopicInf(thread_code);var e_ofst=(el.offset());if(el.children(".popover").length==0){showUserInfoPopap(el,thr,e_ofst.left+60,e_ofst.top-5);}}).on("mouseleave",".topic-avatar",function(){closeUserInfoPopap();});d.on("click","#get_for_my_site",function(){var url=base_url+"addsite";if(!sfGetAuth()){url=base_url+"signup";}window.open(url,"_blank");});d.on("click","#show_more_on_site",function(){var message_id=$(this).attr("data-next");var user_code=$(this).attr("data-user_code");if(message_id){displayProfileComments(user_code,message_id);}});d.on("click","#show_more_aactivity",function(){var count=$(this).attr("data-count");fillMyActivity(Number(count)+10);});d.on("click",".editabletext",function(e){if($(".edit-profile-input").length>0){$(".edit-profile-input").trigger("savedata");}else{var t=$(this);var container=$(this).parent();var width=t.outerWidth()-60;if(width<200){width=200;}t.parent().addClass("no-border");t.hide();var text="";if(t.html().search('<a class="link-color">')<0){text=t.text();}var maxlen=t.data("field-len");if(!maxlen){maxlen=200;}var form=$('<form class="edit-profile-form">'+'<input class="edit-profile-input main-color input-border-color" onpaste="edit_prof_paste(this, event)" type="text" style="width:'+width+'px;" autocomplete="off" maxlength="'+maxlen+'" data-value="'+text.replace(/"/g,"&quot;")+'" value="'+text.replace(/"/g,"&quot;")+'">'+'<input type="submit" class="btn btn-custom link-color " value="'+_("btn_save")+'">'+'<i class="icon-ok-input link-color ">!</i>'+"</form>");if(is_mob()){setTimeout(function(){container.append(form);},100);}else{container.append(form);$(".edit-profile-input").focus().selectRange(maxlen);}}});d.on("savedata",".edit-profile-input",function(){saveuserdata(this);});if(!is_mob()){d.on("blur",".edit-profile-input",function(){saveuserdata(this);});}d.on("submit","form.edit-profile-form",function(e){e.preventDefault();saveuserdata($(this).children(".edit-profile-input"));return false;});d.on("click","i.icon-voted-up,i.icon-voted-down",function(e){var mess=getMessageData(this);var mess_code=mess.code.replace("_clone","");var code=mess.parent_code;mess=false;if(mess&&mess.code){focusOnComment(mess.code);base_message="";show_history="0";}else{setOriginals(mess_code);message_list_hash="";focus_on_comment_id=mess_code;reply_raw_data={};action_reload(mess_code);}});d.on("mouseover click",'.wating_moderation,.icon-pencil, [class^="userinfo_"],ul.box-icon-action-menu>li,i.icon-voted-up,i.icon-voted-down,.expert-icon,.activity-link',function(e){$(".tooltip").remove();var iw=$("body").innerWidth();var t=$(this);var text=t.data("title");var positionx=t.data("positionx");var positiony=t.data("positiony");if(!text){return;}var p=t.position();var x=p.left+t.width()/2;var y=p.top;var tip=$(getTooltipHtml(text));t.before(tip);tip=$(this).siblings(".tooltip");tip.css("min-width","200px");var koefx=positionx=="left"?1:2;var w=tip.width()/koefx-1;var left=x-w;if(left+tip.width()>iw){left=iw-tip.width();}var koefy=positiony=="middle"?2:1;var h=tip.height()/koefy;if(positiony=="middle-bottom"){h=0;}left=left>0?left:0;left-=10;var top=y-h;tip.css({left:left+"px",top:top+"px"}).addClass("in");if(t.hasClass("icon-voted-up")||t.hasClass("icon-voted-down")){var h=tip.height()/2;var top=y-h/2-2;tip.css({left:left+"px",top:top+"px",border:"1px solid "+t.css("color"),"border-radius":"10px"}).addClass("in");}}).on("mouseleave",'.wating_moderation,.icon-pencil, [class^="userinfo_"],ul.box-icon-action-menu>li,i.icon-voted-up,i.icon-voted-down,.expert-icon,.activity-link',function(e){$(".tooltip").remove();});function set_auto_post_message(){var comment="";var parent="";if($(this).parents(".reply-container").length>0){var raw_parent=$(this).parents("[id^=reply_]").attr("id");parent=/reply_([^\s]+)/.exec(raw_parent)[1];comment=filterComment(htmlDecode($(".reply-container [id^='reply_for_']").html()));}else{comment=filterComment(htmlDecode($("#comment_data").html()));}fast_message_signup["comment"]=comment;fast_message_signup["parent"]=parent;}d.on("click",".go_frontend_login",function(e){var message_box="";e.preventDefault();replaceAll();var comment="";var parent="";if($(this).parents(".reply-container").length>0){message_box=$(this).last().parents(".postbox-comments[id^='comm_']").first().prev().attr("id");var raw_parent=$(this).parents("[id^=reply_]").attr("id");parent=/reply_([^\s]+)/.exec(raw_parent)[1];comment=filterComment(htmlDecode($(".reply-container [id^='reply_for_']").html()));}else{comment=filterComment(htmlDecode($("#comment_data").html()));}fast_message_signup["comment"]=comment;fast_message_signup["parent"]=parent;go_frontend_login($(this).siblings(".f_email"),$(this).siblings(".f_name"),$(this).siblings(".terms-block").children(".i-agree"),message_box);});d.on("click","#top_menu_list",function(){$("ul.dropdown-menu").hide();$("#top_menu_list").siblings("ul").show();});d.on("click",".buy_points",function(){windowOpenBuyPoints(0);});d.on("click",".authormenubut",function(){if(current_user.is_removed){goBackend();return false;}selected_message=getMessageData(this);selected_message.code=selected_message.code.replace("_clone","");showhideMenu($(this),"ul.box-icon-author","ul.box-icon-message");});d.on("click focus",".f_email, .f_name",function(){$(".terms-block").slideDown();});d.on("click",".messagemenubut",function(){if(current_user.is_removed){goBackend();return false;}selected_message=getMessageData(this);selected_message.code=selected_message.code.replace("_clone","");showhideMenu($(this),"ul.box-icon-message","ul.box-icon-author");});d.on("click",".share-button-wraper",function(){if(is_mob()){$(this).find("li").addClass("share-active");$(this).find("li").css("opacity",1);}});d.on("mouseup","form.message-add-form",function(e){});d.on("click rightclick mouseup","body",function(e){var t=$(e.target);if(!t.is("#display_name")&&!t.is("#top_menu_list")){remove_dropdown();}if(t.closest("#text_message_edit").length===0&&t.closest(".set_edit").length===0){$(".set_edit").addClass("disabled");}if(!t.is(".wating_moderation")&&!t.is(".icon-pencil")&&!t.is('[class^="userinfo_"]')&&!t.is("ul.box-icon-action-menu>li")){$(".tooltip").remove();}if($("#text_message_edit").length>0){editingTextEvent();}if($(".comment-div").length>0){setTimeout(function(){$(".comment-div").each(function(e){selectTextEvent(this);});},100);}if($("#text_message").length>0){remarkingTextEvent();}if(!t.is(".sort-menu")&&e.type=="click"){$(".sort-menu").removeClass("active");}_resize();return 0;});d.on("click","#logout",logoutFrontend);d.on("click","#smile_prew div",function(e){remove_smile(e.target);});d.on("click","#smile_add div",function(e){add_smile(e.target);});d.on("click",".save_edit_comment",function(){if(authCheck()){save_edit_comment();}});d.on("click",".save_add_format",function(){if(authCheck()){save_add_format();}});d.on("click","#fake_avatar, #post_image",function(e){if(!authCheck()){e.stopPropagation();e.preventDefault();}});d.on("click",".save_emotion",function(){if(authCheck()){saveEmotion();}});d.on("click",".close_imgprew_btn",function(){$(this).closest(".vimage-prew-container").empty();vimage_visible=false;_resize();});d.on("click",".video-icons",function(){var type=$(this).data("vimage-type");var img_url=$(this).data("image-url");var date_added=$(this).data("date_added");var author_name=$(this).data("author_name");var author_code=$(this).data("author_code");var author_rank_name=$(this).data("author_rank_name");var author_points=$(this).data("author_points");var vid=$(this).data("vid");var vkey=$(this).data("vkey");var p=$(this).closest("div.comment-content").children("div.vimage-prew-container");var height_p=350;var width_p="350";var imgps=$(".img_prew_spa > img");if(imgps.length>0&&!imgps.is(":hidden")){height_p=imgps.height()-10;width_p=imgps.width()-10;}vimage_visible=true;p.empty().append($('<p style="margin: 9px 0; height: '+height_p+"px; width: "+width_p+'px;""><span class="img_prew_spa img_prew-cent">'+$("<div>").append($("#templateLoading").tmpl()).html()+'<span class="vimage-desk">&nbsp;</span></span></p>'));if(type=="image"){var img=new Image();$(img).load(function(){$(this).hide();p.empty().append($('<p class="img_prew_container"><span class="img_prew_spa"><span class="close_imgprew_btn close-icon system-color">x</span><span class="vimage-desk">'+_("image_author_text")+" "+'<a class="userinfo_'+author_code+'" hidefocus="true" style="outline: none;" data-title="'+addCommas(author_points)+" points"+author_rank_name+'">'+author_name+"</a> "+""+date_added+" </span></span></p>"));$("span.img_prew_spa",p).prepend(this);$(this).fadeIn(200);_resize();}).attr("src",img_url);}else{p.empty().append($('<p class="img_prew_container"><span class="img_prew_spa"><span class="close_imgprew_btn close-icon system-color">x</span><span class="img_prew_spa" style="display: block;">'+getVideoFrame(vid,vkey)+'<span class="vimage-desk">'+_("image_author_text")+" "+'<a class="userinfo_'+author_code+'" hidefocus="true" style="outline: none;" data-title="'+addCommas(author_points)+" points"+author_rank_name+'">'+author_name+"</a> "+""+date_added+" </span></span></p>"));}_resize();});d.on("click","#discussion",function(){showDiscussionTab();});d.on("click","#commu_tab",function(){var c=$("#community");if(!(c.length>0&&!c.is(":hidden"))){displayCommunity();$("#comments-disc-nav .act").removeClass("act");$(this).parent().addClass("act");}});d.on("click","#my_profile_tab",function(){if(current_user.is_removed){goBackend();return false;}var c=$("#currentuserpage");if(!(c.length>0&&!c.is(":hidden"))){displayMyProfile();$("#comments-disc-nav .act").removeClass("act");$(this).parent().addClass("act");}});d.on("click","#my_activity_tab",function(){if(current_user.is_removed){goBackend();return false;}var c=$("#currentuseractivitypage");if(!(c.length>0&&!c.is(":hidden"))){displayMyActivity();$("#comments-disc-nav .act").removeClass("act");$(this).parent().addClass("act");}});d.on("click","#my_gamerules_tab",function(){var c=$("#currentusergamerulespage");if(!(c.length>0&&!c.is(":hidden"))){displayMyGameRules();$("#comments-disc-nav .act").removeClass("act");$(this).parent().addClass("act");}});d.on("click","#my_rewards_tab",function(){if(current_user.is_removed){goBackend();return false;}var c=$("#rewardspage");if(!(c.length>0&&!c.is(":hidden"))){displayMyRewards();}$("#comments-disc-nav .act").removeClass("act");$(this).parent().addClass("act");});d.on("click",".update-my-rating",function(e){try{$("#comment_data").addClass("revote");resetCommentBox($("#comment_data"));}catch(err){}$(".go-comment-button, .hide-rating").show();});d.on("keydown","div.comment-div, #appendedDropdownButton",function(e){if(e.keyCode=="16"||e.keyCode=="18"){return false;}var cid=$(this).attr("id");if(e.keyCode==13&&(cid=="forum_title"||cid=="forum_description"||cid=="topic_data")){return false;}if(e.keyCode==8&&$(".fake_br").length>0&&skip_empty_line){$(".fake_br").prev("br").remove();$(".fake_br").remove();return false;}if(e.keyCode==13&&(e.metaKey||e.ctrlKey)){if(authCheck()){$(".fake_br").remove();$(this).blur();var c=$("#comments");if(c.length<=0||c.is(":hidden")){action_back();}replaceAll();if($(this).attr("id")=="comment_data"){post_custom_rating=getStarRating("#post_rating");remTag("#comment_data span.blur");postMessageFrontend($.trim(htmlDecode($("#comment_data").html())));}else{if($(this).attr("id")=="forum_title"||$(this).attr("id")=="forum_description"||$(this).attr("id")=="appendedDropdownButton"){createForum();_resize();}else{if($(this).attr("id")=="topic_data"){var fid=$(this).parents(".postbox").find("#create_topic").attr("forum_code");createTopic(fid);_resize();}else{if($(this).attr("id")=="text_edit_comment"){saveMessageEdit();}else{var mess=getMessageData(this);remTag("#reply_for_"+mess.code+" span.blur");postMessageFrontend($.trim(htmlDecode($("#reply_for_"+mess.code).html())),mess.code);}}}}_resize();return false;}}else{if(e.keyCode==13){$(".fake_br").remove();var el=$(this).get(0);var range=window.getSelection().getRangeAt(0);var leng=el.textContent.length;var caret_pos=getCharacterOffsetIn(range,el);var br="";if(caret_pos==leng){br="<br>";}if(!skip_empty_line){if(caret_pos<leng){br+="<br>";}else{br+='<br class="fake_br"/>';}}else{if(caret_pos==leng){br='<br class="fake_br"/>';}}if(document.queryCommandSupported("insertHTML")){document.execCommand("insertHTML",false,"<br>"+br);}else{try{if(br){br='<br class="fake_br"/>';}insertTextAtCursor("<br>"+br);}catch(e){}}changeInContentEditable($(this));return false;}else{if(!e.metaKey&&!e.ctrlKey){$(".fake_br").remove();}}}});d.on("keypress",".comment-div",function(e){var loc_this=$(this);setTimeout(function(){changeInContentEditable(loc_this);},1);});d.on("keydown",".comment-div",function(e){var kk=e.keyCode;var loc_this=$(this);if(kk==8||kk==46){setTimeout(function(){changeInContentEditable(loc_this);},1);}});d.on("keypress","div.comment-div, #appendedDropdownButton",function(e){_resize();});d.on("click","#show_more",function(){show_more();});d.on("click",".non_free_comment",function(){non_free_show_select_prom($(this));});d.on("click",".select-btn",function(){saveSelectText($(this));});d.on("click",".icon-hiding-comment",function(){var mess=getMessageData(this);var code=mess.code;hideAllMenus();closeReplyBoxes();$("#comm_"+code+" .less").click();if($("#comm_"+code).length>0){$(".vimage-prew-container",$("#comm_"+code)).html(" ");$("#comm_"+code).toggleClass("smaller-comment");}});d.on("click",".reply",function(){if(current_user.is_removed){goBackend();return false;}var mess=getMessageData(this);var mess_code=mess.code.replace("_clone","");if(!isCloneComment(mess.code)){openReplyMessageBox(mess);}else{var code=mess.code;code=code.replace("_clone","");mess=getMes(code);if(mess&&mess.code){openReplyMessageBox(mess,"");focusOnComment(mess.code);base_message="";show_history="0";}else{setOriginals(mess_code);message_list_hash="";focus_on_comment_id=mess_code;reply_raw_data={};reply_raw_data.parrent_id=code;noblink=true;action_reload(mess_code);}}});d.on("click","#post_message",function(e){if($(this).attr("class").indexOf("disabled")>=0){return false;}$(".comment-btn").addClass("disabled");$("#comment_data").removeClass("revote");$(".fake_br").remove();var c=$("#comments");if(c.length<=0||c.is(":hidden")){action_back();}replaceAll();remTag("#comment_data span.blur");$(".comment-div").blur();if(authCheck()){post_custom_rating=getStarRating("#post_rating");if(post_custom_rating>0){$(".update-my-rating").show();}postMessageFrontend($.trim(htmlDecode($("#comment_data").html())));}});d.on("click",".comment-cancel",function(e){var t=$(this);var part=t.closest("form.message-add-form").data("comment_price_part");non_free_reset(t,true);if(part>1){return true;}var mess=getMessageData(t);if(mess.code.length>0){$('<div contenteditable="true"></div>').appendTo(t.parent()).focus().blur().remove();$("#reply_"+mess.code).remove();deleteFromStorage(mess.code);}else{deleteFromStorage();var container=t.closest("form").find(".comment-div");try{container.removeClass("revote");resetCommentBox(container);}catch(err){}$(".go-comment-button, .hide-rating").hide();}});d.on("click",".reply_button",function(){if($(this).attr("class").indexOf("disabled")>=0){return false;}$(".comment-btn").addClass("disabled");if(authCheck()){replaceAll();var mess=getMessageData(this);remTag("#reply_for_"+mess.code+" span.blur");postMessageFrontend($.trim(htmlDecode($("#reply_for_"+mess.code).html())),mess.code);return false;}});d.on("click",".msg_vote_up, .msg_vote_down, .msg_like, .msg_dislike",function(){if(current_user.is_removed){goBackend();return false;}if(authCheck()){var e=$(this);var mess_box=$(this).parents(".postbox-comments").first().prev().attr("id");var mess=getMessageData(e);var action=e.attr("class");var type=0;var count=1;if(action.indexOf("vote")>0){type=1;}if(action.indexOf("down")>0||action.indexOf("dislike")>0){count=-1;}var g_rules=getCurrentUserGameRules();if(type==1&&count==1&&typeof g_rules.vote_up!=="undefined"&&g_rules.vote_up!=0){showVoteLikeActionBox("vote_up",this);}else{if(type==1&&count==-1&&typeof g_rules.vote_down!=="undefined"&&g_rules.vote_down!=0){showVoteLikeActionBox("vote_down",this);}else{if(type==0&&count==1&&typeof g_rules.like!=="undefined"&&g_rules.like!=0){showVoteLikeActionBox("like",this);}else{if(type==0&&count==-1&&typeof g_rules.dislike!=="undefined"&&g_rules.dislike!=0){showVoteLikeActionBox("dislike",this);}else{apiRequest({api:"Message/rank/",data:{messagecode:mess.code.replace("_clone",""),count:count,type:type}},function(){action_reload();},"",mess_box);}}}}}});d.on("click","div.wrap-page > ul.dropdown-menu",function(){remove_dropdown();});d.on("mouseleave","ul.dropdown-menu,a.dropdown-toggle",function(){dropdown_timer=setTimeout(function(){remove_dropdown();},2000);});d.on("mouseenter","ul.dropdown-menu,a.dropdown-toggle",function(){clearInterval(dropdown_timer);});d.on("mouseleave",".sort-menu > a, .sort-menu ul",function(){dropdown_sort_timer=setTimeout(function(){remove_sort_dropdown();},2000);});d.on("mouseenter",".sort-menu > a, .sort-menu ul",function(){clearInterval(dropdown_sort_timer);});d.on("click","a.dropdown-toggle:not(#top_menu_list)",function(){$("ul.dropdown-menu").hide();});d.on("click",".fogot-password",function(){var u=frontend_base_url+"frontend/embed/forgot/?l="+getLangugeShortNameById(getCurrentLangId());window.open(httpsUrl(u),"loginWin","width=640, height=640, toolbar=0");});d.on("click",'.box-icon-action-menu li[class$="_higher"],.box-icon-action-menu li[class$="_lower"]',function(){rank_name=$(this).attr("class");rank_name=rank_name.replace(/_lower|_higher/g,"");var data={name:"rank",inputs:[{label:_("effect_multi_"+rank_name+"_text"),end_id:"ainput-end",end_text:"times",attr:{"data-input-info":"#ainput-end","id":"rank_value","maxlength":"7","type":"text","class":"span1 calc_points main-color","value":"1"}}]};showAction($(this),"#templateSimpleAction",data,function(){setTimeout(function(){$("#rank_value").focus();},100);});});d.on("click","li.ignore_user",function(){var data={name:"ignore_user",title:_("effect_ignore_text_p1")+" <b>"+selected_message.author.name+"</b> "+_("effect_ignore_text_p2")};showAction($(this),"#templateSimpleAction",data);recalk_points(1);});d.on("click","li.prevent_from_posting",function(){var data={name:"prevent_from_posting",inputs:[{label:_("effect_prevent_from_posting_text_p1")+" <b>"+selected_message.author.name+"</b> "+_("effect_prevent_from_posting_text_p2"),end_id:"ainput-end",end_text:"fo_hours",attr:{"data-input-info":"#ainput-end","id":"prevent_hours",maxlength:"7",type:"text","class":"span1 calc_points main-color",value:"1"}}]};showAction($(this),"#templateSimpleAction",data,function(){setTimeout(function(){$("#prevent_hours").focus();},100);});});d.on("click","li.turn_off_replies",function(){var data={name:"turn_off_replies",title:_("effect_turn_off_reply"),inputs:[{attr:{type:"hidden","class":"calc_points",value:"1"}}]};showAction($(this),"#templateSimpleAction",data);});d.on("click",".claim-for",function(){hideErr();$(".buy-cancel").hide();$(".claim-for").show();$(this).parents(".comment").find(".buy-cancel").show();$(this).hide();});d.on("click",".buy-reward",function(){var price=$(this).data("price");if(price&&price>0){total_points=price;}claimReward($(this).data("rewid"));});d.on("click",".cancel-reward",function(){$(this).parents(".buy-cancel").hide();$(this).parents(".comment").find(".claim-for").show();});d.on("click","li.spam_mark",function(){var data={name:"spam_mark",custom_apply_title:_("effect_inappropriate_text")};showAction($(this),"#templateSimpleAction",data);});d.on("click","li.change_name",function(){var data={name:"change_name",inputs:[{label:_("effect_change_author_name_text_p1")+' <b>"'+selected_message.author.name+'"</b> '+_("effect_change_author_name_text_p2"),end_text:" "+_("effect_change_author_name_text_p3")+" ",attr:{id:"fakename",maxlength:"50",type:"text","class":"main-color"}},{end_id:"ainput-end",end_text:"hours",attr:{"data-input-info":"#ainput-end",id:"fakename_hours","class":"span1 calc_points main-color",name:"fakename_hours",maxlength:"7",type:"text",value:"1"}}]};showAction($(this),"#templateSimpleAction",data,function(){setTimeout(function(){$("#fakename").focus();},100);});});d.on("click","li.change_avatar",function(){showAction($(this),"#templateActionChangeAvatar",{},function(){init_avatar_uploader();setTimeout(function(){$("#avatar_hours").click().focus();},100);});});d.on("click","li.own_image, li.other_image",function(){showAction($(this),"#templateActionAddImage",{},function(){initimageLoder();});});d.on("click","li.own_video,li.other_video",function(){var data={name:"embed_code",inputs:[{attr:{"class":"pholder main-color",id:"embed_code_value",type:"text",style:"width:360px; font-size:13px;",placeholder:_("effect_add_video_text")}}]};showAction($(this),"#templateSimpleAction",data);$("#embed_code_value").placeholder();recalk_points(1);});d.on("click",".save_embed_code",function(e){if($("#embed_code_value").val()==""){showMess("video_url_invalid","action_message");return;}if(authCheck()){apiRequest({api:"Message/addvideo/",data:{messagecode:selected_message.code,video_url:$("#embed_code_value").val(),is_preview:0}},function(){action_reload();});}});d.on("click","#post_image_url",function(e){if($("#insert_image_url").val()==""){showMess("img_url_invalid","action_message");return;}if(authCheck()){apiRequest({api:"Message/addimage/",data:{messagecode:selected_message.code,image_url:$("#insert_image_url").val()}},function(){action_reload();});}});d.on("click",".send_contact",function(e){var text=$.trim($("#contact_body").val());if(text&&text.length>0){if(authCheck()){apiRequest({api:"Site/complain/",data:{body:text,shortname:getSiteName()}},function(){showMess("user_block_succ","","succ","Site/blockuser/");hideContactUs();});}}else{showMess("contact_us_notext","","err");}});d.on("click",".cancel_contact",function(){hideContactUs();});d.on("click","#pop_alert",function(){hide_popapalert();});d.on("click","li.reputation_bomb",function(){var data={name:"reputation_bomb",inputs:[{label:_("effect_reputation_bomb_text_p1")+" <b>"+selected_message.author.name+"</b> "+_("effect_reputation_bomb_text_p2"),end_id:"ainput-end",end_text:"effect_reputation_bomb_text_p3",attr:{"data-input-info":"#ainput-end",id:"points",maxlength:"7",type:"text","class":"span1 calc_points main-color",value:"1"}}]};showAction($(this),"#templateSimpleAction",data,function(){setTimeout(function(){$("#points").focus();},100);});});d.on("click","li.transfer_points",function(){var data={name:"transfer_points",inputs:[{label:_("effect_transfer_points_text")+" <b>"+selected_message.author.name+"</b> ",end_id:"ainput-end",end_text:"fo_points",attr:{"data-input-info":"#ainput-end",id:"points",maxlength:"7",type:"text","class":"span1 calc_points main-color",value:"1"}}],custom_apply_title:_("effect_transfer_points_text_apply")};showAction($(this),"#templateSimpleAction",data,function(){setTimeout(function(){$("#points").focus();},100);});});d.on("click","li.own_emotion, .other_emotion",function(){showAction($(this),"#templateActionEmotion");});d.on("click","li.own_remark,li.other_remark",function(){raw_comment_text=selected_message.body.remarked_text;raw_comment_text=raw_comment_text.replace(/(<a)([^>]+)/,'$1 class="nodat"');selected=false;times_edited=0;showAction($(this),"#templateActionEditComment",{message_body:raw_comment_text},function(){setTimeout(function(){$("#time_edit_comment").focus();},100);});});d.on("click",".message_text_edit",function(){selected_message=getMessageData(this);var text=selected_message.html_mode?selected_message.body.raw:selected_message.body.text;showAction($(this),"#templateActionEditMessageComment",{message_body:text,formating:(selected_message.body.effects&&selected_message.body.effects.remarks&&selected_message.body.effects.remarks.length>0)||(selected_message.body.formatting&&selected_message.body.formatting.length>0)},function(){setTimeout(function(){$("#time_edit_comment").focus();},100);});});d.on("click",".message_remove",function(){selected_message=getMessageData(this);var data={name:"message_remove",custom_apply_title:_("effect_message_remove_tooltip")};showAction($(this),"#templateSimpleAction",data);});d.on("click","li.own_format, li.other_format",function(){raw_comment_text=selected_message.body.text;selected=false;showAction($(this),"#templateActionEditCommentBui",{message_body:raw_comment_text},function(){});});d.on("click",".save_spam_mark",function(){if(authCheck()){apiRequest({api:"Message/spam/",data:{messagecode:selected_message.code}},function(){action_reload();});}});d.on("click",".moderator_menu_block",function(){hideActions();var show_message=$(this).parents(".postbox-comments").first().prev().attr("id");if(authCheck()){var selected_message=getMessageData(this);apiRequest({api:"Site/blockuser/",data:{description:"Black List",usercode:selected_message.author.code,shortname:getSiteName()}},function(){action_reload();setTimeout(function(){showMess("user_block_succ",show_message,"succ","Site/blockuser/");},1200);},function(xhr){if(xhr.responseText!=undefined&&xhr.responseText=="access denied"){action_reload();placeWidget();}else{standartAjaxErrorHandler(xhr,"siteblockuser",show_message);}});}});d.on("click",".save_turn_off_replies",function(){if(authCheck()){apiRequest({api:"Message/turnoffreplies",data:{messagecode:selected_message.code}},function(){action_reload();});}});d.on("click",".save_edit_message_comment",function(){saveMessageEdit();});d.on("click",".save_message_remove",function(){if(authCheck()){apiRequest({api:"Message/remove/",data:{messagecode:selected_message.code}},function(){action_reload();},"","message_box_"+selected_message.code);}});d.on("click",".save_ignore_user",function(){if(authCheck()){apiRequest({api:"User/ignore/",data:{usercode:selected_message.author.code}},function(){action_reload();});}});d.on("click",".reset_text_input",function(){reset_text_input();});d.on("click",".set_edit",function(){if($(this).hasClass("disabled")){return;}var clas=$(this).attr("data-type");makeSelectedTextStyle(clas);});d.on("click",".save_text_input",function(){save_text_input();});d.on("click",".moderator_menu_approve, .moderator_menu_delete, .moderator_menu_spam",function(){hideActions();var postbox=$(this).parents(".postbox-comments").first().attr("id");var show_message=$(this).parents(".postbox-comments").first().prev().attr("id");var mess="";var selected_message=getMessageData(this);var status="";if($(this).hasClass("moderator_menu_spam")){status="1";mess="spam_message_body";}else{if($(this).hasClass("moderator_menu_delete")){status="2";mess="mess_removed";}else{if($(this).hasClass("moderator_menu_approve")){status="3";}}}if(authCheck()&&status!=""){apiRequest({api:"Message/setstatus/",data:{messages:selected_message.code.replace("_clone",""),status:status}},function(){if(status==="3"){action_reload();setTimeout(function(){showMess("message_setstatus_"+status,show_message,"succ","Message/setstatus/");},1200);}else{$("#"+postbox).find(".mod-desc").html("<span class='mess-removed system-color'>"+_(mess)+"</span>");$("#"+postbox).find(".nav.nav-pills.navsalut").remove();$("#"+postbox).find(".bottom-nav-comments").remove();$("#"+postbox).find(".post-rating").remove();}},function(xhr){if(xhr.responseText!=undefined&&xhr.responseText=="access denied"){action_reload();}else{standartAjaxErrorHandler(xhr,"default",show_message);}});}});d.on("click",".save_rank",function(){if($("#rank_value").val()==""){showMess("count_invalid","action_message");return;}if(authCheck()){var r_val=Math.abs($("#rank_value").val());var type=rank_name.indexOf("vote_up")!==-1||rank_name.indexOf("vote_down")!==-1?1:0;var rank=rank_name.indexOf("dislike")!==-1||rank_name.indexOf("down")!==-1?-1*r_val:r_val;apiRequest({api:"Message/multirank/",data:{messagecode:selected_message.code,count:parseInt(rank),type:type}},function(){action_reload();});}});d.on("click",".save_prevent_from_posting",function(){if(authCheck()){apiRequest({api:"User/preventfromposting/",data:{usercode:selected_message.author.code,count:Math.abs($("#prevent_hours").val())}},function(){action_reload();});}});d.on("click",".save_apply_vote_up",function(){applyVote(1,1,this);});d.on("click",".save_apply_vote_down",function(){applyVote(1,-1,this);});d.on("click",".save_apply_like",function(){applyVote(0,1,this);});d.on("click",".save_apply_dislike",function(){applyVote(0,-1,this);});d.on("click",".save_change_name",function(e){if(authCheck()){var usercode=selected_message.author.code;var fakename=$.trim($("#fakename").val());var fakename_hours=$("#fakename_hours").val();if(!fakename_hours){fakename_hours=1;}apiRequest({api:"User/fakename/",data:{usercode:usercode,fakename:fakename,count:fakename_hours}},function(){action_reload();});}});d.on("click",".action_back",function(){action_back();});d.on("click",".action_cancel_effect",function(){action_cancel_effect();});$("head").append($('<style type="text/css">.body{background:#000;}</style>'));d.on("keypress",".calc_points, .just_digit",function(e){if(!inputDigitsOnly(e)){return false;}});function filter_digits(el,e){var val=Math.abs(parseInt((el.val().replace(/[^\d]/g,""))));if(val<0||isNaN(val)){if(e.type=="focusout"||e.type=="blur"){val=1;}else{val="";}}el.val(val);}d.on("keyup change blur",".just_digit",function(e){filter_digits($(this),e);});d.on("keyup change blur",".calc_points",function(e){var el=$(this);filter_digits(el,e);var val=el.val();recalk_points(val);var data_text_id=$(this).data("input-info");if(data_text_id){var data_el=$(data_text_id);var text=data_el.data("text");data_el.html(nouns(text,val));}});d.on("click",".save_reputation_bomb",function(){var show_message=$(this).parents(".postbox-comments").first().prev().attr("id");if(authCheck()){var points=Math.abs(parseInt($("#points").val()));apiRequest({api:"User/reputationbomb/",data:{usercode:selected_message.author.code,count:points}},function(data){action_reload();if(data.losses){setTimeout(function(){showMess(_("effect_reputation_bomb_result_p1")+" "+addCommas(Math.abs(Number(data.losses)))+" "+nouns("effect_reputation_bomb_result_p3",Math.abs(Number(data.losses)))+" ",show_message,"succsses");},1200);}else{setTimeout(function(){showMess(_("effect_reputation_bomb_result_non"),show_message,"succsses");},1200);}});}});d.on("click",".save_transfer_points",function(){var show_message=$(this).parents(".postbox-comments").first().prev().attr("id");if(authCheck()){var points=Math.abs(parseInt($("#points").val()));if(points){apiRequest({api:"User/transferpoints/",data:{usercode:selected_message.author.code,points:points}},function(data){action_reload();setTimeout(function(){showMess(_("effect_transfer_points_result_success"),show_message,"succsses");},1200);});}else{showMess(_("points_invalid"),"action_message","err");}}});d.on("keypress input change","#text_input",function(e){synk_new_text($(this).val());});d.on("keydown keypress click paste","#text_message",function(e){e.preventDefault();e.stopPropagation();});d.on("click",".save_avatar",function(){if(authCheck()){savevAvatar(selected_message.author.code);}});d.on("mouseleave",".comment-avatar",function(e){});d.on("click","[class^='userinfo_']",function(){var classes=$(this).attr("class");var re=/userinfo_([^\s]+)/;$(".popover-comments").remove();try{var uid=re.exec(classes)[1];displayUserPage(uid);}catch(err){}});d.on("click","[class^='foruminfo_']",function(){var classes=$(this).attr("class");var re=/foruminfo_([^\s]+)/;$(".popover-comments").remove();try{var fid=re.exec(classes)[1];displayTopics(fid);}catch(err){}});d.on("click",".user-mypublicprofile",function(){openUserPublicProfile();});d.on("click",".user-myprofile",function(){openUserProfile();});d.on("click",".user-changepass",function(){openUserProfile();});d.on("click","[class^='public-profile-']",function(){var classes=$(this).attr("class");var re=/public-profile-([^\s]+)/;try{var uid=re.exec(classes)[1];openUserPublicProfile(uid);}catch(err){}});d.on("resize","#comments_block",function(e){_resize();});d.on("click",".more",function(){$(this).parent().css("display","none");$(this).closest("div.comment-content").find("div.post-text-full").first().css("display","block");});d.on("click",".less",function(){$(this).closest("div.comment-content").find("div.short_text").first().css("display","block");$(this).parent().css("display","none");});d.on("click",".site_more",function(){$(this).closest(".name-desc").find(".short_comment").hide();$(this).closest(".name-desc").find(".full_comment").show();});d.on("click",".site_less",function(){$(this).closest(".name-desc").find(".short_comment").show();$(this).closest(".name-desc").find(".full_comment").hide();});d.on("click","ul.share-comment-menu a.soicon",function(){var el=$(this);var sys=$(this).text();var mess=getMessageData(this);$(".action-menu-container > ul:visible").hide();$(".share-link-container").empty();socialShare(mess.code.replace("_clone",""),sys,el);});d.ajaxStart(function(e){clearTimeout(loading_timeout);loading_timeout=setTimeout(function(){$("#loading").show();},1000);});d.ajaxComplete(function(e){ajax_complete();});_resize(0);setInterval(function(){var url=/#sol-([^-#]+)-?([^-#]{40})/i.exec(forum_hash);if(!checkIsForum()||(url&&url[2])){update_threds();}},30000);d.on("focus",".f_email, .f_name, #embed_code_value, #appendedDropdownButton",function(){$(this).data("placeholder",$(this).attr("placeholder"));$(this).attr("placeholder","");$(this).removeClass("pholder");});d.on("blur",".f_email, .f_name, #embed_code_value, #appendedDropdownButton",function(){$(this).attr("placeholder",$(this).data("placeholder"));if(!$(this).val()){$(this).addClass("pholder");}});d.on("click","[id^=_profile_user_name]",function(){log($(this));});d.on("click","span.rating>span",function(){var rating=(5-$(this).index());if(rating>0&&rating<6){setStarRating($(this).parent(),rating);}$(".go-comment-button").show();});d.on("click","span.rating>span.norating",function(){setStarRating($(this).parent(),0);});d.on("click","a[class^='topicinfo_']",function(){var forum_code=$(this).parents("#comments").find(".foruminfo_").attr("forum_code");so_config.thead=$(this).parents(".topicThem").attr("thread_url");var thread_url=/sol-([^-#]+)-?([^-#]{40})?/i.exec(so_config.thead);if(thread_url&&thread_url[0]){setHash(thread_url[0]);}forum_hash=so_config.thead;openForum(forum_hash);});d.on("click","#my_threads_tab",function(){openForum("",true);});d.on("keyup",".comment_price_count",function(){var id=getMessageData($(this)).code;if(id){changeInContentEditable($("#reply_for_"+id));}else{changeInContentEditable($("#comment_data"));}});d.on("click",".yes_open_comment_for_me",function(){var id,p=$(this).parents(".mod-desc"),clone=false;if(p.length>0){id=p.first().attr("id");}if(id){clone=isCloneComment(id);if(clone){id=id.replace("_clone","");}openCommentForMe(id,clone);}});d.on("click",".open_comment_for_me",function(){if(authCheck()){$(this).siblings(".open_accept").show();$(this).hide();}});d.on("click",".not_open_comment_for_me",function(){$(this).parent(".open_accept").hide();$(this).parent().siblings(".open_comment_for_me").show();});d.on("click","a[class^='categoryinfo_']",function(){var category=$(this).attr("category_title");setHash("sof_"+category);openForum("sof_"+category);});d.on("focus","#forum_title, #topic_data",function(){$(".title-input-forum").show();_resize();});d.on("click","#cancel_forum, #cancel_topic",function(){$(".title-input-forum").hide();try{resetCommentBox($("#topic_data"));}catch(err){}try{resetCommentBox($("#forum_description"));resetCommentBox($("#forum_title"));$("#appendedDropdownButton").val("");}catch(err){}_resize();});d.on("click","#create_forum",function(){replaceAll();createForum();_resize();});d.on("click","#create_topic",function(){replaceAll();var fid=$(this).attr("forum_code");createTopic(fid);_resize();});d.on("click",".delete_topic",function(){var thread=$(this).parents(".topicThem").attr("thread_code");var fid=$("#show_create_topic, #create_topic").attr("forum_code");removeTopic(thread,fid);_resize();});d.on("click",".delete_forum",function(){var forum=$(this).parents(".topicThem").attr("forum_code");removeForum(forum);_resize();});d.on("click",".category-item",function(){var category=$(this).attr("category");$("#appendedDropdownButton").val(category);$("#appendedDropdownButton").attr("category",category);});d.on("keyup","#appendedDropdownButton",function(){var val=$(this).val();if(val.length>=3){categoriesForSelect(val);}else{if(val.length<=0){$(".select-cat").find(".btn-group").removeClass("open");}}_resize();});d.on("mouseover",".comment.topicThem, .comment-content.wrap-comments-content",function(){$(this).find(".admin-action .admin-hide").show();$(this).find("i.icon-dropdown-inner").first().show();});d.on("mouseleave",".comment.topicThem, .comment-content.wrap-comments-content",function(){if(!is_mob()){var menu_temp=$(this).find("i.icon-dropdown-inner");var forum_menu_temp=$(this).find(".admin-action .admin-hide");var menu=false;if(menu_temp.length>0){menu=menu_temp;}else{if(forum_menu_temp.length>0){menu=forum_menu_temp;}}if(menu){if(!menu.parents(".dropdown").hasClass("open")){menu.hide();}else{setTimeout(function(){menu.hide();menu.parents(".dropdown.open").removeClass("open");},2000);}if(!menu.parents(".dropdown").hasClass("open")){menu.hide();}else{setTimeout(function(){menu.hide();menu.parents(".dropdown.open").removeClass("open");},2000);}}}});d.on("click","li.pin_to_top",function(){var data={name:"effect_pin_to_top",inputs:[{label:_("effect_pin_to_top_tooltip")+" "+_("for1"),end_id:"ainput-end",end_text:"hours",attr:{"data-input-info":"#ainput-end",id:"pin_to_top_hours","class":"span1 calc_points main-color",name:"pin_to_top_hours",maxlength:"7",type:"text",value:"1"}}]};showAction($(this),"#templateSimpleAction",data);recalk_points(1);});d.on("click",".save_effect_pin_to_top",function(e){if(authCheck()){var pin_hours=$("#pin_to_top_hours").val();if(!pin_hours){pin_hours=1;}apiRequest({api:"Message/pintotop/",data:{messagecode:selected_message.code,count:pin_hours}},function(){action_reload();});}});d.on("click","li.cancel_all_effects",function(){var data={name:"cancel_a_effects",title:_("cancel_a_effects")};showAction($(this),"#templateSimpleAction",data);recalk_points(1);});d.on("click",".save_cancel_a_effects",function(){if(authCheck()){apiRequest({api:"Message/cancelalleffects/",data:{messagecode:selected_message.code}},function(){action_reload();});}});d.on("click","li.make_immune",function(){var data={name:"make_immune",title:_("effect_make_immune")};showAction($(this),"#templateSimpleAction",data);recalk_points(1);});d.on("click",".save_make_immune",function(){if(authCheck()){apiRequest({api:"Message/makeimmune/",data:{messagecode:selected_message.code}},function(){action_reload();});}});d.on("click",".sort-menu ul>li>a",function(e){var sort_order=$(this).data("value");$(".sort-menu-title").html(_("sort_"+sort_order+"_t"));setSortOrder(so_config.sitename,sort_order);showDiscussionTab();});d.on("click",".sort-menu",function(e){$(this).toggleClass("active");return false;});}function remarkEvent(){var input=$("#text_message");var selection=getSelectionHtml();if(/<div/i.test(selection)){return;}if(!selected&&parsEditedText().length<1){var selected_txt=getSelectionHtml();if(selected_txt=="<br>"){return false;}var selected_node="";if(getSelectedNode()){selected_node=getSelectedNode().nodeName.toLowerCase();}if(selected_txt.match(/<\/span>/)!=null||selected_txt.match(/<\/strike>/)!=null||selected_txt.match(/<\/q>/)!=null||selected_txt.match(/<\/i>/)!=null||selected_txt.match(/<\/a>/)!=null||selected_node=="q"||selected_node=="strike"||selected_node=="i"||selected_node=="a"||selected_node=="span"){show_popapalert(_("error_effect_remark_to_incorrect_position"),x+52,y+20);}else{raw=input.html();times_edited+=1;striked_txt='<span class="by">'+_("effect_add_remark_edited")+"</span><strike class='s"+times_edited+"'>"+selected_txt+"</strike>";insertHtmlAtCursor(striked_txt);edited=input.html();selected=true;var stiked=$("strike.s"+times_edited);var offset=stiked.offset();var x=offset.left+stiked.width(),y=offset.top-90,pw=$(window).width();if(x+160>pw){x=pw-330;}else{x-=160;}if(x<0){x=0;}show_popap_at(x,y);$("#text_input").focus();}}}function ajax_complete(){clearTimeout(loading_timeout);can_ajax=true;$("#loading").hide();}var resizeInterval=0;var resizeInterva2=0;function _resize(height,force){clearInterval(resizeInterval);resizeInterval=setTimeout(function(){i_resize(height,force);},10);}function i_resize(height,force){if(!height||height==""||height==undefined){height=$("body").height()+20;}if(height<105){return 0;}crosFramePost({"height":height},"resizeFrameById");$("#general-comments").css({"min-height":"100px"});}function sfSetminWidth(width){crosFramePost({"minWidth":width},"resizeFrameById");}function crosFramePost(data,comand){if(frame_id!="sfIframe"){data.frame_id=frame_id;window.parent.postMessage(comand+";"+JSON.stringify(data)+";","*");}else{if(comand=="setHash"){window.parent.postMessage("sfSetHash;"+data.hash,"*");}else{if(comand=="scrollTo"){window.parent.postMessage("sfSetScroll;"+data.position,"*");}else{if(comand=="getOffsetTop"){window.parent.postMessage("sfGetOffsetTop;","*");}else{if(comand=="getHash"){window.parent.postMessage("sfGetHash;","*");}else{if(comand=="placeWidget"){window.parent.postMessage("sfplaceWidget;","*");}else{if(comand=="resizeFrameById"){if(data["height"]){window.parent.postMessage("sfSetHeight;"+data["height"],"*");}if(data["minWidth"]){window.parent.postMessage("sfSetminWidth;"+data["minWidth"],"*");}}}}}}}}}function setHash(hash){crosFramePost({"hash":hash},"setHash");sfGetHash();}function sfSetPagePosition(position){crosFramePost({"position":position},"scrollTo");setTimeout(function(){crosFramePost({"position":position},"scrollTo");},100);}function sfGetTopOffset(){crosFramePost({},"getOffsetTop");}function sfGetHash(){crosFramePost({},"getHash");}function placeWidget(){var element_off=$(".comments-header").offset();var offset=0;if(element_off){offset=element_off.top;}crosFramePost({position:offset},"placeWidget");}function doSocialLogin(e,s){if(typeof(s)=="undefined"){s={h:620,w:550};}var resUrl="";if((typeof(e)!=="undefined")&&(typeof(e)!="object")){resUrl=e;}else{e.stopPropagation();e.preventDefault();resUrl=$(this).attr("data-href");}if(resUrl!=""&&resUrl!="#"){login_window=window.open(httpsUrl(resUrl)+"&l="+getLangugeShortNameById(getCurrentLangId())+"&sn="+getSiteName()+"&asn="+encodeURIComponent(alowed_sn.toString()),"loginWin","width="+s.w+", height="+s.h+", toolbar=0, scrollbars=0");}return false;}function getUserByAkey(key,suc_func){if(typeof(key)==="undefined"){key=sfGetAuth();}if(key){apiRequest({api:"User/get/",type:"GET",data:{a:key}},function(data){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(data);}});}else{if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(false);}}}function openForum(hash,click_tab){if(typeof hash=="undefined"){hash=forum_hash;}hideSortOrderMenu();var url=/#sol-([^-#]+)-?([^-#]{40})?/i.exec(hash);if(url){if(url[2]&&typeof url[2]!="undefined"){var thread_u=forum_pathname;if(thread_u.charAt(thread_u.length-1)=="/"){thread_u=thread_u.substr(0,thread_u.length-1);}so_config.thead=thread_u+"#SOL-"+url[1]+"-"+url[2];$("#comments_block > .comment-content").html($("#formContainerTemplate").tmpl());var stored_data=getFromStorage();if(stored_data){$("#comment_data").html(stored_data);}if(sfGetAuth()){$("#signup_login_box, .reply_comment_signup").hide();$("#post_message, .reply_button, .reply_button_cancel, #comments-menu, #show_create_forum, .comment-cancel").show();$(".myprofiledisplay,.myactivitydisplay").show();}getSiteEmbed(getSiteName(),function(data){placeWidget();action_reload(base_message);$("#navigation").show();setColor(data.embed);$(".mythreadsdisplay").show();});_resize();}else{so_config.thead=forum_pathname+"#SOL-"+url[1];var fid=url[1];displayTopics(fid);$(".mythreadsdisplay").show();}}else{var category=/sof_([a-z0-9%]+)/ig.exec(hash);base_category=category&&category[1]?category[1]:"";displayForums(base_category,click_tab);$(".mythreadsdisplay").show();}}function showUserAutorisation(data,reload){var tml=$("#top_menu_list"),mess=false,trace_id=false,code="";if((typeof data.name!="undefined")&&(data.name.length>0)){$.extend(current_user,data);userLocation=data.location;$("#display_name").html(data.name);var removed=false;if(data.is_removed&&data.is_removed==1){$("#comments_block > .comment-content").hide();removed=true;$("#comments-menu").show();}else{$("#post_message, .reply_button, .reply_button_cancel, #comments-menu, #show_create_forum, #show_create_topic, .comment-cancel").show();if(!is_html_mode()&&widget_type==0&&data.game_rules&&!isNaN(Math.abs(data.game_rules.pay_for_open))){comment_price_enabled=true;$(".comment_price_container").show();defoult_comment_price=Math.abs(data.game_rules.pay_for_open);$("input.comment_price").attr("value",defoult_comment_price);}if(is_html_mode()){$(".expert-icon").show();}}$("#signup_login_box, .reply_comment_signup").hide();tml.parent().find("ul.dropdown-menu").remove();tml.after('<ul class="dropdown-menu"><li><a href="'+base_url+'profile" target="_blank">'+_("user_menu_change_settings")+"</a></li>"+(removed||!can_buy_points?"":'<li><a class="buy_points">'+_("user_menu_buy_points")+"</a></li>")+'<li><a id="logout">'+_("user_menu_logout")+"</a></li></ul>");$(".myprofiledisplay,.myactivitydisplay").show();if(show_help){tryToShowHelpTab();}if(show_rating){$(".postbox").addClass("show_rating");}is_authentificate=true;}else{$("#comments_block > .comment-content").show();if(show_rating){setStarRating("#post_rating",0);}current_user=getUsersObject();if(message_list&&message_list.viewer){message_list.viewer=getUsersObject();}$(".myprofiledisplay,.myactivitydisplay").hide();if(show_help){tryToShowHelpTab();}$("#main_avatar").attr("src",default_avatar);$("#post_message, #comments-menu, .reply_button,.reply_button_cancel, #show_create_forum, #show_create_topic, .comment-cancel").hide();$("#signup_login_box, .reply_comment_signup").show();comment_price_enabled=false;$(".comment_price_container").hide();$(".expert-icon").hide();$(".postbox").removeClass("show_rating");is_authentificate=false;if(checkIsForum()){$(".postbox").hide();}}if(current_site.rewards&&Object.size(current_site.rewards)>0){$(".myrewards").show();$("span.rewards_count").html(" ("+Object.size(current_site.rewards)+")");}mess=/sot_([a-z0-9]+)/ig.exec(so_config.hash);trace_id=/soa_([a-z0-9]+)/ig.exec(so_config.hash);if(so_config.hash.indexOf("#solidopinion")>=0){try_to_place_widget=true;}if(trace_id&&trace_id[1]){code=trace_id[1];if(code.length>18){$.ajax({url:api_url+"message/clickevent/?linkcode="+code});}}base_message=mess&&mess[1]?mess[1]:"";if(forum_hash==""){forum_hash=so_config.hash;}if(!checkIsForum()){so_config.hash="";}if(checkIsForum()){openForum(forum_hash);}else{if(reload){message_list_hash="";action_reload(base_message);}}}function hideSortOrderMenu(){$(".sort-header").hide();}function showSortOrderMenu(){var sort_order=getSortOrder(so_config.sitename);if(!sort_order){if(current_site&&current_site.embed&&current_site.embed.order){sort_order=current_site.embed.order;}else{sort_order="date";}}$(".sort-menu-title").html(_("sort_"+sort_order+"_t"));$(".sort-header").show();}function displayUserInfo(refresh){if(typeof refresh=="undefined"||refresh===""){refresh=true;hideErr();}var key=sfGetAuth();try{login_window.close();}catch(e){}getUserByAkey(key,function(data){showUserAutorisation(data,refresh);});}function addslashes(str){return str.replace("/([\"'])/g","\\$1").replace("/\0/g","\\0");}function htmlspecialchars_decode(str){return str.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&");}function htmlspecialchars_encode(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}function sfHandlePaste(elem,e){var el=$(elem);var paste_content="";if(e&&e.clipboardData&&e.clipboardData.getData){var types=[];for(var i=0;i<e.clipboardData.types.length;i++){types.push(e.clipboardData.types[i]);}if(types.indexOf("text/plain")>=0){paste_content=e.clipboardData.getData("text/plain");}else{if(types.indexOf("text/html")>=0){paste_content=e.clipboardData.getData("text/html");}}}else{if(window.clipboardData&&window.clipboardData.getData){paste_content=window.clipboardData.getData("Text");}}if(e.preventDefault){e.stopPropagation();e.preventDefault();}if(paste_content.length>0){paste_content=htmlspecialchars_encode(paste_content).replace(/(?:\r\n|\r|\n)/g,"<br>");insertTextAtCursor(paste_content);}changeInContentEditable(el);$(".fake_br").remove();return false;}function update_threds(){if(!break_one_update_interval){if(!vimage_visible&&!$(".share-link-container input").is(":visible")&&!$(".simple-action").is(":visible")&&$("#comments").is(":visible")&&!$(".box-icon-action-menu").is(":visible")&&!$(".reply-container").is(":visible")&&!$("#comment_data").is(":focus")){var comment=$($("<div>"+$.trim(htmlDecode($("#comment_data").html())).replace(/(<a[^>]*>|<\/a>)/g," ")+"</div>"),"a, div, p").replaceWith(function(){if($.trim($(this).html())=="<br>"||$.trim($(this).html())=="</br>"){return"<br>";}return"<br/>"+$.trim($(this).html());});comment=comment.html();if(comment==""||comment=="<span>"+_("main_comment_field_reply")+"</span>"||comment=="<span>"+_("main_comment_field")+"</span>"){action_reload("",true);}}}else{break_one_update_interval=false;}}function createTopic(forum_code){var topic_title=$.trim(htmlDecode($("#topic_data").html()).replace(/<br\s*[\/]?>/gi," "));topic_title=filterComment(topic_title).trim();if(!topic_title){showMess("error_no_topic_title");return false;}var thread_u=forum_pathname;if(thread_u.charAt(thread_u.length-1)=="/"){thread_u=thread_u.substr(0,thread_u.length-1);}var data={a:sfGetAuth(),thread_title:topic_title,shortname:so_config.sitename,forum_code:forum_code,thread_url:thread_u};apiRequest({api:"Site/addforumthread/",data:data},function(data){$(".no_comment").remove();if(viewer.status=="owner"||viewer.status=="admin"||viewer.status=="moderator"){data.admin_action_menu=[{class_name:"delete_topic",effect_name:_("delete_topic")}];}data.avatar_small=getAvatar(data.author,"S",true);addToTopiclist(data);$("#all_threads").append($("#newThreadTemplate").tmpl(data));resetCommentBox($("#topic_data"));$("#topic_data").blur();$(".title-input-forum").hide();if(!data.is_visible){showMess("thread_hidden_because_points");}});}function createForum(){var forum_title=$.trim(htmlDecode($("#forum_title").html()).replace(/<br\s*[\/]?>/gi," "));forum_title=filterComment(forum_title);if(!forum_title){showMess("error_no_forum_title");return false;}var forum_description=$.trim(htmlDecode($("#forum_description").html()).replace(/<br\s*[\/]?>/gi," "));forum_description=filterComment(forum_description);var category=$("#appendedDropdownButton");var data={a:sfGetAuth(),forum_title:forum_title,shortname:so_config.sitename,forum_description:forum_description,forum_category_title:category.val()};apiRequest({api:"Site/addforum/",data:data},function(data){if(data&&data.forum_code){$(".no_comment").remove();if(viewer.status=="owner"||viewer.status=="admin"||viewer.status=="moderator"){data.admin_action_menu=[{class_name:"delete_forum",effect_name:_("delete_forum")}];}data.new_category=false;data.with_category=false;if(!data.forum_category_title){if($(".forum-without-category").length>0){$(".forum-without-category").append($("#newForumTemplate").tmpl(data));}else{data.new_category=true;$(".categories").prepend($("#newForumTemplate").tmpl(data));}}else{var category=$(".forum-with-category[category='"+data.forum_category_title+"']");if(category.length==1){category.append($("#newForumTemplate").tmpl(data));}else{data.new_category=true;data.with_category=true;$(".categories").append($("#newForumTemplate").tmpl(data));}}}setTimeout(function(){sfSetPagePosition($(".foruminfo_"+data.forum_code).offset().top);},500);$(".title-input-forum").hide();resetCommentBox($("#forum_description"));resetCommentBox($("#forum_title"));$("#appendedDropdownButton").val("");});}function getThreads(shortname,forum_code,suc_func,err_func){apiRequest({api:"Site/getforumthreads/",type:"GET",data:{shortname:shortname,forum_code:forum_code}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}},function(res){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(res);}});can_ajax=true;}function getCategories(shortname,suc_func,err_func){apiRequest({api:"Site/getforumcategories/",type:"GET",data:{shortname:shortname}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}},function(res){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(res);}});can_ajax=true;}function getForums(shortname,suc_func,err_func){apiRequest({api:"Site/getforums/",type:"GET",data:{shortname:shortname}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}},function(res){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(res);}});can_ajax=true;}function getSiteEmbed(shortname,suc_func,err_func){apiRequest({api:"Site/getpublic/",type:"GET",data:{shortname:shortname}},function(res){if(suc_func&&{}.toString.call(suc_func)==="[object Function]"){suc_func(res);}},function(res){if(err_func&&{}.toString.call(err_func)==="[object Function]"){err_func(res);}});}function displayTopics(forum_code){var hash="SOL-"+forum_code;setHash(hash);forum_hash="#"+hash;$(".pagination.pagination-centered ul").hide();addClassAct();$(".comments-header > h3 > span").html("");function succsses(res){removeAllTabsContent();$("#comments").empty().show();var key=sfGetAuth();getUserByAkey(key,function(usr){viewer=usr;$("#comments_block .comment-content").html($("#formThreadsTemplate").tmpl(usr));$("ul.inner-list").css("margin-left",0);if((typeof usr.name!="undefined")&&(usr.name.length>0)){var tml=$("#top_menu_list");var removed=false;if(viewer.is_removed&&viewer.is_removed==1){$("#comments_block > .comment-content").hide();removed=true;}$.extend(current_user,usr);$("#display_name").html(usr.name);userLocation=usr.location;tml.parent().find("ul.dropdown-menu").remove();tml.after('<ul class="dropdown-menu"><li><a href="'+base_url+'profile" target="_blank">'+_("user_menu_change_settings")+"</a></li>"+(removed||!can_buy_points?"":'<li><a class="buy_points">'+_("user_menu_buy_points")+"</a></li>")+'<li><a id="logout">'+_("user_menu_logout")+"</a></li></ul>");is_authentificate=true;$("#main_avatar").attr("src",getAvatar(usr,"S",true));$("#signup_login_box, .reply_comment_signup").hide();$("#post_message, .reply_button, .reply_button_cancel, #comments-menu, #show_create_forum, #show_create_topic, .comment-cancel").show();$(".myprofiledisplay,.myactivitydisplay").show();$("#create_topic").attr("forum_code",forum_code);_resize();if(usr.status=="owner"||usr.status=="moderator"||usr.status=="admin"){res.admin_action_menu=[{class_name:"delete_topic",effect_name:_("delete_topic")}];}}if(typeof res.data==="object"&&res.data.length>0){for(i in res.data){res.data[i].avatar_small=getAvatar(res.data[i].author,"S",true);addToTopiclist(res.data[i]);}}$("#comments").html($("#threadTemplate").tmpl(res));var category="";var category_title="";if(res.forum_category&&typeof res.forum_category!="undefined"){category_title=res.forum_category;category=res.forum_category.replace(" ","%20%");}if(!forum_code||typeof forum_code==="undefined"||!res.forum_title||typeof res.forum_title==="undefined"){displayForums();}else{$("div#navigation").html('<b><a onclick="openForum(); return false;" class="foruminfo_" forum_code="'+forum_code+'">'+res.forum_title+"</a></b>");$("#navigation").show();showPageBody();}if(res.responseText=="forum_code_invalid"){showNoThreads(true);}else{if(typeof res.data=="undefined"||res.data.length<=0){showNoThreads();}}_resize();});$(".first-preloader").remove();$("body").attr("style","");if(is_mob()){setTimeout(function(){$(".admin-action .admin-hide").show();$("i.icon-dropdown-inner").show();},2000);}_resize();placeWidget();}getSiteEmbed(getSiteName(),function(data){if(data&&data.avatar_url){site_avatar_url=data.avatar_url;}setColor(data.embed);getThreads(getSiteName(),forum_code,function(res){succsses(res);},function(res){succsses(res);});});}function displayForums(base_category,click_tab){if(!base_category||typeof base_category=="undefined"){base_category="";}var res={};$(".pagination.pagination-centered ul").hide();$("#navigation").hide();addClassAct();$(".comments-header > h3 > span").html("");removeAllTabsContent();$("#comments").empty().show();var categories=new Array;var forums_temp=new Array;var forums_list=new Array;function succ(cat){if(typeof(cat)!="undefined"&&cat){categories=cat.data;function succsses(forums){forums_temp=forums.data;for(var i in categories){var category_name=categories[i];for(var k in forums_temp){if(category_name==forums_temp[k][3]){if(typeof forums_list[i]=="undefined"){forums_list[i]={};forums_list[i].category=category_name;forums_list[i].forums=new Array;}forums_list[i].forums.push(forums_temp[k]);}}}for(var k in forums_temp){if(forums_temp[k][3]==""){if(categories[0]!="main_category"){categories.unshift("main_category");}if(typeof forums_list[0]=="undefined"||forums_list[0].category!="main_category"){forums_list.unshift({});forums_list[0].category="main_category";forums_list[0].forums=new Array;}forums_list[0].forums.push(forums_temp[k]);}}if(forums_list){res.forums_list=forums_list;}res.categories=categories;res.categories.splice(0,1);var key=sfGetAuth();getUserByAkey(key,function(usr){viewer=usr;res.user=usr;$("#comments_block .comment-content").html($("#formForumsTemplate").tmpl(res));$("ul.inner-list").css("margin-left",0);if((typeof usr.name!="undefined")&&(usr.name.length>0)){var tml=$("#top_menu_list");var removed=false;if(viewer.is_removed&&viewer.is_removed==1){$("#comments_block > .comment-content").hide();removed=true;}$.extend(current_user,usr);$("#display_name").html(usr.name);userLocation=usr.location;tml.parent().find("ul.dropdown-menu").remove();tml.after('<ul class="dropdown-menu"><li><a href="'+base_url+'profile" target="_blank">'+_("user_menu_change_settings")+"</a></li>"+(removed||!can_buy_points?"":'<li><a class="buy_points">'+_("user_menu_buy_points")+"</a></li>")+'<li><a id="logout">'+_("user_menu_logout")+"</a></li></ul>");is_authentificate=true;$("#main_avatar").attr("src",getAvatar(usr,"S",true));$("#signup_login_box, .reply_comment_signup").hide();$("#post_message, .reply_button, .reply_button_cancel, #comments-menu, #show_create_forum, #show_create_topic").show();$(".myprofiledisplay,.myactivitydisplay").show();if(usr.status=="owner"||usr.status=="moderator"||usr.status=="admin"){res.admin_action_menu=[{class_name:"delete_forum",effect_name:_("delete_forum")}];}}$("#comments").html($("#forumsTemplate").tmpl(res));showPageBody();getSiteEmbed(getSiteName(),function(data){setColor(data.embed);});if(typeof forums.data=="undefined"||forums.data.length<=0){showNoForums();}_resize();if(base_category){setTimeout(function(){base_category=base_category.replace("%20%"," ");if($('.categorytitle_[categorytitle^="'+base_category+'"]').length>0){sfSetPagePosition($('.categorytitle_[categorytitle^="'+base_category+'"]').offset().top);}base_category="";},300);}setHash("");forum_hash="";});$(".first-preloader").remove();$("body").attr("style","");setTimeout(function(){$("#comments_block .comment-content").show();if(click_tab){placeWidget();}},800);_resize();}getForums(getSiteName(),function(forums){succsses(forums);},function(forums){succsses(forums);});}if(is_mob()){setTimeout(function(){$(".admin-action .admin-hide").show();$("i.icon-dropdown-inner").show();},2000);}}getSiteEmbed(getSiteName(),function(data){if(data&&data.avatar_url){site_avatar_url=data.avatar_url;}setColor(data.embed);getCategories(getSiteName(),function(cat){succ(cat);},function(cat){succ(cat);});});}function addClassAct(elem){$("#comments-disc-nav .act").removeClass("act");if(checkIsForum()){$("#my_threads_tab").parent().addClass("act");}else{elem.addClass("act");}}function removeTopic(thread,forum){var a=sfGetAuth();apiRequest({api:"Site/removeforumthread/",type:"POST",data:{thread_code:thread,a:a,shortname:so_config.sitename,forum_code:forum}},function(data){$(".topicThem[thread_code^='"+thread+"']").remove();if(typeof $(".topicThem")=="undefined"||$(".topicThem").length==0){showNoThreads();}},function(data){return false;});}function removeForum(forum){var a=sfGetAuth();apiRequest({api:"Site/removeforum/",type:"POST",data:{forum_code:forum,a:a,shortname:so_config.sitename}},function(data){var forumDiv=$(".topicThem[forum_code='"+forum+"']");var category=forumDiv.parents("#category");forumDiv.remove();if(category.find(".topicThem").length==0){category.remove();}if(typeof $("#category")=="undefined"||$("#category").length==0){showNoForums();}},function(data){return false;});}setTimeout(function(){_resize();},3000);setInterval(function(){$("div.comment-div").each(function(){checkTextCount($(this));});},2000);function goBackend(){var win=window.open(base_url+"profile","_blank");win.focus();}
